import"../chunks/DsnmJJEf.js";import{i as qr}from"../chunks/DyedvWJA.js";import{ae as Kn,aC as Gr,aD as hs,aE as gs,h as l,aF as wo,M as Oo,e as je,aG as tr,N as Ur,C as Qr,v as Ho,A as no,w as ke,ah as vs,x as ys,R as ms,y as ps,H as ws,z as nr,B as Xt,K as Lt,ai as _s,am as xs,D as qt,G as bs,F as xt,aH as or,a6 as Ie,aq as Jr,aI as Yn,I as jr,J as ks,aJ as Fn,aK as Ss,aL as oo,aM as Gt,ak as Es,aN as Cs,ap as Ns,aO as Ps,X as As,aP as $r,aQ as Ms,L as rn,i as Ds,aR as Is,aS as Ts,aT as zs,af as ei,aU as Os,aV as Hs,aW as Rs,aX as Vs,aY as Ls,aZ as Bs,a_ as Ks,O as Ys,T as Ut,p as ie,l as $,a7 as ge,q as B,a as V,m as se,V as I,n as F,o as K,c as me,f as ae,t as ce,ay as Qt,u as Fs,a9 as _,s as ze,a$ as Ot,b0 as Ht,b1 as Xn,b2 as ti,d as ht,b3 as _e,aa as Xs,aA as En,b4 as be,b5 as De,b6 as Zs,b7 as rr}from"../chunks/9Mg6vh82.js";import{l as ni,i as Ws,c as qs,d as Rt,a as Gs,n as Us,b as Qs,e as Js,s as ye,f as _o,g as Ro,j as Qe}from"../chunks/BK2XbIpB.js";import{i as ue,p as Y,r as mt,b as sn,c as Vo,s as bt}from"../chunks/BDiy184L.js";const js=[];function Lo(e,t=!1){return wn(e,new Map,"",js)}function wn(e,t,n,o,r=null){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Kn(e)){var i=Array(e.length);t.set(e,i),r!==null&&t.set(r,i);for(var a=0;a<e.length;a+=1){var u=e[a];a in e&&(i[a]=wn(u,t,n,o))}return i}if(Gr(e)===hs){i={},t.set(e,i),r!==null&&t.set(r,i);for(var d in e)i[d]=wn(e[d],t,n,o);return i}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return wn(e.toJSON(),t,n,o,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function $s(e){let t=0,n=wo(0),o;return()=>{gs()&&(l(n),Oo(()=>(t===0&&(o=je(()=>e(()=>tr(n)))),t+=1,()=>{Ur(()=>{t-=1,t===0&&(o?.(),o=void 0,tr(n))})})))}}function kt(e,t){return t}function ea(e,t,n){for(var o=e.items,r=[],s=t.length,i=0;i<s;i++)Cs(t[i].e,r,!0);var a=s>0&&r.length===0&&n!==null;if(a){var u=n.parentNode;Ns(u),u.append(n),o.clear(),Ke(e,t[0].prev,t[s-1].next)}Ps(r,()=>{for(var d=0;d<s;d++){var c=t[d];a||(o.delete(c.k),Ke(e,c.prev,c.next)),Gt(c.e,!a)}})}function $e(e,t,n,o,r,s=null){var i=e,a={flags:t,items:new Map,first:null},u=(t&$r)!==0;if(u){var d=e;i=ke?no(vs(d)):d.appendChild(Qr())}ke&&ys();var c=null,h=!1,f=new Map,g=ms(()=>{var w=n();return Kn(w)?w:w==null?[]:Jr(w)}),y,m;function k(){ta(m,y,a,f,i,r,t,o,n),s!==null&&(y.length===0?c?jr(c):c=qt(()=>s(i)):c!==null&&ks(c,()=>{c=null}))}Ho(()=>{m??=As,y=l(g);var w=y.length;if(h&&w===0)return;h=w===0;let z=!1;if(ke){var N=ps(i)===ws;N!==(w===0)&&(i=nr(),no(i),Xt(!1),z=!0)}if(ke){for(var S=null,M,E=0;E<w;E++){if(Lt.nodeType===_s&&Lt.data===xs){i=Lt,z=!0,Xt(!1);break}var A=y[E],L=o(A,E);M=xo(Lt,a,S,null,A,L,E,r,t,n),a.items.set(L,M),S=M}w>0&&no(nr())}if(ke)w===0&&s&&(c=qt(()=>s(i)));else if(bs()){var Z=new Set,J=xt;for(E=0;E<w;E+=1){A=y[E],L=o(A,E);var H=a.items.get(L)??f.get(L);H?(t&(Fn|Yn))!==0&&oi(H,A,E,t):(M=xo(null,a,null,null,A,L,E,r,t,n,!0),f.set(L,M)),Z.add(L)}for(const[x,C]of a.items)Z.has(x)||J.skipped_effects.add(C.e);J.add_callback(k)}else k();z&&Xt(!0),l(g)}),ke&&(i=Lt)}function ta(e,t,n,o,r,s,i,a,u){var d=(i&Ms)!==0,c=(i&(Fn|Yn))!==0,h=t.length,f=n.items,g=n.first,y=g,m,k=null,w,z=[],N=[],S,M,E,A;if(d)for(A=0;A<h;A+=1)S=t[A],M=a(S,A),E=f.get(M),E!==void 0&&(E.a?.measure(),(w??=new Set).add(E));for(A=0;A<h;A+=1){if(S=t[A],M=a(S,A),E=f.get(M),E===void 0){var L=o.get(M);if(L!==void 0){o.delete(M),f.set(M,L);var Z=k?k.next:y;Ke(n,k,L),Ke(n,L,Z),ro(L,Z,r),k=L}else{var J=y?y.e.nodes_start:r;k=xo(J,n,k,k===null?n.first:k.next,S,M,A,s,i,u)}f.set(M,k),z=[],N=[],y=k.next;continue}if(c&&oi(E,S,A,i),(E.e.f&oo)!==0&&(jr(E.e),d&&(E.a?.unfix(),(w??=new Set).delete(E))),E!==y){if(m!==void 0&&m.has(E)){if(z.length<N.length){var H=N[0],x;k=H.prev;var C=z[0],v=z[z.length-1];for(x=0;x<z.length;x+=1)ro(z[x],H,r);for(x=0;x<N.length;x+=1)m.delete(N[x]);Ke(n,C.prev,v.next),Ke(n,k,C),Ke(n,v,H),y=H,k=v,A-=1,z=[],N=[]}else m.delete(E),ro(E,y,r),Ke(n,E.prev,E.next),Ke(n,E,k===null?n.first:k.next),Ke(n,k,E),k=E;continue}for(z=[],N=[];y!==null&&y.k!==M;)(y.e.f&oo)===0&&(m??=new Set).add(y),N.push(y),y=y.next;if(y===null)continue;E=y}z.push(E),k=E,y=E.next}if(y!==null||m!==void 0){for(var b=m===void 0?[]:Jr(m);y!==null;)(y.e.f&oo)===0&&b.push(y),y=y.next;var p=b.length;if(p>0){var P=(i&$r)!==0&&h===0?r:null;if(d){for(A=0;A<p;A+=1)b[A].a?.measure();for(A=0;A<p;A+=1)b[A].a?.fix()}ea(n,b,P)}}d&&Ur(()=>{if(w!==void 0)for(E of w)E.a?.apply()}),e.first=n.first&&n.first.e,e.last=k&&k.e;for(var T of o.values())Gt(T.e);o.clear()}function oi(e,t,n,o){(o&Fn)!==0&&or(e.v,t),(o&Yn)!==0?or(e.i,n):e.i=n}function xo(e,t,n,o,r,s,i,a,u,d,c){var h=(u&Fn)!==0,f=(u&Ss)===0,g=h?f?Ie(r,!1,!1):wo(r):r,y=(u&Yn)===0?i:wo(i),m={i:y,v:g,k:s,a:null,e:null,prev:n,next:o};try{if(e===null){var k=document.createDocumentFragment();k.append(e=Qr())}return m.e=qt(()=>a(e,g,y,d),ke),m.e.prev=n&&n.e,m.e.next=o&&o.e,n===null?c||(t.first=m):(n.next=m,n.e.next=m.e),o!==null&&(o.prev=m,o.e.prev=m.e),m}finally{}}function ro(e,t,n){for(var o=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==o;){var i=Es(s);r.before(s),s=i}}function Ke(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ee(e,t,n){rn(()=>{var o=je(()=>t(e,n?.())||{});if(n&&o?.update){var r=!1,s={};Oo(()=>{var i=n();Ds(i),r&&Is(s,i)&&(s=i,o.update(i))}),r=!0}if(o?.destroy)return()=>o.destroy()})}function na(e,t){var n=void 0,o;Ho(()=>{n!==(n=t())&&(o&&(Gt(o),o=null),n&&(o=qt(()=>{rn(()=>n(e))})))})}function ri(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=ri(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function oa(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=ri(e))&&(o&&(o+=" "),o+=t);return o}function Ve(e){return typeof e=="object"?oa(e):e??""}const ir=[...` 	
\r\f \v\uFEFF`];function ra(e,t,n){var o=e==null?"":""+e;if(t&&(o=o?o+" "+t:t),n){for(var r in n)if(n[r])o=o?o+" "+r:r;else if(o.length)for(var s=r.length,i=0;(i=o.indexOf(r,i))>=0;){var a=i+s;(i===0||ir.includes(o[i-1]))&&(a===o.length||ir.includes(o[a]))?o=(i===0?"":o.substring(0,i))+o.substring(a+1):i=a}}return o===""?null:o}function sr(e,t=!1){var n=t?" !important;":";",o="";for(var r in e){var s=e[r];s!=null&&s!==""&&(o+=" "+r+": "+s+n)}return o}function io(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ia(e,t){if(t){var n="",o,r;if(Array.isArray(t)?(o=t[0],r=t[1]):o=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,i=0,a=!1,u=[];o&&u.push(...Object.keys(o).map(io)),r&&u.push(...Object.keys(r).map(io));var d=0,c=-1;const m=e.length;for(var h=0;h<m;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):s?s===f&&(s=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?s=f:f==="("?i++:f===")"&&i--,!a&&s===!1&&i===0){if(f===":"&&c===-1)c=h;else if(f===";"||h===m-1){if(c!==-1){var g=io(e.substring(d,c).trim());if(!u.includes(g)){f!==";"&&h++;var y=e.substring(d,h).trim();n+=" "+y+";"}}d=h+1,c=-1}}}}return o&&(n+=sr(o)),r&&(n+=sr(r,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Oe(e,t,n,o,r,s){var i=e.__className;if(ke||i!==n||i===void 0){var a=ra(n,o,s);(!ke||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a)),e.__className=n}else if(s&&r!==s)for(var u in s){var d=!!s[u];(r==null||d!==!!r[u])&&e.classList.toggle(u,d)}return s}function so(e,t={},n,o){for(var r in n){var s=n[r];t[r]!==s&&(n[r]==null?e.style.removeProperty(r):e.style.setProperty(r,s,o))}}function We(e,t,n,o){var r=e.__style;if(ke||r!==t){var s=ia(t,o);(!ke||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}else o&&(Array.isArray(o)?(so(e,n?.[0],o[0]),so(e,n?.[1],o[1],"important")):so(e,n,o));return o}function Cn(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Kn(t))return Ts();for(var o of e.options)o.selected=t.includes(Zt(o));return}for(o of e.options){var r=Zt(o);if(zs(r,t)){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ii(e){var t=new MutationObserver(()=>{Cn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ei(()=>{t.disconnect()})}function Nn(e,t,n=t){var o=!0;ni(e,"change",r=>{var s=r?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(s),Zt);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");i=a&&Zt(a)}n(i)}),rn(()=>{var r=t();if(Cn(e,r,o),o&&r===void 0){var s=e.querySelector(":checked");s!==null&&(r=Zt(s),n(r))}e.__value=r,o=!1}),ii(e)}function Zt(e){return"__value"in e?e.__value:e.value}const it=Symbol("class"),Je=Symbol("style"),si=Symbol("is custom element"),ai=Symbol("is html");function Et(e){if(ke){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;oe(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var r=e.checked;oe(e,"checked",null),e.checked=r}}};e.__on_r=n,Bs(n),Js()}}function sa(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function oe(e,t,n,o){var r=li(e);ke&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="loading"&&(e[Vs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ci(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function aa(e,t,n,o,r=!1){var s=li(e),i=s[si],a=!s[ai];let u=ke&&i;u&&Xt(!1);var d=t||{},c=e.tagName==="OPTION";for(var h in t)h in n||(n[h]=null);n.class?n.class=Ve(n.class):(o||n[it])&&(n.class=null),n[Je]&&(n.style??=null);var f=ci(e);for(const N in n){let S=n[N];if(c&&N==="value"&&S==null){e.value=e.__value="",d[N]=S;continue}if(N==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";Oe(e,g,S,o,t?.[it],n[it]),d[N]=S,d[it]=n[it];continue}if(N==="style"){We(e,S,t?.[Je],n[Je]),d[N]=S,d[Je]=n[Je];continue}var y=d[N];if(!(S===y&&!(S===void 0&&e.hasAttribute(N)))){d[N]=S;var m=N[0]+N[1];if(m!=="$$")if(m==="on"){const M={},E="$$"+N;let A=N.slice(2);var k=Qs(A);if(Ws(A)&&(A=A.slice(0,-7),M.capture=!0),!k&&y){if(S!=null)continue;e.removeEventListener(A,d[E],M),d[E]=null}if(S!=null)if(k)e[`__${A}`]=S,Rt([A]);else{let L=function(Z){d[N].call(this,Z)};d[E]=qs(A,e,L,M)}else k&&(e[`__${A}`]=void 0)}else if(N==="style")oe(e,N,S);else if(N==="autofocus")Gs(e,!!S);else if(!i&&(N==="__value"||N==="value"&&S!=null))e.value=e.__value=S;else if(N==="selected"&&c)sa(e,S);else{var w=N;a||(w=Us(w));var z=w==="defaultValue"||w==="defaultChecked";if(S==null&&!i&&!z)if(s[N]=null,w==="value"||w==="checked"){let M=e;const E=t===void 0;if(w==="value"){let A=M.defaultValue;M.removeAttribute(w),M.defaultValue=A,M.value=M.__value=E?A:null}else{let A=M.defaultChecked;M.removeAttribute(w),M.defaultChecked=A,M.checked=E?A:!1}}else e.removeAttribute(N);else z||f.includes(w)&&(i||typeof S!="string")?e[w]=S:typeof S!="function"&&oe(e,w,S)}}}return u&&Xt(!0),d}function ct(e,t,n=[],o=[],r,s=!1){Os(n,o,i=>{var a=void 0,u={},d=e.nodeName==="SELECT",c=!1;if(Ho(()=>{var f=t(...i.map(l)),g=aa(e,a,f,r,s);c&&d&&"value"in f&&Cn(e,f.value);for(let m of Object.getOwnPropertySymbols(u))f[m]||Gt(u[m]);for(let m of Object.getOwnPropertySymbols(f)){var y=f[m];m.description===Hs&&(!a||y!==a[m])&&(u[m]&&Gt(u[m]),u[m]=qt(()=>na(e,()=>y))),g[m]=y}a=g}),d){var h=e;rn(()=>{Cn(h,a.value,!0),ii(h)})}c=!0})}function li(e){return e.__attributes??={[si]:e.nodeName.includes("-"),[ai]:e.namespaceURI===Rs}}var ar=new Map;function ci(e){var t=ar.get(e.nodeName);if(t)return t;ar.set(e.nodeName,t=[]);for(var n,o=e,r=Element.prototype;r!==o;){n=Ls(o);for(var s in n)n[s].set&&t.push(s);o=Gr(o)}return t}function Ct(e,t,n=t){var o=Ks(),r=new WeakSet;ni(e,"input",s=>{var i=s?e.defaultValue:e.value;if(i=ao(e)?lo(i):i,n(i),xt!==null&&r.add(xt),o&&i!==(i=t())){var a=e.selectionStart,u=e.selectionEnd;e.value=i??"",u!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(u,e.value.length))}}),(ke&&e.defaultValue!==e.value||je(t)==null&&e.value)&&(n(ao(e)?lo(e.value):e.value),xt!==null&&r.add(xt)),Oo(()=>{var s=t();e===document.activeElement&&r.has(xt)||ao(e)&&s===lo(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ao(e){var t=e.type;return t==="number"||t==="range"}function lo(e){return e===""?null:+e}function la(e,t,n){var o=Ys(e,t);o&&o.set&&(e[t]=n,ei(()=>{e[t]=null}))}class Bo{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var o=this.#e.get(t)||new Set;return o.add(n),this.#e.set(t,o),this.#o().observe(t,this.#n),()=>{var r=this.#e.get(t);r.delete(n),r.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#o(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){Bo.entries.set(n.target,n);for(var o of this.#e.get(n.target)||[])o(n)}}))}}var ca=new Bo({box:"border-box"});function lr(e,t,n){var o=ca.observe(e,()=>n(e[t]));rn(()=>(je(()=>n(e[t])),o))}function ua(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function da(e,t){var n=e.$$events?.[t.type],o=Kn(n)?n.slice():n==null?[]:[n];for(var r of o)r.call(this,t)}const ut=Ut([{role:"user",status:"active"},{role:"admin",status:"active"}]),Te=Ut({active:!1,currentStepID:0}),Ce=Ut([{id:0,label:"Start",agent:"system",type:"start",condition:"never",formItems:[]},{id:1,label:"end",agent:"system",type:"end",formItems:[]},{id:2,label:"Start",agent:"system",type:"start",formItems:[]}]);function fa(e,t){console.log("open"),I(t,!0)}function ha(e,t){I(t,!1)}var ga=$('<div class="flex items-center justify-between bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200"><span class="text-gray-700 font-medium mr-5"> </span> <button class="text-white bg-red-400 hover:bg-red-600 rounded-full w-8 h-8 flex items-center justify-center transition" aria-label="Remove Agent">−</button></div>'),va=(e,t)=>{e.key==="Enter"&&t()},ya=$('<div id="new-agent-form" class="space-y-3 mt-4 bg-gray-50 p-4 rounded-md border border-gray-200"><input type="text" placeholder="Enter new role" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/> <div class="flex justify-evenly space-x-2"><button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition">Submit</button> <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md transition">Cancel</button></div></div>'),ma=$('<div class="p-6 mx-5 bg-slate-300 rounded-lg shadow-md space-y-4 opacity-[98%]"><h2 class="text-xl font-semibold text-gray-800">agentList</h2> <div class="grid grid-cols-1 gap-4"></div> <button class="mt-4 text-white bg-slate-600 hover:bg-blue-700 px-4 py-2 rounded-md transition font-medium">+ Add Agent</button> <!></div>');function pa(e,t){ie(t,!0);let n=ge(!1),o=ge("");function r(){let h=!1;ut.map(f=>(f.role===l(o)&&(h=!0,f.status="active"),f)),h||ut.push({role:l(o),status:"active"}),I(n,!1),I(o,""),console.log(ut,l(o))}function s(h){ut[Lo(h).i].status="deleted"}var i=ma(),a=B(F(i),2);$e(a,21,()=>ut,kt,(h,f,g)=>{var y=me(),m=ae(y);{var k=w=>{var z=ga(),N=F(z),S=F(N,!0);K(N);var M=B(N,2);M.__click=()=>s({i:g}),K(z),ce(()=>ye(S,l(f).role)),V(w,z)};ue(m,w=>{l(f).status!=="deleted"&&w(k)})}V(h,y)}),K(a);var u=B(a,2);u.__click=[fa,n];var d=B(u,2);{var c=h=>{var f=ya(),g=F(f);Et(g),g.__keydown=[va,r];var y=B(g,2),m=F(y);m.__click=r;var k=B(m,2);k.__click=[ha,n],K(y),K(f),Ct(g,()=>l(o),w=>I(o,w)),V(h,f)};ue(d,h=>{l(n)&&h(c)})}K(i),V(e,i),se()}Rt(["click","keydown"]);var wa={value:()=>{}};function Zn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new _n(n)}function _n(e){this._=e}function _a(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}_n.prototype=Zn.prototype={constructor:_n,on:function(e,t){var n=this._,o=_a(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=xa(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=cr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=cr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _n(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function xa(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function cr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=wa,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var bo="http://www.w3.org/1999/xhtml";const ur={svg:"http://www.w3.org/2000/svg",xhtml:bo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ur.hasOwnProperty(t)?{space:ur[t],local:e}:e}function ba(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bo&&t.documentElement.namespaceURI===bo?t.createElement(e):t.createElementNS(n,e)}}function ka(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ui(e){var t=Wn(e);return(t.local?ka:ba)(t)}function Sa(){}function Ko(e){return e==null?Sa:function(){return this.querySelector(e)}}function Ea(e){typeof e!="function"&&(e=Ko(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),u,d,c=0;c<i;++c)(u=s[c])&&(d=e.call(u,u.__data__,c,s))&&("__data__"in u&&(d.__data__=u.__data__),a[c]=d);return new Ae(o,this._parents)}function Ca(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Na(){return[]}function di(e){return e==null?Na:function(){return this.querySelectorAll(e)}}function Pa(e){return function(){return Ca(e.apply(this,arguments))}}function Aa(e){typeof e=="function"?e=Pa(e):e=di(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,u,d=0;d<a;++d)(u=i[d])&&(o.push(e.call(u,u.__data__,d,i)),r.push(u));return new Ae(o,r)}function fi(e){return function(){return this.matches(e)}}function hi(e){return function(t){return t.matches(e)}}var Ma=Array.prototype.find;function Da(e){return function(){return Ma.call(this.children,e)}}function Ia(){return this.firstElementChild}function Ta(e){return this.select(e==null?Ia:Da(typeof e=="function"?e:hi(e)))}var za=Array.prototype.filter;function Oa(){return Array.from(this.children)}function Ha(e){return function(){return za.call(this.children,e)}}function Ra(e){return this.selectAll(e==null?Oa:Ha(typeof e=="function"?e:hi(e)))}function Va(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],u,d=0;d<i;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&a.push(u);return new Ae(o,this._parents)}function gi(e){return new Array(e.length)}function La(){return new Ae(this._enter||this._groups.map(gi),this._parents)}function Pn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pn.prototype={constructor:Pn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ba(e){return function(){return e}}function Ka(e,t,n,o,r,s){for(var i=0,a,u=t.length,d=s.length;i<d;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new Pn(e,s[i]);for(;i<u;++i)(a=t[i])&&(r[i]=a)}function Ya(e,t,n,o,r,s,i){var a,u,d=new Map,c=t.length,h=s.length,f=new Array(c),g;for(a=0;a<c;++a)(u=t[a])&&(f[a]=g=i.call(u,u.__data__,a,t)+"",d.has(g)?r[a]=u:d.set(g,u));for(a=0;a<h;++a)g=i.call(e,s[a],a,s)+"",(u=d.get(g))?(o[a]=u,u.__data__=s[a],d.delete(g)):n[a]=new Pn(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&d.get(f[a])===u&&(r[a]=u)}function Fa(e){return e.__data__}function Xa(e,t){if(!arguments.length)return Array.from(this,Fa);var n=t?Ya:Ka,o=this._parents,r=this._groups;typeof e!="function"&&(e=Ba(e));for(var s=r.length,i=new Array(s),a=new Array(s),u=new Array(s),d=0;d<s;++d){var c=o[d],h=r[d],f=h.length,g=Za(e.call(c,c&&c.__data__,d,o)),y=g.length,m=a[d]=new Array(y),k=i[d]=new Array(y),w=u[d]=new Array(f);n(c,h,m,k,w,g,t);for(var z=0,N=0,S,M;z<y;++z)if(S=m[z]){for(z>=N&&(N=z+1);!(M=k[N])&&++N<y;);S._next=M||null}}return i=new Ae(i,o),i._enter=a,i._exit=u,i}function Za(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wa(){return new Ae(this._exit||this._groups.map(gi),this._parents)}function qa(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function Ga(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),u=0;u<i;++u)for(var d=n[u],c=o[u],h=d.length,f=a[u]=new Array(h),g,y=0;y<h;++y)(g=d[y]||c[y])&&(f[y]=g);for(;u<r;++u)a[u]=n[u];return new Ae(a,this._parents)}function Ua(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Qa(e){e||(e=Ja);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,u=r[s]=new Array(a),d,c=0;c<a;++c)(d=i[c])&&(u[c]=d);u.sort(t)}return new Ae(r,this._parents).order()}function Ja(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ja(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $a(){return Array.from(this)}function el(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function tl(){let e=0;for(const t of this)++e;return e}function nl(){return!this.node()}function ol(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function rl(e){return function(){this.removeAttribute(e)}}function il(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sl(e,t){return function(){this.setAttribute(e,t)}}function al(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ll(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function cl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ul(e,t){var n=Wn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?il:rl:typeof t=="function"?n.local?cl:ll:n.local?al:sl)(n,t))}function vi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function dl(e){return function(){this.style.removeProperty(e)}}function fl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function gl(e,t,n){return arguments.length>1?this.each((t==null?dl:typeof t=="function"?hl:fl)(e,t,n??"")):At(this.node(),e)}function At(e,t){return e.style.getPropertyValue(t)||vi(e).getComputedStyle(e,null).getPropertyValue(t)}function vl(e){return function(){delete this[e]}}function yl(e,t){return function(){this[e]=t}}function ml(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pl(e,t){return arguments.length>1?this.each((t==null?vl:typeof t=="function"?ml:yl)(e,t)):this.node()[e]}function yi(e){return e.trim().split(/^|\s+/)}function Yo(e){return e.classList||new mi(e)}function mi(e){this._node=e,this._names=yi(e.getAttribute("class")||"")}mi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function pi(e,t){for(var n=Yo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function wi(e,t){for(var n=Yo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function wl(e){return function(){pi(this,e)}}function _l(e){return function(){wi(this,e)}}function xl(e,t){return function(){(t.apply(this,arguments)?pi:wi)(this,e)}}function bl(e,t){var n=yi(e+"");if(arguments.length<2){for(var o=Yo(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?xl:t?wl:_l)(n,t))}function kl(){this.textContent=""}function Sl(e){return function(){this.textContent=e}}function El(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cl(e){return arguments.length?this.each(e==null?kl:(typeof e=="function"?El:Sl)(e)):this.node().textContent}function Nl(){this.innerHTML=""}function Pl(e){return function(){this.innerHTML=e}}function Al(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ml(e){return arguments.length?this.each(e==null?Nl:(typeof e=="function"?Al:Pl)(e)):this.node().innerHTML}function Dl(){this.nextSibling&&this.parentNode.appendChild(this)}function Il(){return this.each(Dl)}function Tl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zl(){return this.each(Tl)}function Ol(e){var t=typeof e=="function"?e:ui(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Hl(){return null}function Rl(e,t){var n=typeof e=="function"?e:ui(e),o=t==null?Hl:typeof t=="function"?t:Ko(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Vl(){var e=this.parentNode;e&&e.removeChild(this)}function Ll(){return this.each(Vl)}function Bl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yl(e){return this.select(e?Kl:Bl)}function Fl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Xl(e){return function(t){e.call(this,t,this.__data__)}}function Zl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Wl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function ql(e,t,n){return function(){var o=this.__on,r,s=Xl(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function Gl(e,t,n){var o=Zl(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,d=a.length,c;u<d;++u)for(r=0,c=a[u];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?ql:Wl,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function _i(e,t,n){var o=vi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ul(e,t){return function(){return _i(this,e,t)}}function Ql(e,t){return function(){return _i(this,e,t.apply(this,arguments))}}function Jl(e,t){return this.each((typeof t=="function"?Ql:Ul)(e,t))}function*jl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var xi=[null];function Ae(e,t){this._groups=e,this._parents=t}function an(){return new Ae([[document.documentElement]],xi)}function $l(){return this}Ae.prototype=an.prototype={constructor:Ae,select:Ea,selectAll:Aa,selectChild:Ta,selectChildren:Ra,filter:Va,data:Xa,enter:La,exit:Wa,join:qa,merge:Ga,selection:$l,order:Ua,sort:Qa,call:ja,nodes:$a,node:el,size:tl,empty:nl,each:ol,attr:ul,style:gl,property:pl,classed:bl,text:Cl,html:Ml,raise:Il,lower:zl,append:Ol,insert:Rl,remove:Ll,clone:Yl,datum:Fl,on:Gl,dispatch:Jl,[Symbol.iterator]:jl};function He(e){return typeof e=="string"?new Ae([[document.querySelector(e)]],[document.documentElement]):new Ae([[e]],xi)}function ec(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ye(e,t){if(e=ec(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const tc={passive:!1},Jt={capture:!0,passive:!1};function co(e){e.stopImmediatePropagation()}function Nt(e){e.preventDefault(),e.stopImmediatePropagation()}function bi(e){var t=e.document.documentElement,n=He(e).on("dragstart.drag",Nt,Jt);"onselectstart"in t?n.on("selectstart.drag",Nt,Jt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ki(e,t){var n=e.document.documentElement,o=He(e).on("dragstart.drag",null);t&&(o.on("click.drag",Nt,Jt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fn=e=>()=>e;function ko(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:u,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}ko.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function nc(e){return!e.ctrlKey&&!e.button}function oc(){return this.parentNode}function rc(e,t){return t??{x:e.x,y:e.y}}function ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function sc(){var e=nc,t=oc,n=rc,o=ic,r={},s=Zn("start","drag","end"),i=0,a,u,d,c,h=0;function f(S){S.on("mousedown.drag",g).filter(o).on("touchstart.drag",k).on("touchmove.drag",w,tc).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(S,M){if(!(c||!e.call(this,S,M))){var E=N(this,t.call(this,S,M),S,M,"mouse");E&&(He(S.view).on("mousemove.drag",y,Jt).on("mouseup.drag",m,Jt),bi(S.view),co(S),d=!1,a=S.clientX,u=S.clientY,E("start",S))}}function y(S){if(Nt(S),!d){var M=S.clientX-a,E=S.clientY-u;d=M*M+E*E>h}r.mouse("drag",S)}function m(S){He(S.view).on("mousemove.drag mouseup.drag",null),ki(S.view,d),Nt(S),r.mouse("end",S)}function k(S,M){if(e.call(this,S,M)){var E=S.changedTouches,A=t.call(this,S,M),L=E.length,Z,J;for(Z=0;Z<L;++Z)(J=N(this,A,S,M,E[Z].identifier,E[Z]))&&(co(S),J("start",S,E[Z]))}}function w(S){var M=S.changedTouches,E=M.length,A,L;for(A=0;A<E;++A)(L=r[M[A].identifier])&&(Nt(S),L("drag",S,M[A]))}function z(S){var M=S.changedTouches,E=M.length,A,L;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<E;++A)(L=r[M[A].identifier])&&(co(S),L("end",S,M[A]))}function N(S,M,E,A,L,Z){var J=s.copy(),H=Ye(Z||E,M),x,C,v;if((v=n.call(S,new ko("beforestart",{sourceEvent:E,target:f,identifier:L,active:i,x:H[0],y:H[1],dx:0,dy:0,dispatch:J}),A))!=null)return x=v.x-H[0]||0,C=v.y-H[1]||0,function b(p,P,T){var D=H,O;switch(p){case"start":r[L]=b,O=i++;break;case"end":delete r[L],--i;case"drag":H=Ye(T||P,M),O=i;break}J.call(p,S,new ko(p,{sourceEvent:P,subject:v,target:f,identifier:L,active:O,x:H[0]+x,y:H[1]+C,dx:H[0]-D[0],dy:H[1]-D[1],dispatch:J}),A)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:fn(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:fn(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:fn(S),f):n},f.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:fn(!!S),f):o},f.on=function(){var S=s.on.apply(s,arguments);return S===s?f:S},f.clickDistance=function(S){return arguments.length?(h=(S=+S)*S,f):Math.sqrt(h)},f}function Fo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Si(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ln(){}var jt=.7,An=1/jt,Pt="\\s*([+-]?\\d+)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ac=/^#([0-9a-f]{3,8})$/,lc=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),cc=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),uc=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${$t}\\)$`),dc=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${$t}\\)$`),fc=new RegExp(`^hsl\\(${$t},${Ze},${Ze}\\)$`),hc=new RegExp(`^hsla\\(${$t},${Ze},${Ze},${$t}\\)$`),dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fo(ln,gt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fr,formatHex:fr,formatHex8:gc,formatHsl:vc,formatRgb:hr,toString:hr});function fr(){return this.rgb().formatHex()}function gc(){return this.rgb().formatHex8()}function vc(){return Ei(this).formatHsl()}function hr(){return this.rgb().formatRgb()}function gt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ac.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gr(t):n===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lc.exec(e))?new Ne(t[1],t[2],t[3],1):(t=cc.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uc.exec(e))?hn(t[1],t[2],t[3],t[4]):(t=dc.exec(e))?hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fc.exec(e))?mr(t[1],t[2]/100,t[3]/100,1):(t=hc.exec(e))?mr(t[1],t[2]/100,t[3]/100,t[4]):dr.hasOwnProperty(e)?gr(dr[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function gr(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function hn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ne(e,t,n,o)}function yc(e){return e instanceof ln||(e=gt(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function So(e,t,n,o){return arguments.length===1?yc(e):new Ne(e,t,n,o??1)}function Ne(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Fo(Ne,So,Si(ln,{brighter(e){return e=e==null?An:Math.pow(An,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jt:Math.pow(jt,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ne(ft(this.r),ft(this.g),ft(this.b),Mn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vr,formatHex:vr,formatHex8:mc,formatRgb:yr,toString:yr}));function vr(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}`}function mc(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}${dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function yr(){const e=Mn(this.opacity);return`${e===1?"rgb(":"rgba("}${ft(this.r)}, ${ft(this.g)}, ${ft(this.b)}${e===1?")":`, ${e})`}`}function Mn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dt(e){return e=ft(e),(e<16?"0":"")+e.toString(16)}function mr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Re(e,t,n,o)}function Ei(e){if(e instanceof Re)return new Re(e.h,e.s,e.l,e.opacity);if(e instanceof ln||(e=gt(e)),!e)return new Re;if(e instanceof Re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,a=s-r,u=(s+r)/2;return a?(t===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-t)/a+2:i=(t-n)/a+4,a/=u<.5?s+r:2-s-r,i*=60):a=u>0&&u<1?0:i,new Re(i,a,u,e.opacity)}function pc(e,t,n,o){return arguments.length===1?Ei(e):new Re(e,t,n,o??1)}function Re(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Fo(Re,pc,Si(ln,{brighter(e){return e=e==null?An:Math.pow(An,e),new Re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jt:Math.pow(jt,e),new Re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Ne(uo(e>=240?e-240:e+120,r,o),uo(e,r,o),uo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Re(pr(this.h),gn(this.s),gn(this.l),Mn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mn(this.opacity);return`${e===1?"hsl(":"hsla("}${pr(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pr(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function uo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xo=e=>()=>e;function wc(e,t){return function(n){return e+n*t}}function _c(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function xc(e){return(e=+e)==1?Ci:function(t,n){return n-t?_c(t,n,e):Xo(isNaN(t)?n:t)}}function Ci(e,t){var n=t-e;return n?wc(e,n):Xo(isNaN(e)?t:e)}const Dn=function e(t){var n=xc(t);function o(r,s){var i=n((r=So(r)).r,(s=So(s)).r),a=n(r.g,s.g),u=n(r.b,s.b),d=Ci(r.opacity,s.opacity);return function(c){return r.r=i(c),r.g=a(c),r.b=u(c),r.opacity=d(c),r+""}}return o.gamma=e,o}(1);function bc(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(s){for(r=0;r<n;++r)o[r]=e[r]*(1-s)+t[r]*s;return o}}function kc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Sc(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),s=new Array(n),i;for(i=0;i<o;++i)r[i]=Wt(e[i],t[i]);for(;i<n;++i)s[i]=t[i];return function(a){for(i=0;i<o;++i)s[i]=r[i](a);return s}}function Ec(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Fe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cc(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Wt(e[r],t[r]):o[r]=t[r];return function(s){for(r in n)o[r]=n[r](s);return o}}var Eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fo=new RegExp(Eo.source,"g");function Nc(e){return function(){return e}}function Pc(e){return function(t){return e(t)+""}}function Ni(e,t){var n=Eo.lastIndex=fo.lastIndex=0,o,r,s,i=-1,a=[],u=[];for(e=e+"",t=t+"";(o=Eo.exec(e))&&(r=fo.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,u.push({i,x:Fe(o,r)})),n=fo.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?u[0]?Pc(u[0].x):Nc(t):(t=u.length,function(d){for(var c=0,h;c<t;++c)a[(h=u[c]).i]=h.x(d);return a.join("")})}function Wt(e,t){var n=typeof t,o;return t==null||n==="boolean"?Xo(t):(n==="number"?Fe:n==="string"?(o=gt(t))?(t=o,Dn):Ni:t instanceof gt?Dn:t instanceof Date?Ec:kc(t)?bc:Array.isArray(t)?Sc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cc:Fe)(e,t)}var wr=180/Math.PI,Co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pi(e,t,n,o,r,s){var i,a,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,u/=a),e*o<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*wr,skewX:Math.atan(u)*wr,scaleX:i,scaleY:a}}var vn;function Ac(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Co:Pi(t.a,t.b,t.c,t.d,t.e,t.f)}function Mc(e){return e==null||(vn||(vn=document.createElementNS("http://www.w3.org/2000/svg","g")),vn.setAttribute("transform",e),!(e=vn.transform.baseVal.consolidate()))?Co:(e=e.matrix,Pi(e.a,e.b,e.c,e.d,e.e,e.f))}function Ai(e,t,n,o){function r(d){return d.length?d.pop()+" ":""}function s(d,c,h,f,g,y){if(d!==h||c!==f){var m=g.push("translate(",null,t,null,n);y.push({i:m-4,x:Fe(d,h)},{i:m-2,x:Fe(c,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function i(d,c,h,f){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),f.push({i:h.push(r(h)+"rotate(",null,o)-2,x:Fe(d,c)})):c&&h.push(r(h)+"rotate("+c+o)}function a(d,c,h,f){d!==c?f.push({i:h.push(r(h)+"skewX(",null,o)-2,x:Fe(d,c)}):c&&h.push(r(h)+"skewX("+c+o)}function u(d,c,h,f,g,y){if(d!==h||c!==f){var m=g.push(r(g)+"scale(",null,",",null,")");y.push({i:m-4,x:Fe(d,h)},{i:m-2,x:Fe(c,f)})}else(h!==1||f!==1)&&g.push(r(g)+"scale("+h+","+f+")")}return function(d,c){var h=[],f=[];return d=e(d),c=e(c),s(d.translateX,d.translateY,c.translateX,c.translateY,h,f),i(d.rotate,c.rotate,h,f),a(d.skewX,c.skewX,h,f),u(d.scaleX,d.scaleY,c.scaleX,c.scaleY,h,f),d=c=null,function(g){for(var y=-1,m=f.length,k;++y<m;)h[(k=f[y]).i]=k.x(g);return h.join("")}}}var Dc=Ai(Ac,"px, ","px)","deg)"),Ic=Ai(Mc,", ",")",")"),Tc=1e-12;function _r(e){return((e=Math.exp(e))+1/e)/2}function zc(e){return((e=Math.exp(e))-1/e)/2}function Oc(e){return((e=Math.exp(2*e))-1)/(e+1)}const xn=function e(t,n,o){function r(s,i){var a=s[0],u=s[1],d=s[2],c=i[0],h=i[1],f=i[2],g=c-a,y=h-u,m=g*g+y*y,k,w;if(m<Tc)w=Math.log(f/d)/t,k=function(A){return[a+A*g,u+A*y,d*Math.exp(t*A*w)]};else{var z=Math.sqrt(m),N=(f*f-d*d+o*m)/(2*d*n*z),S=(f*f-d*d-o*m)/(2*f*n*z),M=Math.log(Math.sqrt(N*N+1)-N),E=Math.log(Math.sqrt(S*S+1)-S);w=(E-M)/t,k=function(A){var L=A*w,Z=_r(M),J=d/(n*z)*(Z*Oc(t*L+M)-zc(M));return[a+J*g,u+J*y,d*Z/_r(t*L+M)]}}return k.duration=w*1e3*t/Math.SQRT2,k}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,u=a*a;return e(i,a,u)},r}(Math.SQRT2,2,4);var Mt=0,Yt=0,Bt=0,Mi=1e3,In,Ft,Tn=0,vt=0,qn=0,en=typeof performance=="object"&&performance.now?performance:Date,Di=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zo(){return vt||(Di(Hc),vt=en.now()+qn)}function Hc(){vt=0}function zn(){this._call=this._time=this._next=null}zn.prototype=Ii.prototype={constructor:zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zo():+n)+(t==null?0:+t),!this._next&&Ft!==this&&(Ft?Ft._next=this:In=this,Ft=this),this._call=e,this._time=n,No()},stop:function(){this._call&&(this._call=null,this._time=1/0,No())}};function Ii(e,t,n){var o=new zn;return o.restart(e,t,n),o}function Rc(){Zo(),++Mt;for(var e=In,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mt}function xr(){vt=(Tn=en.now())+qn,Mt=Yt=0;try{Rc()}finally{Mt=0,Lc(),vt=0}}function Vc(){var e=en.now(),t=e-Tn;t>Mi&&(qn-=t,Tn=e)}function Lc(){for(var e,t=In,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:In=n);Ft=e,No(o)}function No(e){if(!Mt){Yt&&(Yt=clearTimeout(Yt));var t=e-vt;t>24?(e<1/0&&(Yt=setTimeout(xr,e-en.now()-qn)),Bt&&(Bt=clearInterval(Bt))):(Bt||(Tn=en.now(),Bt=setInterval(Vc,Mi)),Mt=1,Di(xr))}}function br(e,t,n){var o=new zn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Bc=Zn("start","end","cancel","interrupt"),Kc=[],Ti=0,kr=1,Po=2,bn=3,Sr=4,Ao=5,kn=6;function Gn(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Yc(e,n,{name:t,index:o,group:r,on:Bc,tween:Kc,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ti})}function Wo(e,t){var n=Le(e,t);if(n.state>Ti)throw new Error("too late; already scheduled");return n}function Ge(e,t){var n=Le(e,t);if(n.state>bn)throw new Error("too late; already running");return n}function Le(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Ii(s,0,n.time);function s(d){n.state=kr,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var c,h,f,g;if(n.state!==kr)return u();for(c in o)if(g=o[c],g.name===n.name){if(g.state===bn)return br(i);g.state===Sr?(g.state=kn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[c]):+c<t&&(g.state=kn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[c])}if(br(function(){n.state===bn&&(n.state=Sr,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=Po,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Po){for(n.state=bn,r=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=g);r.length=h+1}}function a(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=Ao,1),h=-1,f=r.length;++h<f;)r[h].call(e,c);n.state===Ao&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=kn,n.timer.stop(),delete o[t];for(var d in o)return;delete e.__transition}}function Sn(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>Po&&o.state<Ao,o.state=kn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function Fc(e){return this.each(function(){Sn(this,e)})}function Xc(e,t){var n,o;return function(){var r=Ge(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Zc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Ge(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},u=0,d=r.length;u<d;++u)if(r[u].name===t){r[u]=a;break}u===d&&r.push(a)}s.tween=r}}function Wc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Le(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?Xc:Zc)(n,e,t))}function qo(e,t,n){var o=e._id;return e.each(function(){var r=Ge(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Le(r,o).value[t]}}function zi(e,t){var n;return(typeof t=="number"?Fe:t instanceof gt?Dn:(n=gt(t))?(t=n,Dn):Ni)(e,t)}function qc(e){return function(){this.removeAttribute(e)}}function Gc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uc(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function Qc(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function Jc(e,t,n){var o,r,s;return function(){var i,a=n(this),u;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),u=a+"",i===u?null:i===o&&u===r?s:(r=u,s=t(o=i,a)))}}function jc(e,t,n){var o,r,s;return function(){var i,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),u=a+"",i===u?null:i===o&&u===r?s:(r=u,s=t(o=i,a)))}}function $c(e,t){var n=Wn(e),o=n==="transform"?Ic:zi;return this.attrTween(e,typeof t=="function"?(n.local?jc:Jc)(n,o,qo(this,"attr."+e,t)):t==null?(n.local?Gc:qc)(n):(n.local?Qc:Uc)(n,o,t))}function eu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nu(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&tu(e,s)),n}return r._value=t,r}function ou(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&eu(e,s)),n}return r._value=t,r}function ru(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Wn(e);return this.tween(n,(o.local?nu:ou)(o,t))}function iu(e,t){return function(){Wo(this,e).delay=+t.apply(this,arguments)}}function su(e,t){return t=+t,function(){Wo(this,e).delay=t}}function au(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iu:su)(t,e)):Le(this.node(),t).delay}function lu(e,t){return function(){Ge(this,e).duration=+t.apply(this,arguments)}}function cu(e,t){return t=+t,function(){Ge(this,e).duration=t}}function uu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lu:cu)(t,e)):Le(this.node(),t).duration}function du(e,t){if(typeof t!="function")throw new Error;return function(){Ge(this,e).ease=t}}function fu(e){var t=this._id;return arguments.length?this.each(du(t,e)):Le(this.node(),t).ease}function hu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ge(this,e).ease=n}}function gu(e){if(typeof e!="function")throw new Error;return this.each(hu(this._id,e))}function vu(e){typeof e!="function"&&(e=fi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],u,d=0;d<i;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&a.push(u);return new ot(o,this._parents,this._name,this._id)}function yu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var u=t[a],d=n[a],c=u.length,h=i[a]=new Array(c),f,g=0;g<c;++g)(f=u[g]||d[g])&&(h[g]=f);for(;a<o;++a)i[a]=t[a];return new ot(i,this._parents,this._name,this._id)}function mu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function pu(e,t,n){var o,r,s=mu(t)?Wo:Ge;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function wu(e,t){var n=this._id;return arguments.length<2?Le(this.node(),n).on.on(e):this.each(pu(n,e,t))}function _u(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xu(){return this.on("end.remove",_u(this._id))}function bu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ko(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],u=a.length,d=s[i]=new Array(u),c,h,f=0;f<u;++f)(c=a[f])&&(h=e.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),d[f]=h,Gn(d[f],t,n,f,d,Le(c,n)));return new ot(s,this._parents,t,n)}function ku(e){var t=this._name,n=this._id;typeof e!="function"&&(e=di(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var u=o[a],d=u.length,c,h=0;h<d;++h)if(c=u[h]){for(var f=e.call(c,c.__data__,h,u),g,y=Le(c,n),m=0,k=f.length;m<k;++m)(g=f[m])&&Gn(g,t,n,m,f,y);s.push(f),i.push(c)}return new ot(s,i,t,n)}var Su=an.prototype.constructor;function Eu(){return new Su(this._groups,this._parents)}function Cu(e,t){var n,o,r;return function(){var s=At(this,e),i=(this.style.removeProperty(e),At(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function Oi(e){return function(){this.style.removeProperty(e)}}function Nu(e,t,n){var o,r=n+"",s;return function(){var i=At(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function Pu(e,t,n){var o,r,s;return function(){var i=At(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),At(this,e))),i===u?null:i===o&&u===r?s:(r=u,s=t(o=i,a))}}function Au(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var u=Ge(this,e),d=u.on,c=u.value[s]==null?a||(a=Oi(t)):void 0;(d!==n||r!==c)&&(o=(n=d).copy()).on(i,r=c),u.on=o}}function Mu(e,t,n){var o=(e+="")=="transform"?Dc:zi;return t==null?this.styleTween(e,Cu(e,o)).on("end.style."+e,Oi(e)):typeof t=="function"?this.styleTween(e,Pu(e,o,qo(this,"style."+e,t))).each(Au(this._id,e)):this.styleTween(e,Nu(e,o,t),n).on("end.style."+e,null)}function Du(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Iu(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&Du(e,i,n)),o}return s._value=t,s}function Tu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Iu(e,t,n??""))}function zu(e){return function(){this.textContent=e}}function Ou(e){return function(){var t=e(this);this.textContent=t??""}}function Hu(e){return this.tween("text",typeof e=="function"?Ou(qo(this,"text",e)):zu(e==null?"":e+""))}function Ru(e){return function(t){this.textContent=e.call(this,t)}}function Vu(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Ru(r)),t}return o._value=e,o}function Lu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vu(e))}function Bu(){for(var e=this._name,t=this._id,n=Hi(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,u,d=0;d<a;++d)if(u=i[d]){var c=Le(u,t);Gn(u,e,n,d,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ot(o,this._parents,e,n)}function Ku(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},u={value:function(){--r===0&&s()}};n.each(function(){var d=Ge(this,o),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),d.on=t}),r===0&&s()})}var Yu=0;function ot(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Hi(){return++Yu}var Ue=an.prototype;ot.prototype={constructor:ot,select:bu,selectAll:ku,selectChild:Ue.selectChild,selectChildren:Ue.selectChildren,filter:vu,merge:yu,selection:Eu,transition:Bu,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:wu,attr:$c,attrTween:ru,style:Mu,styleTween:Tu,text:Hu,textTween:Lu,remove:xu,tween:Wc,delay:au,duration:uu,ease:fu,easeVarying:gu,end:Ku,[Symbol.iterator]:Ue[Symbol.iterator]};function Fu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Xu={time:null,delay:0,duration:250,ease:Fu};function Zu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Wu(e){var t,n;e instanceof ot?(t=e._id,e=e._name):(t=Hi(),(n=Xu).time=Zo(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,u,d=0;d<a;++d)(u=i[d])&&Gn(u,e,t,d,i,n||Zu(u,t));return new ot(o,this._parents,e,t)}an.prototype.interrupt=Fc;an.prototype.transition=Wu;const yn=e=>()=>e;function qu(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function et(e,t,n){this.k=e,this.x=t,this.y=n}et.prototype={constructor:et,scale:function(e){return e===1?this:new et(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new et(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Un=new et(1,0,0);Ri.prototype=et.prototype;function Ri(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Un;return e.__zoom}function ho(e){e.stopImmediatePropagation()}function Kt(e){e.preventDefault(),e.stopImmediatePropagation()}function Gu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Uu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Er(){return this.__zoom||Un}function Qu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ju(){return navigator.maxTouchPoints||"ontouchstart"in this}function ju(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function $u(){var e=Gu,t=Uu,n=ju,o=Qu,r=Ju,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,u=xn,d=Zn("start","zoom","end"),c,h,f,g=500,y=150,m=0,k=10;function w(v){v.property("__zoom",Er).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",Z).on("dblclick.zoom",J).filter(r).on("touchstart.zoom",H).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(v,b,p,P){var T=v.selection?v.selection():v;T.property("__zoom",Er),v!==T?M(v,b,p,P):T.interrupt().each(function(){E(this,arguments).event(P).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},w.scaleBy=function(v,b,p,P){w.scaleTo(v,function(){var T=this.__zoom.k,D=typeof b=="function"?b.apply(this,arguments):b;return T*D},p,P)},w.scaleTo=function(v,b,p,P){w.transform(v,function(){var T=t.apply(this,arguments),D=this.__zoom,O=p==null?S(T):typeof p=="function"?p.apply(this,arguments):p,R=D.invert(O),U=typeof b=="function"?b.apply(this,arguments):b;return n(N(z(D,U),O,R),T,i)},p,P)},w.translateBy=function(v,b,p,P){w.transform(v,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof p=="function"?p.apply(this,arguments):p),t.apply(this,arguments),i)},null,P)},w.translateTo=function(v,b,p,P,T){w.transform(v,function(){var D=t.apply(this,arguments),O=this.__zoom,R=P==null?S(D):typeof P=="function"?P.apply(this,arguments):P;return n(Un.translate(R[0],R[1]).scale(O.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof p=="function"?-p.apply(this,arguments):-p),D,i)},P,T)};function z(v,b){return b=Math.max(s[0],Math.min(s[1],b)),b===v.k?v:new et(b,v.x,v.y)}function N(v,b,p){var P=b[0]-p[0]*v.k,T=b[1]-p[1]*v.k;return P===v.x&&T===v.y?v:new et(v.k,P,T)}function S(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function M(v,b,p,P){v.on("start.zoom",function(){E(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(P).end()}).tween("zoom",function(){var T=this,D=arguments,O=E(T,D).event(P),R=t.apply(T,D),U=p==null?S(R):typeof p=="function"?p.apply(T,D):p,W=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),X=T.__zoom,q=typeof b=="function"?b.apply(T,D):b,G=u(X.invert(U).concat(W/X.k),q.invert(U).concat(W/q.k));return function(Q){if(Q===1)Q=q;else{var re=G(Q),de=W/re[2];Q=new et(de,U[0]-re[0]*de,U[1]-re[1]*de)}O.zoom(null,Q)}})}function E(v,b,p){return!p&&v.__zooming||new A(v,b)}function A(v,b){this.that=v,this.args=b,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,b),this.taps=0}A.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,b){return this.mouse&&v!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var b=He(this.that).datum();d.call(v,this.that,new qu(v,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:d}),b)}};function L(v,...b){if(!e.apply(this,arguments))return;var p=E(this,b).event(v),P=this.__zoom,T=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,o.apply(this,arguments)))),D=Ye(v);if(p.wheel)(p.mouse[0][0]!==D[0]||p.mouse[0][1]!==D[1])&&(p.mouse[1]=P.invert(p.mouse[0]=D)),clearTimeout(p.wheel);else{if(P.k===T)return;p.mouse=[D,P.invert(D)],Sn(this),p.start()}Kt(v),p.wheel=setTimeout(O,y),p.zoom("mouse",n(N(z(P,T),p.mouse[0],p.mouse[1]),p.extent,i));function O(){p.wheel=null,p.end()}}function Z(v,...b){if(f||!e.apply(this,arguments))return;var p=v.currentTarget,P=E(this,b,!0).event(v),T=He(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",W,!0),D=Ye(v,p),O=v.clientX,R=v.clientY;bi(v.view),ho(v),P.mouse=[D,this.__zoom.invert(D)],Sn(this),P.start();function U(X){if(Kt(X),!P.moved){var q=X.clientX-O,G=X.clientY-R;P.moved=q*q+G*G>m}P.event(X).zoom("mouse",n(N(P.that.__zoom,P.mouse[0]=Ye(X,p),P.mouse[1]),P.extent,i))}function W(X){T.on("mousemove.zoom mouseup.zoom",null),ki(X.view,P.moved),Kt(X),P.event(X).end()}}function J(v,...b){if(e.apply(this,arguments)){var p=this.__zoom,P=Ye(v.changedTouches?v.changedTouches[0]:v,this),T=p.invert(P),D=p.k*(v.shiftKey?.5:2),O=n(N(z(p,D),P,T),t.apply(this,b),i);Kt(v),a>0?He(this).transition().duration(a).call(M,O,P,v):He(this).call(w.transform,O,P,v)}}function H(v,...b){if(e.apply(this,arguments)){var p=v.touches,P=p.length,T=E(this,b,v.changedTouches.length===P).event(v),D,O,R,U;for(ho(v),O=0;O<P;++O)R=p[O],U=Ye(R,this),U=[U,this.__zoom.invert(U),R.identifier],T.touch0?!T.touch1&&T.touch0[2]!==U[2]&&(T.touch1=U,T.taps=0):(T.touch0=U,D=!0,T.taps=1+!!c);c&&(c=clearTimeout(c)),D&&(T.taps<2&&(h=U[0],c=setTimeout(function(){c=null},g)),Sn(this),T.start())}}function x(v,...b){if(this.__zooming){var p=E(this,b).event(v),P=v.changedTouches,T=P.length,D,O,R,U;for(Kt(v),D=0;D<T;++D)O=P[D],R=Ye(O,this),p.touch0&&p.touch0[2]===O.identifier?p.touch0[0]=R:p.touch1&&p.touch1[2]===O.identifier&&(p.touch1[0]=R);if(O=p.that.__zoom,p.touch1){var W=p.touch0[0],X=p.touch0[1],q=p.touch1[0],G=p.touch1[1],Q=(Q=q[0]-W[0])*Q+(Q=q[1]-W[1])*Q,re=(re=G[0]-X[0])*re+(re=G[1]-X[1])*re;O=z(O,Math.sqrt(Q/re)),R=[(W[0]+q[0])/2,(W[1]+q[1])/2],U=[(X[0]+G[0])/2,(X[1]+G[1])/2]}else if(p.touch0)R=p.touch0[0],U=p.touch0[1];else return;p.zoom("touch",n(N(O,R,U),p.extent,i))}}function C(v,...b){if(this.__zooming){var p=E(this,b).event(v),P=v.changedTouches,T=P.length,D,O;for(ho(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),D=0;D<T;++D)O=P[D],p.touch0&&p.touch0[2]===O.identifier?delete p.touch0:p.touch1&&p.touch1[2]===O.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(O=Ye(O,this),Math.hypot(h[0]-O[0],h[1]-O[1])<k)){var R=He(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return w.wheelDelta=function(v){return arguments.length?(o=typeof v=="function"?v:yn(+v),w):o},w.filter=function(v){return arguments.length?(e=typeof v=="function"?v:yn(!!v),w):e},w.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:yn(!!v),w):r},w.extent=function(v){return arguments.length?(t=typeof v=="function"?v:yn([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),w):t},w.scaleExtent=function(v){return arguments.length?(s[0]=+v[0],s[1]=+v[1],w):[s[0],s[1]]},w.translateExtent=function(v){return arguments.length?(i[0][0]=+v[0][0],i[1][0]=+v[1][0],i[0][1]=+v[0][1],i[1][1]=+v[1][1],w):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},w.constrain=function(v){return arguments.length?(n=v,w):n},w.duration=function(v){return arguments.length?(a=+v,w):a},w.interpolate=function(v){return arguments.length?(u=v,w):u},w.on=function(){var v=d.on.apply(d,arguments);return v===d?w:v},w.clickDistance=function(v){return arguments.length?(m=(v=+v)*v,w):Math.sqrt(m)},w.tapDistance=function(v){return arguments.length?(k=+v,w):k},w}const tn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Mo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Vi=["Enter"," ","Escape"],ed={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Dt;(function(e){e.Strict="strict",e.Loose="loose"})(Dt||(Dt={}));var at;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(at||(at={}));var On;(function(e){e.Partial="partial",e.Full="full"})(On||(On={}));const Do={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var st;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(st||(st={}));var Hn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Hn||(Hn={}));var j;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(j||(j={}));const Cr={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top};function td(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Nr(e,t,n){if(!n)return;const o=[];e.forEach((r,s)=>{t?.has(s)||o.push(r)}),o.length&&n(o)}function nd(e){return e===null?null:e?"valid":"invalid"}const Li=e=>"id"in e&&"source"in e&&"target"in e,od=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Go=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),cn=(e,t=[0,0])=>{const{width:n,height:o}=pt(e),r=e.origin??t,s=n*r[0],i=o*r[1];return{x:e.position.x-s,y:e.position.y-i}},rd=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const s=typeof r=="string";let i=!t.nodeLookup&&!s?r:void 0;t.nodeLookup&&(i=s?t.nodeLookup.get(r):Go(r)?r:t.nodeLookup.get(r.id));const a=i?Rn(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Jn(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jn(n)},Qn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=Rn(o);n=Jn(n,r)}}),jn(n)},Uo=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1)=>{const a={...un(t,[n,o,r]),width:t.width/r,height:t.height/r},u=[];for(const d of e.values()){const{measured:c,selectable:h=!0,hidden:f=!1}=d;if(i&&!h||f)continue;const g=c.width??d.width??d.initialWidth??null,y=c.height??d.height??d.initialHeight??null,m=nn(a,Tt(d)),k=(g??0)*(y??0),w=s&&m>0;(!d.internals.handleBounds||w||m>=k||d.dragging)&&u.push(d)}return u},id=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function sd(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function ad({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:s},i){if(e.size===0)return Promise.resolve(!0);const a=sd(e,i),u=Qn(a),d=Qo(u,t,n,i?.minZoom??r,i?.maxZoom??s,i?.padding??.1);return await o.setViewport(d,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function Bi({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:s}){const i=n.get(e),a=i.parentId?n.get(i.parentId):void 0,{x:u,y:d}=a?a.internals.positionAbsolute:{x:0,y:0},c=i.origin??o;let h=i.extent||r;if(i.extent==="parent"&&!i.expandParent)if(!a)s?.("005",tn.error005());else{const g=a.measured.width,y=a.measured.height;g&&y&&(h=[[u,d],[u+g,d+y]])}else a&&zt(i.extent)&&(h=[[i.extent[0][0]+u,i.extent[0][1]+d],[i.extent[1][0]+u,i.extent[1][1]+d]]);const f=zt(h)?yt(t,h,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&s?.("015",tn.error015()),{position:{x:f.x-u+(i.measured.width??0)*c[0],y:f.y-d+(i.measured.height??0)*c[1]},positionAbsolute:f}}async function ld({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const s=new Set(e.map(f=>f.id)),i=[];for(const f of n){if(f.deletable===!1)continue;const g=s.has(f.id),y=!g&&f.parentId&&i.find(m=>m.id===f.parentId);(g||y)&&i.push(f)}const a=new Set(t.map(f=>f.id)),u=o.filter(f=>f.deletable!==!1),c=id(i,u);for(const f of u)a.has(f.id)&&!c.find(y=>y.id===f.id)&&c.push(f);if(!r)return{edges:c,nodes:i};const h=await r({nodes:i,edges:c});return typeof h=="boolean"?h?{edges:c,nodes:i}:{edges:[],nodes:[]}:h}const It=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),yt=(e={x:0,y:0},t,n)=>({x:It(e.x,t[0][0],t[1][0]-(n?.width??0)),y:It(e.y,t[0][1],t[1][1]-(n?.height??0))});function Ki(e,t,n){const{width:o,height:r}=pt(n),{x:s,y:i}=n.internals.positionAbsolute;return yt(e,[[s,i],[s+o,i+r]],t)}const Pr=(e,t,n)=>e<t?It(Math.abs(e-t),1,t)/t:e>n?-It(Math.abs(e-n),1,t)/t:0,Yi=(e,t,n=15,o=40)=>{const r=Pr(e.x,o,t.width-o)*n,s=Pr(e.y,o,t.height-o)*n;return[r,s]},Jn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Io=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),jn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Tt=(e,t=[0,0])=>{const{x:n,y:o}=Go(e)?e.internals.positionAbsolute:cn(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Rn=(e,t=[0,0])=>{const{x:n,y:o}=Go(e)?e.internals.positionAbsolute:cn(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},cd=(e,t)=>jn(Jn(Io(e),Io(t))),nn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Ar=e=>tt(e.width)&&tt(e.height)&&tt(e.x)&&tt(e.y),tt=e=>!isNaN(e)&&isFinite(e),ud=(e,t)=>{},$n=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),un=({x:e,y:t},[n,o,r],s=!1,i=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return s?$n(a,i):a},Vn=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function _t(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function dd(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=_t(e,n),r=_t(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=_t(e.top??e.y??0,n),r=_t(e.bottom??e.y??0,n),s=_t(e.left??e.x??0,t),i=_t(e.right??e.x??0,t);return{top:o,right:i,bottom:r,left:s,x:s+i,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function fd(e,t,n,o,r,s){const{x:i,y:a}=Vn(e,[t,n,o]),{x:u,y:d}=Vn({x:e.x+e.width,y:e.y+e.height},[t,n,o]),c=r-u,h=s-d;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(h)}}const Qo=(e,t,n,o,r,s)=>{const i=dd(s,t,n),a=(t-i.x)/e.width,u=(n-i.y)/e.height,d=Math.min(a,u),c=It(d,o,r),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*c,y=n/2-f*c,m=fd(e,g,y,c,t,n),k={left:Math.min(m.left-i.left,0),top:Math.min(m.top-i.top,0),right:Math.min(m.right-i.right,0),bottom:Math.min(m.bottom-i.bottom,0)};return{x:g-k.left+k.right,y:y-k.top+k.bottom,zoom:c}},Ln=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function zt(e){return e!==void 0&&e!=="parent"}function pt(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function hd(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function gd(e,t={width:0,height:0},n,o,r){const s={...e},i=o.get(n);if(i){const a=i.origin||r;s.x+=i.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=i.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function vd(e){return{...ed,...e||{}}}function go(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:s,y:i}=Xe(e),a=un({x:s-(r?.left??0),y:i-(r?.top??0)},o),{x:u,y:d}=n?$n(a,t):a;return{xSnapped:u,ySnapped:d,...a}}const Fi=e=>({width:e.offsetWidth,height:e.offsetHeight}),Xi=e=>e?.getRootNode?.()||window?.document,yd=["INPUT","SELECT","TEXTAREA"];function Zi(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:yd.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Wi=e=>"clientX"in e,Xe=(e,t)=>{const n=Wi(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Mr=(e,t,n,o,r)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:r,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Fi(i)}})};function md({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const u=e*.125+r*.375+i*.375+n*.125,d=t*.125+s*.375+a*.375+o*.125,c=Math.abs(u-e),h=Math.abs(d-t);return[u,d,c,h]}function mn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Dr({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){switch(e){case j.Left:return[t-mn(t-o,s),n];case j.Right:return[t+mn(o-t,s),n];case j.Top:return[t,n-mn(n-r,s)];case j.Bottom:return[t,n+mn(r-n,s)]}}function qi({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:s=j.Top,curvature:i=.25}){const[a,u]=Dr({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[d,c]=Dr({pos:s,x1:o,y1:r,x2:e,y2:t,c:i}),[h,f,g,y]=md({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:u,targetControlX:d,targetControlY:c});return[`M${e},${t} C${a},${u} ${d},${c} ${o},${r}`,h,f,g,y]}function Gi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[s,a,r,i]}function pd({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:r=!1}){if(o!==void 0)return o;const s=r&&n?1e3:0,i=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+i}function wd({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const s=Jn(Rn(e),Rn(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return nn(i,jn(s))>0}const _d=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,xd=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),bd=(e,t)=>{if(!e.source||!e.target)return t;let n;return Li(e)?n={...e}:n={...e,id:_d(e)},xd(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Ui({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,s,i,a]=Gi({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,s,i,a]}const Ir={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}},kd=({source:e,sourcePosition:t=j.Bottom,target:n})=>t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Tr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Sd({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:r,offset:s,stepPosition:i}){const a=Ir[t],u=Ir[o],d={x:e.x+a.x*s,y:e.y+a.y*s},c={x:n.x+u.x*s,y:n.y+u.y*s},h=kd({source:d,sourcePosition:t,target:c}),f=h.x!==0?"x":"y",g=h[f];let y=[],m,k;const w={x:0,y:0},z={x:0,y:0},[,,N,S]=Gi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*u[f]===-1){f==="x"?(m=r.x??d.x+(c.x-d.x)*i,k=r.y??(d.y+c.y)/2):(m=r.x??(d.x+c.x)/2,k=r.y??d.y+(c.y-d.y)*i);const E=[{x:m,y:d.y},{x:m,y:c.y}],A=[{x:d.x,y:k},{x:c.x,y:k}];a[f]===g?y=f==="x"?E:A:y=f==="x"?A:E}else{const E=[{x:d.x,y:c.y}],A=[{x:c.x,y:d.y}];if(f==="x"?y=a.x===g?A:E:y=a.y===g?E:A,t===o){const x=Math.abs(e[f]-n[f]);if(x<=s){const C=Math.min(s-1,s-x);a[f]===g?w[f]=(d[f]>e[f]?-1:1)*C:z[f]=(c[f]>n[f]?-1:1)*C}}if(t!==o){const x=f==="x"?"y":"x",C=a[f]===u[x],v=d[x]>c[x],b=d[x]<c[x];(a[f]===1&&(!C&&v||C&&b)||a[f]!==1&&(!C&&b||C&&v))&&(y=f==="x"?E:A)}const L={x:d.x+w.x,y:d.y+w.y},Z={x:c.x+z.x,y:c.y+z.y},J=Math.max(Math.abs(L.x-y[0].x),Math.abs(Z.x-y[0].x)),H=Math.max(Math.abs(L.y-y[0].y),Math.abs(Z.y-y[0].y));J>=H?(m=(L.x+Z.x)/2,k=y[0].y):(m=y[0].x,k=(L.y+Z.y)/2)}return[[e,{x:d.x+w.x,y:d.y+w.y},...y,{x:c.x+z.x,y:c.y+z.y},n],m,k,N,S]}function Ed(e,t,n,o){const r=Math.min(Tr(e,t)/2,Tr(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const d=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+r*d},${i}Q ${s},${i} ${s},${i+r*c}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${i+r*u}Q ${s},${i} ${s+r*a},${i}`}function eo({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:s=j.Top,borderRadius:i=5,centerX:a,centerY:u,offset:d=20,stepPosition:c=.5}){const[h,f,g,y,m]=Sd({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:u},offset:d,stepPosition:c});return[h.reduce((w,z,N)=>{let S="";return N>0&&N<h.length-1?S=Ed(h[N-1],z,h[N+1],i):S=`${N===0?"M":"L"}${z.x} ${z.y}`,w+=S,w},""),f,g,y,m]}function zr(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Cd(e){const{sourceNode:t,targetNode:n}=e;if(!zr(t)||!zr(n))return null;const o=t.internals.handleBounds||Or(t.handles),r=n.internals.handleBounds||Or(n.handles),s=Hr(o?.source??[],e.sourceHandle),i=Hr(e.connectionMode===Dt.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!s||!i)return e.onError?.("008",tn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=s?.position||j.Bottom,u=i?.position||j.Top,d=on(t,s,a),c=on(n,i,u);return{sourceX:d.x,sourceY:d.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:u}}function Or(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function on(e,t,n=j.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:i,height:a}=t??pt(e);if(o)return{x:r+i/2,y:s+a/2};switch(t?.position??n){case j.Top:return{x:r+i/2,y:s};case j.Right:return{x:r+i,y:s+a/2};case j.Bottom:return{x:r+i/2,y:s+a};case j.Left:return{x:r,y:s+a/2}}}function Hr(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function To(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Nd(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const s=new Set;return e.reduce((i,a)=>([a.markerStart||o,a.markerEnd||r].forEach(u=>{if(u&&typeof u=="object"){const d=To(u,t);s.has(d)||(i.push({id:d,color:u.color||n,...u}),s.add(d))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const Jo={nodeOrigin:[0,0],nodeExtent:Mo,elevateNodesOnSelect:!0,defaults:{}},Pd={...Jo,checkEquality:!0};function jo(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Ad(e,t,n){const o=jo(Jo,n);for(const r of e.values())if(r.parentId)$o(r,e,t,o);else{const s=cn(r,o.nodeOrigin),i=zt(r.extent)?r.extent:o.nodeExtent,a=yt(s,i,pt(r));r.internals.positionAbsolute=a}}function Md(e,t,n,o){const r=jo(Pd,o);let s=e.length>0;const i=new Map(t),a=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=i.get(u.id);if(r.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const c=cn(u,r.nodeOrigin),h=zt(u.extent)?u.extent:r.nodeExtent,f=yt(c,h,pt(u));d={...r.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:f,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:Qi(u,a),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&$o(d,t,n,o)}return s}function Dd(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function $o(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:i}=jo(Jo,o),a=e.parentId,u=t.get(a);if(!u){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Dd(e,n);const d=r?1e3:0,{x:c,y:h,z:f}=Id(e,u,s,i,d),{positionAbsolute:g}=e.internals,y=c!==g.x||h!==g.y;(y||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:c,y:h}:g,z:f}})}function Qi(e,t){return(tt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Id(e,t,n,o,r){const{x:s,y:i}=t.internals.positionAbsolute,a=pt(e),u=cn(e,n),d=zt(e.extent)?yt(u,e.extent,a):u;let c=yt({x:s+d.x,y:i+d.y},o,a);e.extent==="parent"&&(c=Ki(c,a,t));const h=Qi(e,r),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>=h?f+1:h}}function Td(e,t,n,o=[0,0]){const r=[],s=new Map;for(const i of e){const a=t.get(i.parentId);if(!a)continue;const u=s.get(i.parentId)?.expandedRect??Tt(a),d=cd(u,i.rect);s.set(i.parentId,{expandedRect:d,parent:a})}return s.size>0&&s.forEach(({expandedRect:i,parent:a},u)=>{const d=a.internals.positionAbsolute,c=pt(a),h=a.origin??o,f=i.x<d.x?Math.round(Math.abs(d.x-i.x)):0,g=i.y<d.y?Math.round(Math.abs(d.y-i.y)):0,y=Math.max(c.width,Math.round(i.width)),m=Math.max(c.height,Math.round(i.height)),k=(y-c.width)*h[0],w=(m-c.height)*h[1];(f>0||g>0||k||w)&&(r.push({id:u,type:"position",position:{x:a.position.x-f+k,y:a.position.y-g+w}}),n.get(u)?.forEach(z=>{e.some(N=>N.id===z.id)||r.push({id:z.id,type:"position",position:{x:z.position.x+f,y:z.position.y+g}})})),(c.width<i.width||c.height<i.height||f||g)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:y+(f?h[0]*f-k:0),height:m+(g?h[1]*g-w:0)}})}),r}function zd(e,t,n,o,r,s){const i=o?.querySelector(".xyflow__viewport");let a=!1;if(!i)return{changes:[],updatedInternals:a};const u=[],d=window.getComputedStyle(i),{m22:c}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const y=Fi(f.nodeElement),m=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(m||!g.internals.handleBounds||f.force))){const w=f.nodeElement.getBoundingClientRect(),z=zt(g.extent)?g.extent:s;let{positionAbsolute:N}=g.internals;g.parentId&&g.extent==="parent"?N=Ki(N,y,t.get(g.parentId)):z&&(N=yt(N,z,y));const S={...g,measured:y,internals:{...g.internals,positionAbsolute:N,handleBounds:{source:Mr("source",f.nodeElement,w,c,g.id),target:Mr("target",f.nodeElement,w,c,g.id)}}};t.set(g.id,S),g.parentId&&$o(S,t,n,{nodeOrigin:r}),a=!0,m&&(u.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:Tt(S,r)}))}}if(h.length>0){const f=Td(h,t,n,r);u.push(...f)}return{changes:u,updatedInternals:a}}async function Od({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,s]],o),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function Rr(e,t,n,o,r,s){let i=r;const a=o.get(i)||new Map;o.set(i,a.set(n,t)),i=`${r}-${e}`;const u=o.get(i)||new Map;if(o.set(i,u.set(n,t)),s){i=`${r}-${e}-${s}`;const d=o.get(i)||new Map;o.set(i,d.set(n,t))}}function Hd(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:s,sourceHandle:i=null,targetHandle:a=null}=o,u={edgeId:o.id,source:r,target:s,sourceHandle:i,targetHandle:a},d=`${r}-${i}--${s}-${a}`,c=`${s}-${a}--${r}-${i}`;Rr("source",u,c,e,r,i),Rr("target",u,d,e,s,a),t.set(o.id,o)}}function Ji(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ji(n,t):!1}function Vr(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function Rd(e,t,n,o){const r=new Map;for(const[s,i]of e)if((i.selected||i.id===o)&&(!i.parentId||!Ji(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const a=e.get(s);a&&r.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function vo({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[i,a]of t){const u=n.get(i)?.internals.userNode;u&&r.push({...u,position:a.position,dragging:o})}if(!e)return[r[0],r];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:o}:r[0],r]}function Vd({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let s={x:null,y:null},i=0,a=new Map,u=!1,d={x:0,y:0},c=null,h=!1,f=null,g=!1,y=!1;function m({noDragClassName:w,handleSelector:z,domNode:N,isSelectable:S,nodeId:M,nodeClickDistance:E=0}){f=He(N);function A({x:H,y:x},C){const{nodeLookup:v,nodeExtent:b,snapGrid:p,snapToGrid:P,nodeOrigin:T,onNodeDrag:D,onSelectionDrag:O,onError:R,updateNodePositions:U}=t();s={x:H,y:x};let W=!1,X={x:0,y:0,x2:0,y2:0};if(a.size>1&&b){const q=Qn(a);X=Io(q)}for(const[q,G]of a){if(!v.has(q))continue;let Q={x:H-G.distance.x,y:x-G.distance.y};P&&(Q=$n(Q,p));let re=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];if(a.size>1&&b&&!G.extent){const{positionAbsolute:fe}=G.internals,ne=fe.x-X.x+b[0][0],ee=fe.x+G.measured.width-X.x2+b[1][0],le=fe.y-X.y+b[0][1],we=fe.y+G.measured.height-X.y2+b[1][1];re=[[ne,le],[ee,we]]}const{position:de,positionAbsolute:ve}=Bi({nodeId:q,nextPosition:Q,nodeLookup:v,nodeExtent:re,nodeOrigin:T,onError:R});W=W||G.position.x!==de.x||G.position.y!==de.y,G.position=de,G.internals.positionAbsolute=ve}if(y=y||W,!!W&&(U(a,!0),C&&(o||D||!M&&O))){const[q,G]=vo({nodeId:M,dragItems:a,nodeLookup:v});o?.(C,a,q,G),D?.(C,q,G),M||O?.(C,G)}}async function L(){if(!c)return;const{transform:H,panBy:x,autoPanSpeed:C,autoPanOnNodeDrag:v}=t();if(!v){u=!1,cancelAnimationFrame(i);return}const[b,p]=Yi(d,c,C);(b!==0||p!==0)&&(s.x=(s.x??0)-b/H[2],s.y=(s.y??0)-p/H[2],await x({x:b,y:p})&&A(s,null)),i=requestAnimationFrame(L)}function Z(H){const{nodeLookup:x,multiSelectionActive:C,nodesDraggable:v,transform:b,snapGrid:p,snapToGrid:P,selectNodesOnDrag:T,onNodeDragStart:D,onSelectionDragStart:O,unselectNodesAndEdges:R}=t();h=!0,(!T||!S)&&!C&&M&&(x.get(M)?.selected||R()),S&&T&&M&&e?.(M);const U=go(H.sourceEvent,{transform:b,snapGrid:p,snapToGrid:P,containerBounds:c});if(s=U,a=Rd(x,v,U,M),a.size>0&&(n||D||!M&&O)){const[W,X]=vo({nodeId:M,dragItems:a,nodeLookup:x});n?.(H.sourceEvent,a,W,X),D?.(H.sourceEvent,W,X),M||O?.(H.sourceEvent,X)}}const J=sc().clickDistance(E).on("start",H=>{const{domNode:x,nodeDragThreshold:C,transform:v,snapGrid:b,snapToGrid:p}=t();c=x?.getBoundingClientRect()||null,g=!1,y=!1,C===0&&Z(H),s=go(H.sourceEvent,{transform:v,snapGrid:b,snapToGrid:p,containerBounds:c}),d=Xe(H.sourceEvent,c)}).on("drag",H=>{const{autoPanOnNodeDrag:x,transform:C,snapGrid:v,snapToGrid:b,nodeDragThreshold:p,nodeLookup:P}=t(),T=go(H.sourceEvent,{transform:C,snapGrid:v,snapToGrid:b,containerBounds:c});if((H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||M&&!P.has(M))&&(g=!0),!g){if(!u&&x&&h&&(u=!0,L()),!h){const D=T.xSnapped-(s.x??0),O=T.ySnapped-(s.y??0);Math.sqrt(D*D+O*O)>p&&Z(H)}(s.x!==T.xSnapped||s.y!==T.ySnapped)&&a&&h&&(d=Xe(H.sourceEvent,c),A(T,H.sourceEvent))}}).on("end",H=>{if(!(!h||g)&&(u=!1,h=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:x,updateNodePositions:C,onNodeDragStop:v,onSelectionDragStop:b}=t();if(y&&(C(a,!1),y=!1),r||v||!M&&b){const[p,P]=vo({nodeId:M,dragItems:a,nodeLookup:x,dragging:!1});r?.(H.sourceEvent,a,p,P),v?.(H.sourceEvent,p,P),M||b?.(H.sourceEvent,P)}}}).filter(H=>{const x=H.target;return!H.button&&(!w||!Vr(x,`.${w}`,N))&&(!z||Vr(x,z,N))});f.call(J)}function k(){f?.on(".drag",null)}return{update:m,destroy:k}}function Ld(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())nn(r,Tt(s))>0&&o.push(s);return o}const Bd=250;function Kd(e,t,n,o){let r=[],s=1/0;const i=Ld(e,n,t+Bd);for(const a of i){const u=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const d of u){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:c,y:h}=on(a,d,d.position,!0),f=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(h-e.y,2));f>t||(f<s?(r=[{...d,x:c,y:h}],s=f):f===s&&r.push({...d,x:c,y:h}))}}if(!r.length)return null;if(r.length>1){const a=o.type==="source"?"target":"source";return r.find(u=>u.type===a)??r[0]}return r[0]}function ji(e,t,n,o,r,s=!1){const i=o.get(e);if(!i)return null;const a=r==="strict"?i.internals.handleBounds?.[t]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],u=(n?a?.find(d=>d.id===n):a?.[0])??null;return u&&s?{...u,...on(i,u,u.position,!0)}:u}function $i(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Yd(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const es=()=>!0;function Fd(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:s,isTarget:i,domNode:a,nodeLookup:u,lib:d,autoPanOnConnect:c,flowId:h,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:m,onConnectEnd:k,isValidConnection:w=es,onReconnectEnd:z,updateConnection:N,getTransform:S,getFromHandle:M,autoPanSpeed:E,dragThreshold:A=1}){const L=Xi(e.target);let Z=0,J;const{x:H,y:x}=Xe(e),C=L?.elementFromPoint(H,x),v=$i(s,C),b=a?.getBoundingClientRect();let p=!1;if(!b||!v)return;const P=ji(r,v,o,u,t);if(!P)return;let T=Xe(e,b),D=!1,O=null,R=!1,U=null;function W(){if(!c||!b)return;const[fe,ne]=Yi(T,b,E);f({x:fe,y:ne}),Z=requestAnimationFrame(W)}const X={...P,nodeId:r,type:v,position:P.position},q=u.get(r);let Q={inProgress:!0,isValid:null,from:on(q,X,j.Left,!0),fromHandle:X,fromPosition:X.position,fromNode:q,to:T,toHandle:null,toPosition:Cr[X.position],toNode:null};function re(){p=!0,N(Q),y?.(e,{nodeId:r,handleId:o,handleType:v})}A===0&&re();function de(fe){if(!p){const{x:we,y:Me}=Xe(fe),pe=we-H,te=Me-x;if(!(pe*pe+te*te>A*A))return;re()}if(!M()||!X){ve(fe);return}const ne=S();T=Xe(fe,b),J=Kd(un(T,ne,!1,[1,1]),n,u,X),D||(W(),D=!0);const ee=ts(fe,{handle:J,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:i?"target":"source",isValidConnection:w,doc:L,lib:d,flowId:h,nodeLookup:u});U=ee.handleDomNode,O=ee.connection,R=Yd(!!J,ee.isValid);const le={...Q,isValid:R,to:ee.toHandle&&R?Vn({x:ee.toHandle.x,y:ee.toHandle.y},ne):T,toHandle:ee.toHandle,toPosition:R&&ee.toHandle?ee.toHandle.position:Cr[X.position],toNode:ee.toHandle?u.get(ee.toHandle.nodeId):null};R&&J&&Q.toHandle&&le.toHandle&&Q.toHandle.type===le.toHandle.type&&Q.toHandle.nodeId===le.toHandle.nodeId&&Q.toHandle.id===le.toHandle.id&&Q.to.x===le.to.x&&Q.to.y===le.to.y||(N(le),Q=le)}function ve(fe){if(p){(J||U)&&O&&R&&m?.(O);const{inProgress:ne,...ee}=Q,le={...ee,toPosition:Q.toHandle?Q.toPosition:null};k?.(fe,le),s&&z?.(fe,le)}g(),cancelAnimationFrame(Z),D=!1,R=!1,O=null,U=null,L.removeEventListener("mousemove",de),L.removeEventListener("mouseup",ve),L.removeEventListener("touchmove",de),L.removeEventListener("touchend",ve)}L.addEventListener("mousemove",de),L.addEventListener("mouseup",ve),L.addEventListener("touchmove",de),L.addEventListener("touchend",ve)}function ts(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:s,doc:i,lib:a,flowId:u,isValidConnection:d=es,nodeLookup:c}){const h=s==="target",f=t?i.querySelector(`.${a}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y}=Xe(e),m=i.elementFromPoint(g,y),k=m?.classList.contains(`${a}-flow__handle`)?m:f,w={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const z=$i(void 0,k),N=k.getAttribute("data-nodeid"),S=k.getAttribute("data-handleid"),M=k.classList.contains("connectable"),E=k.classList.contains("connectableend");if(!N||!z)return w;const A={source:h?N:o,sourceHandle:h?S:r,target:h?o:N,targetHandle:h?r:S};w.connection=A;const Z=M&&E&&(n===Dt.Strict?h&&z==="source"||!h&&z==="target":N!==o||S!==r);w.isValid=Z&&d(A),w.toHandle=ji(N,z,S,c,n,!0)}return w}const Lr={onPointerDown:Fd,isValid:ts},Xd=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,to=e=>({x:e.x,y:e.y,zoom:e.k}),yo=({x:e,y:t,zoom:n})=>Un.translate(e,t).scale(n),St=(e,t)=>e.target.closest(`.${t}`),ns=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Zd=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,mo=(e,t=0,n=Zd,o=()=>{})=>{const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},os=e=>{const t=e.ctrlKey&&Ln()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Wd({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:d}){return c=>{if(St(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(c.ctrlKey&&i){const k=Ye(c),w=os(c),z=h*Math.pow(2,w);o.scaleTo(n,z,k,c);return}const f=c.deltaMode===1?20:1;let g=r===at.Vertical?0:c.deltaX*f,y=r===at.Horizontal?0:c.deltaY*f;!Ln()&&c.shiftKey&&r!==at.Vertical&&(g=c.deltaY*f,y=0),o.translateBy(n,-(g/h)*s,-(y/h)*s,{internal:!0});const m=to(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(c,m)),e.isPanScrolling&&(u?.(c,m),e.panScrollTimeout=setTimeout(()=>{d?.(c,m),e.isPanScrolling=!1},150))}}function qd({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const s=o.type==="wheel",i=!t&&s&&!o.ctrlKey,a=St(o,e);if(o.ctrlKey&&s&&a&&o.preventDefault(),i||a)return null;o.preventDefault(),n.call(this,o,r)}}function Gd({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=to(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,o.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(o.sourceEvent,r)}}function Ud({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return s=>{e.usedRightMouseButton=!!(n&&ns(t,e.mouseButton??0)),s.sourceEvent?.sync||o([s.transform.x,s.transform.y,s.transform.k]),r&&!s.sourceEvent?.internal&&r?.(s.sourceEvent,to(s.transform))}}function Qd({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:s}){return i=>{if(!i.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&ns(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Xd(e.prevViewport,i.transform))){const a=to(i.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r?.(i.sourceEvent,a)},n?150:0)}}}function Jd({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:a,noPanClassName:u,lib:d}){return c=>{const h=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(St(c,`${d}-flow__node`)||St(c,`${d}-flow__edge`)))return!0;if(!o&&!h&&!r&&!s&&!n||i||St(c,a)&&c.type==="wheel"||St(c,u)&&(c.type!=="wheel"||r&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&c.touches?.length>1)return c.preventDefault(),!1;if(!h&&!r&&!f&&c.type==="wheel"||!o&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(o)&&!o.includes(c.button)&&c.type==="mousedown")return!1;const g=Array.isArray(o)&&o.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&g}}function jd({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:s,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:u,onDraggingChange:d}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=$u().clickDistance(!tt(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),g=He(e).call(f);N({x:s.x,y:s.y,zoom:It(s.zoom,t,n)},[[0,0],[h.width,h.height]],r);const y=g.on("wheel.zoom"),m=g.on("dblclick.zoom");f.wheelDelta(os);function k(x,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Wt:xn).transform(mo(g,C?.duration,C?.ease,()=>v(!0)),x)}):Promise.resolve(!1)}function w({noWheelClassName:x,noPanClassName:C,onPaneContextMenu:v,userSelectionActive:b,panOnScroll:p,panOnDrag:P,panOnScrollMode:T,panOnScrollSpeed:D,preventScrolling:O,zoomOnPinch:R,zoomOnScroll:U,zoomOnDoubleClick:W,zoomActivationKeyPressed:X,lib:q,onTransformChange:G}){b&&!c.isZoomingOrPanning&&z();const re=p&&!X&&!b?Wd({zoomPanValues:c,noWheelClassName:x,d3Selection:g,d3Zoom:f,panOnScrollMode:T,panOnScrollSpeed:D,zoomOnPinch:R,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:u}):qd({noWheelClassName:x,preventScrolling:O,d3ZoomHandler:y});if(g.on("wheel.zoom",re,{passive:!1}),!b){const ve=Gd({zoomPanValues:c,onDraggingChange:d,onPanZoomStart:a});f.on("start",ve);const fe=Ud({zoomPanValues:c,panOnDrag:P,onPaneContextMenu:!!v,onPanZoom:i,onTransformChange:G});f.on("zoom",fe);const ne=Qd({zoomPanValues:c,panOnDrag:P,panOnScroll:p,onPaneContextMenu:v,onPanZoomEnd:u,onDraggingChange:d});f.on("end",ne)}const de=Jd({zoomActivationKeyPressed:X,panOnDrag:P,zoomOnScroll:U,panOnScroll:p,zoomOnDoubleClick:W,zoomOnPinch:R,userSelectionActive:b,noPanClassName:C,noWheelClassName:x,lib:q});f.filter(de),W?g.on("dblclick.zoom",m):g.on("dblclick.zoom",null)}function z(){f.on("zoom",null)}async function N(x,C,v){const b=yo(x),p=f?.constrain()(b,C,v);return p&&await k(p),new Promise(P=>P(p))}async function S(x,C){const v=yo(x);return await k(v,C),new Promise(b=>b(v))}function M(x){if(g){const C=yo(x),v=g.property("__zoom");(v.k!==x.zoom||v.x!==x.x||v.y!==x.y)&&f?.transform(g,C,null,{sync:!0})}}function E(){const x=g?Ri(g.node()):{x:0,y:0,k:1};return{x:x.x,y:x.y,zoom:x.k}}function A(x,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Wt:xn).scaleTo(mo(g,C?.duration,C?.ease,()=>v(!0)),x)}):Promise.resolve(!1)}function L(x,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Wt:xn).scaleBy(mo(g,C?.duration,C?.ease,()=>v(!0)),x)}):Promise.resolve(!1)}function Z(x){f?.scaleExtent(x)}function J(x){f?.translateExtent(x)}function H(x){const C=!tt(x)||x<0?0:x;f?.clickDistance(C)}return{update:w,destroy:z,setViewport:S,setViewportConstrained:N,getViewport:E,scaleTo:A,scaleBy:L,setScaleExtent:Z,setTranslateExtent:J,syncViewport:M,setClickDistance:H}}var Br;(function(e){e.Line="line",e.Handle="handle"})(Br||(Br={}));var $d=$("<div><!></div>");function nt(e,t){ie(t,!0);let n=Y(t,"id",3,null),o=Y(t,"type",3,"source"),r=Y(t,"position",19,()=>j.Top),s=Y(t,"isConnectableStart",3,!0),i=Y(t,"isConnectableEnd",3,!0),a=mt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=Qt("svelteflow__node_id"),d=Qt("svelteflow__node_connectable");let c=_(()=>o()==="target"),h=_(()=>t.isConnectable!==void 0?t.isConnectable:d.value),f=wt(),g=_(()=>f.ariaLabelConfig),y=null;Fs(()=>{if(t.onconnect||t.ondisconnect){f.edges;let x=f.connectionLookup.get(`${u}-${o()}${n()?`-${n()}`:""}`);if(y&&!td(x,y)){const C=x??new Map;Nr(y,C,t.ondisconnect),Nr(C,y,t.onconnect)}y=new Map(x)}});let m=_(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:x,toHandle:C,isValid:v}=f.connection,b=x&&x.nodeId===u&&x.type===o()&&x.id===n(),p=C&&C.nodeId===u&&C.type===o()&&C.id===n(),P=f.connectionMode===Dt.Strict?x?.type!==o():u!==x?.nodeId||n()!==x?.id;return[!0,b,p,P,p&&v]}),k=_(()=>Ht(l(m),5)),w=_(()=>l(k)[0]),z=_(()=>l(k)[1]),N=_(()=>l(k)[2]),S=_(()=>l(k)[3]),M=_(()=>l(k)[4]);function E(x){const C=f.onbeforeconnect?.(x)??x;C&&(f.addEdge(C),f.onconnect?.(x))}function A(x){const C=Wi(x);(C&&x.button===0||!C)&&Lr.onPointerDown(x,{handleId:n(),nodeId:u,isTarget:l(c),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:E,onConnectStart:(v,b)=>{f.onconnectstart?.(v,{nodeId:b.nodeId,handleId:b.handleId,handleType:b.handleType})},onConnectEnd:(v,b)=>{f.onconnectend?.(v,b)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold})}function L(x){if(!u||!f.clickConnectStartHandle&&!s())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(x,{nodeId:u,handleId:n(),handleType:o()}),f.clickConnectStartHandle={nodeId:u,type:o(),id:n()};return}const C=Xi(x.target),v=t.isValidConnection??f.isValidConnection,{connectionMode:b,clickConnectStartHandle:p,flowId:P,nodeLookup:T}=f,{connection:D,isValid:O}=Lr.isValid(x,{handle:{nodeId:u,id:n(),type:o()},connectionMode:b,fromNodeId:p.nodeId,fromHandleId:p.id??null,fromType:p.type,isValidConnection:v,flowId:P,doc:C,lib:"svelte",nodeLookup:T});O&&D&&E(D);const R=structuredClone(Lo(f.connection));delete R.inProgress,R.toPosition=R.toHandle?R.toHandle.position:null,f.onclickconnectend?.(x,R),f.clickConnectStartHandle=null}var Z=$d(),J=()=>{};ct(Z,x=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":r(),"data-id":`${f.flowId??""}-${u??""}-${n()??"null"??""}-${o()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${r()}`,f.noDragClass,f.noPanClass,r(),t.class],onmousedown:A,ontouchstart:A,onclick:f.clickConnect?L:void 0,onkeypress:J,style:t.style,role:"button","aria-label":l(g)["handle.ariaLabel"],tabindex:"-1",...a,[it]:x}),[()=>({valid:l(M),connectingto:l(N),connectingfrom:l(z),source:!l(c),target:l(c),connectablestart:s(),connectableend:i(),connectable:l(h),connectionindicator:l(h)&&(!l(w)||l(S))&&(l(w)||f.clickConnectStartHandle?i():s())})]);var H=F(Z);ze(H,()=>t.children??Ot),K(Z),V(e,Z),se()}var ef=$("<!> <!>",1);function rs(e,t){ie(t,!0);let n=Y(t,"targetPosition",19,()=>j.Top),o=Y(t,"sourcePosition",19,()=>j.Bottom);var r=ef(),s=ae(r);nt(s,{type:"target",get position(){return n()}});var i=B(s),a=B(i);nt(a,{type:"source",get position(){return o()}}),ce(()=>ye(i,` ${t.data?.label??""} `)),V(e,r),se()}var tf=$(" <!>",1);function nf(e,t){ie(t,!0);let n=Y(t,"data",19,()=>({label:"Node"})),o=Y(t,"sourcePosition",19,()=>j.Bottom);Xn();var r=tf(),s=ae(r),i=B(s);nt(i,{type:"source",get position(){return o()}}),ce(()=>ye(s,`${n()?.label??""} `)),V(e,r),se()}var of=$(" <!>",1);function rf(e,t){ie(t,!0);let n=Y(t,"data",19,()=>({label:"Node"})),o=Y(t,"targetPosition",19,()=>j.Top);Xn();var r=of(),s=ae(r),i=B(s);nt(i,{type:"target",get position(){return o()}}),ce(()=>ye(s,`${n()?.label??""} `)),V(e,r),se()}function sf(e,t){}function po(e,t,n){if(!n||!t)return;const o=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);o&&o.appendChild(e)}function af(e,t){const n=_(wt),o=_(()=>l(n).domNode);let r;return l(o)?po(e,l(o),t):r=ti(()=>{ht(()=>{po(e,l(o),t),r?.()})}),{async update(s){po(e,l(o),s)},destroy(){e.parentNode&&e.parentNode.removeChild(e),r?.()}}}function lf(){let e=ge(typeof window>"u");if(l(e)){const t=ti(()=>{ht(()=>{I(e,!1),t?.()})})}return{get value(){return l(e)}}}const Kr=e=>od(e),cf=e=>Li(e);function qe(e){return e===void 0?void 0:`${e}px`}const Bn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var uf=$("<div><!></div>");function df(e,t){ie(t,!0);let n=Y(t,"x",3,0),o=Y(t,"y",3,0),r=Y(t,"selectEdgeOnClick",3,!1),s=Y(t,"transparent",3,!1),i=mt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=wt(),u=Qt("svelteflow__edge_id");let d=_(()=>a.visible.edges.get(u)?.zIndex);var c=uf(),h=()=>{r()&&u&&a.handleEdgeSelection(u)};ct(c,g=>({class:["svelte-flow__edge-label",{transparent:s()},t.class],tabindex:"-1",onclick:h,...i,[Je]:g}),[()=>({display:lf().value?"none":void 0,cursor:r()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${o()??""}px)`,"pointer-events":"all",width:qe(t.width),height:qe(t.height),"z-index":l(d)})],void 0,"svelte-w2n27y");var f=F(c);ze(f,()=>t.children??Ot),K(c),Ee(c,(g,y)=>af?.(g,y),()=>"edge-labels"),V(e,c),se()}var ff=_e("<path></path>"),hf=_e('<path fill="none"></path><!><!>',1);function dn(e,t){let n=Y(t,"interactionWidth",3,20),o=mt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var r=hf(),s=ae(r),i=B(s);{var a=c=>{var h=ff();ct(h,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...o})),V(c,h)};ue(i,c=>{n()>0&&c(a)})}var u=B(i);{var d=c=>{df(c,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{Xn();var g=Xs();ce(()=>ye(g,t.label)),V(h,g)},$$slots:{default:!0}})};ue(u,c=>{t.label&&c(d)})}ce(()=>{oe(s,"id",t.id),oe(s,"d",t.path),Oe(s,0,Ve(["svelte-flow__edge-path",t.class])),oe(s,"marker-start",t.markerStart),oe(s,"marker-end",t.markerEnd),We(s,t.style)}),V(e,r)}function is(e,t){ie(t,!0);let n=_(()=>qi({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.pathOptions?.curvature})),o=_(()=>Ht(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get id(){return t.id},get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}function gf(e,t){ie(t,!0);let n=_(()=>eo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),o=_(()=>Ht(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}function vf(e,t){ie(t,!0);let n=_(()=>Ui({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),o=_(()=>Ht(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}function yf(e,t){ie(t,!0);let n=_(()=>eo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),o=_(()=>Ht(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}class mf{#e;#t;constructor(t,n){this.#e=t,this.#t=$s(n)}get current(){return this.#t(),this.#e()}}const pf=/\(.+\)/,wf=new Set(["all","print","screen","and","or","not","only"]);class _f extends mf{constructor(t,n){let o=pf.test(t)||t.split(/[\s,]+/).some(s=>wf.has(s.trim()))?t:`(${t})`;const r=window.matchMedia(o);super(()=>r.matches,s=>_o(r,"change",s))}}function xf(e,t,n,o){const r=new Map;return Uo(e,{x:0,y:0,width:n,height:o},t,!0).forEach(s=>{r.set(s.id,s)}),r}function Yr(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:o,previousEdges:r,connectionMode:s,onerror:i,onlyRenderVisible:a,elevateEdgesOnSelect:u}=e,d=new Map;for(const c of t){const h=o.get(c.source),f=o.get(c.target);if(!h||!f)continue;if(a){const{visibleNodes:m,transform:k,width:w,height:z}=e;if(wd({sourceNode:h,targetNode:f,width:w,height:z,transform:k}))m.set(h.id,h),m.set(f.id,f);else continue}const g=r.get(c.id);if(g&&c===g.edge&&h==g.sourceNode&&f==g.targetNode){d.set(c.id,g);continue}const y=Cd({id:c.id,sourceNode:h,targetNode:f,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:s,onError:i});y&&d.set(c.id,{...n,...c,...y,zIndex:pd({selected:c.selected,zIndex:c.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:u}),sourceNode:h,targetNode:f,edge:c})}return d}const ss={input:nf,output:rf,default:rs,group:sf},as={straight:vf,smoothstep:gf,default:is,step:yf};function bf(e,t,n,o,r,s){if(t&&!n&&o&&r){const i=Qn(s,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Qo(i,o,r,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function kf(e){class t{#e=_(()=>e.props.id??"1");get flowId(){return l(this.#e)}set flowId(o){I(this.#e,o)}#t=ge(null);get domNode(){return l(this.#t)}set domNode(o){I(this.#t,o)}#n=ge(null);get panZoom(){return l(this.#n)}set panZoom(o){I(this.#n,o)}#o=ge(e.width??0);get width(){return l(this.#o)}set width(o){I(this.#o,o)}#r=ge(e.height??0);get height(){return l(this.#r)}set height(o){I(this.#r,o)}#i=_(()=>{const o=Md(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&o&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),o});get nodesInitialized(){return l(this.#i)}set nodesInitialized(o){I(this.#i,o)}#s=_(()=>this.panZoom!==null);get viewportInitialized(){return l(this.#s)}set viewportInitialized(o){I(this.#s,o)}#a=_(()=>(Hd(this.connectionLookup,this.edgeLookup,e.edges),e.edges));get _edges(){return l(this.#a)}set _edges(o){I(this.#a,o)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(o){e.nodes=o}get edges(){return this._edges}set edges(o){e.edges=o}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#l=_(()=>{const o=this._prevSelectedNodeIds.size,r=new Set,s=this.nodes.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedNodeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=s),this._prevSelectedNodeIds=r,this._prevSelectedNodes});get selectedNodes(){return l(this.#l)}set selectedNodes(o){I(this.#l,o)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#c=_(()=>{const o=this._prevSelectedEdgeIds.size,r=new Set,s=this.edges.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedEdgeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=s),this._prevSelectedEdgeIds=r,this._prevSelectedEdges});get selectedEdges(){return l(this.#c)}set selectedEdges(o){I(this.#c,o)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=_(()=>{const{nodes:o,_edges:r,_prevVisibleEdges:s,nodeLookup:i,connectionMode:a,onerror:u,onlyRenderVisibleElements:d,defaultEdgeOptions:c}=this;let h,f;const g={edges:r,defaultEdgeOptions:c,previousEdges:s,nodeLookup:i,connectionMode:a,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:u};if(d){const{viewport:y,width:m,height:k}=this,w=[y.x,y.y,y.zoom];h=xf(i,w,m,k),f=Yr({...g,onlyRenderVisible:!0,visibleNodes:h,transform:w,width:m,height:k})}else h=this.nodeLookup,f=Yr(g);return{nodes:h,edges:f}});get visible(){return l(this.#u)}set visible(o){I(this.#u,o)}#d=_(()=>e.props.nodesDraggable??!0);get nodesDraggable(){return l(this.#d)}set nodesDraggable(o){I(this.#d,o)}#f=_(()=>e.props.nodesConnectable??!0);get nodesConnectable(){return l(this.#f)}set nodesConnectable(o){I(this.#f,o)}#h=_(()=>e.props.elementsSelectable??!0);get elementsSelectable(){return l(this.#h)}set elementsSelectable(o){I(this.#h,o)}#g=_(()=>e.props.nodesFocusable??!0);get nodesFocusable(){return l(this.#g)}set nodesFocusable(o){I(this.#g,o)}#v=_(()=>e.props.edgesFocusable??!0);get edgesFocusable(){return l(this.#v)}set edgesFocusable(o){I(this.#v,o)}#y=_(()=>e.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return l(this.#y)}set disableKeyboardA11y(o){I(this.#y,o)}#m=_(()=>e.props.minZoom??.5);get minZoom(){return l(this.#m)}set minZoom(o){I(this.#m,o)}#p=_(()=>e.props.maxZoom??2);get maxZoom(){return l(this.#p)}set maxZoom(o){I(this.#p,o)}#w=_(()=>e.props.nodeOrigin??[0,0]);get nodeOrigin(){return l(this.#w)}set nodeOrigin(o){I(this.#w,o)}#_=_(()=>e.props.nodeExtent??Mo);get nodeExtent(){return l(this.#_)}set nodeExtent(o){I(this.#_,o)}#x=_(()=>e.props.translateExtent??Mo);get translateExtent(){return l(this.#x)}set translateExtent(o){I(this.#x,o)}#b=_(()=>e.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return l(this.#b)}set defaultEdgeOptions(o){I(this.#b,o)}#k=_(()=>e.props.nodeDragThreshold??1);get nodeDragThreshold(){return l(this.#k)}set nodeDragThreshold(o){I(this.#k,o)}#S=_(()=>e.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return l(this.#S)}set autoPanOnNodeDrag(o){I(this.#S,o)}#E=_(()=>e.props.autoPanOnConnect??!0);get autoPanOnConnect(){return l(this.#E)}set autoPanOnConnect(o){I(this.#E,o)}#C=_(()=>e.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return l(this.#C)}set autoPanOnNodeFocus(o){I(this.#C,o)}#N=_(()=>e.props.connectionDragThreshold??1);get connectionDragThreshold(){return l(this.#N)}set connectionDragThreshold(o){I(this.#N,o)}fitViewQueued=e.props.fitView??!1;fitViewOptions=e.props.fitViewOptions;fitViewResolver=null;#P=_(()=>e.props.snapGrid??null);get snapGrid(){return l(this.#P)}set snapGrid(o){I(this.#P,o)}#A=ge(!1);get dragging(){return l(this.#A)}set dragging(o){I(this.#A,o)}#M=ge(null);get selectionRect(){return l(this.#M)}set selectionRect(o){I(this.#M,o)}#D=ge(!1);get selectionKeyPressed(){return l(this.#D)}set selectionKeyPressed(o){I(this.#D,o)}#I=ge(!1);get multiselectionKeyPressed(){return l(this.#I)}set multiselectionKeyPressed(o){I(this.#I,o)}#T=ge(!1);get deleteKeyPressed(){return l(this.#T)}set deleteKeyPressed(o){I(this.#T,o)}#z=ge(!1);get panActivationKeyPressed(){return l(this.#z)}set panActivationKeyPressed(o){I(this.#z,o)}#O=ge(!1);get zoomActivationKeyPressed(){return l(this.#O)}set zoomActivationKeyPressed(o){I(this.#O,o)}#H=ge(null);get selectionRectMode(){return l(this.#H)}set selectionRectMode(o){I(this.#H,o)}#R=ge("");get ariaLiveMessage(){return l(this.#R)}set ariaLiveMessage(o){I(this.#R,o)}#V=_(()=>e.props.selectionMode??On.Partial);get selectionMode(){return l(this.#V)}set selectionMode(o){I(this.#V,o)}#L=_(()=>({...ss,...e.props.nodeTypes}));get nodeTypes(){return l(this.#L)}set nodeTypes(o){I(this.#L,o)}#B=_(()=>({...as,...e.props.edgeTypes}));get edgeTypes(){return l(this.#B)}set edgeTypes(o){I(this.#B,o)}#K=_(()=>e.props.noPanClass??"nopan");get noPanClass(){return l(this.#K)}set noPanClass(o){I(this.#K,o)}#Y=_(()=>e.props.noDragClass??"nodrag");get noDragClass(){return l(this.#Y)}set noDragClass(o){I(this.#Y,o)}#F=_(()=>e.props.noWheelClass??"nowheel");get noWheelClass(){return l(this.#F)}set noWheelClass(o){I(this.#F,o)}#X=_(()=>vd(e.props.ariaLabelConfig));get ariaLabelConfig(){return l(this.#X)}set ariaLabelConfig(o){I(this.#X,o)}#Z=ge(bf(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return l(this.#Z)}set _viewport(o){I(this.#Z,o)}get viewport(){return e.viewport??this._viewport}set viewport(o){e.viewport&&(e.viewport=o),this._viewport=o}#W=ge(Do);get _connection(){return l(this.#W)}set _connection(o){I(this.#W,o)}#q=_(()=>this._connection.inProgress?{...this._connection,to:un(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return l(this.#q)}set connection(o){I(this.#q,o)}#G=_(()=>e.props.connectionMode??Dt.Strict);get connectionMode(){return l(this.#G)}set connectionMode(o){I(this.#G,o)}#U=_(()=>e.props.connectionRadius??20);get connectionRadius(){return l(this.#U)}set connectionRadius(o){I(this.#U,o)}#Q=_(()=>e.props.isValidConnection??(()=>!0));get isValidConnection(){return l(this.#Q)}set isValidConnection(o){I(this.#Q,o)}#J=_(()=>e.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return l(this.#J)}set selectNodesOnDrag(o){I(this.#J,o)}#j=_(()=>e.props.defaultMarkerColor??"#b1b1b7");get defaultMarkerColor(){return l(this.#j)}set defaultMarkerColor(o){I(this.#j,o)}#$=_(()=>Nd(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return l(this.#$)}set markers(o){I(this.#$,o)}#ee=_(()=>e.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return l(this.#ee)}set onlyRenderVisibleElements(o){I(this.#ee,o)}#te=_(()=>e.props.onflowerror??ud);get onerror(){return l(this.#te)}set onerror(o){I(this.#te,o)}#ne=_(()=>e.props.ondelete);get ondelete(){return l(this.#ne)}set ondelete(o){I(this.#ne,o)}#oe=_(()=>e.props.onbeforedelete);get onbeforedelete(){return l(this.#oe)}set onbeforedelete(o){I(this.#oe,o)}#re=_(()=>e.props.onbeforeconnect);get onbeforeconnect(){return l(this.#re)}set onbeforeconnect(o){I(this.#re,o)}#ie=_(()=>e.props.onconnect);get onconnect(){return l(this.#ie)}set onconnect(o){I(this.#ie,o)}#se=_(()=>e.props.onconnectstart);get onconnectstart(){return l(this.#se)}set onconnectstart(o){I(this.#se,o)}#ae=_(()=>e.props.onconnectend);get onconnectend(){return l(this.#ae)}set onconnectend(o){I(this.#ae,o)}#le=_(()=>e.props.onbeforereconnect);get onbeforereconnect(){return l(this.#le)}set onbeforereconnect(o){I(this.#le,o)}#ce=_(()=>e.props.onreconnect);get onreconnect(){return l(this.#ce)}set onreconnect(o){I(this.#ce,o)}#ue=_(()=>e.props.onreconnectstart);get onreconnectstart(){return l(this.#ue)}set onreconnectstart(o){I(this.#ue,o)}#de=_(()=>e.props.onreconnectend);get onreconnectend(){return l(this.#de)}set onreconnectend(o){I(this.#de,o)}#fe=_(()=>e.props.clickConnect??!0);get clickConnect(){return l(this.#fe)}set clickConnect(o){I(this.#fe,o)}#he=_(()=>e.props.onclickconnectstart);get onclickconnectstart(){return l(this.#he)}set onclickconnectstart(o){I(this.#he,o)}#ge=_(()=>e.props.onclickconnectend);get onclickconnectend(){return l(this.#ge)}set onclickconnectend(o){I(this.#ge,o)}#ve=ge(null);get clickConnectStartHandle(){return l(this.#ve)}set clickConnectStartHandle(o){I(this.#ve,o)}#ye=_(()=>e.props.onselectiondrag);get onselectiondrag(){return l(this.#ye)}set onselectiondrag(o){I(this.#ye,o)}#me=_(()=>e.props.onselectiondragstart);get onselectiondragstart(){return l(this.#me)}set onselectiondragstart(o){I(this.#me,o)}#pe=_(()=>e.props.onselectiondragstop);get onselectiondragstop(){return l(this.#pe)}set onselectiondragstop(o){I(this.#pe,o)}resolveFitView=async()=>{this.panZoom&&(await ad({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new _f("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark");#we=_(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light");get colorMode(){return l(this.#we)}set colorMode(o){I(this.#we,o)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Do,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new t}function wt(){const e=Qt(zo);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const zo=Symbol();function Sf(e){const t=kf(e);function n(x){t.nodeTypes={...ss,...x}}function o(x){t.edgeTypes={...as,...x}}function r(x){t.edges=bd(x,t.edges)}const s=(x,C=!1)=>{t.nodes=t.nodes.map(v=>{const b=x.get(v.id);return b?{...v,position:b.position,dragging:C}:v})};function i(x){const{changes:C,updatedInternals:v}=zd(x,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!v)return;Ad(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const b=new Map;for(const p of C){const P=t.nodeLookup.get(p.id)?.internals.userNode;if(!P)continue;const T={...P};switch(p.type){case"dimensions":{const D={...T.measured,...p.dimensions};p.setAttributes&&(T.width=p.dimensions?.width??T.width,T.height=p.dimensions?.height??T.height),T.measured=D;break}case"position":T.position=p.position??T.position;break}b.set(p.id,T)}t.nodes=t.nodes.map(p=>b.get(p.id)??p)}function a(x){const C=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=x,t.fitViewResolver=C,t.nodes=[...t.nodes],C.promise}async function u(x,C,v){const b=typeof v?.zoom<"u"?v.zoom:t.maxZoom,p=t.panZoom;return p?(await p.setViewport({x:t.width/2-x*b,y:t.height/2-C*b,zoom:b},{duration:v?.duration,ease:v?.ease,interpolate:v?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function d(x,C){const v=t.panZoom;return v?v.scaleBy(x,C):Promise.resolve(!1)}function c(x){return d(1.2,x)}function h(x){return d(1/1.2,x)}function f(x){const C=t.panZoom;C&&(C.setScaleExtent([x,t.maxZoom]),t.minZoom=x)}function g(x){const C=t.panZoom;C&&(C.setScaleExtent([t.minZoom,x]),t.maxZoom=x)}function y(x){const C=t.panZoom;C&&(C.setTranslateExtent(x),t.translateExtent=x)}function m(x){t.panZoom?.setClickDistance(x)}function k(x,C=null){let v=!1;const b=x.map(p=>(C?C.has(p.id):!0)&&p.selected?(v=!0,{...p,selected:!1}):p);return[v,b]}function w(x){const C=x?.nodes?new Set(x.nodes.map(D=>D.id)):null,[v,b]=k(t.nodes,C);v&&(t.nodes=b);const p=x?.edges?new Set(x.edges.map(D=>D.id)):null,[P,T]=k(t.edges,p);P&&(t.edges=T)}function z(x){const C=t.multiselectionKeyPressed;t.nodes=t.nodes.map(v=>{const b=x.includes(v.id),p=C&&v.selected||b;if(v.selected!==p){const P=t.nodeLookup.get(v.id);return P&&(P.selected=p),v.selected=p,{...v}}return v}),C||w({nodes:[]})}function N(x){const C=t.multiselectionKeyPressed;t.edges=t.edges.map(v=>{const b=x.includes(v.id),p=C&&v.selected||b;return v.selected!==p?{...v,selected:p}:v}),C||w({edges:[]})}function S(x,C,v){const b=t.nodeLookup.get(x);if(!b){console.warn("012",tn.error012(x));return}t.selectionRect=null,t.selectionRectMode=null,b.selected?(C||b.selected&&t.multiselectionKeyPressed)&&(w({nodes:[b],edges:[]}),requestAnimationFrame(()=>v?.blur())):z([x])}function M(x){const C=t.edgeLookup.get(x);if(!C){console.warn("012",tn.error012(x));return}(C.selectable||t.elementsSelectable&&typeof C.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,C.selected?C.selected&&t.multiselectionKeyPressed&&w({nodes:[],edges:[C]}):N([x]))}function E(x,C){const{nodeExtent:v,snapGrid:b,nodeOrigin:p,nodeLookup:P,nodesDraggable:T,onerror:D}=t,O=new Map,R=b?.[0]??5,U=b?.[1]??5,W=x.x*R*C,X=x.y*U*C;for(const q of P.values()){if(!(q.selected&&(q.draggable||T&&typeof q.draggable>"u")))continue;let Q={x:q.internals.positionAbsolute.x+W,y:q.internals.positionAbsolute.y+X};b&&(Q=$n(Q,b));const{position:re,positionAbsolute:de}=Bi({nodeId:q.id,nextPosition:Q,nodeLookup:P,nodeExtent:v,nodeOrigin:p,onError:D});q.position=re,q.internals.positionAbsolute=de,O.set(q.id,q)}s(O)}function A(x){return Od({delta:x,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const L=x=>{t._connection={...x}};function Z(){t._connection=Do}function J(){t.resetStoreValues(),w()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:o,addEdge:r,updateNodePositions:s,updateNodeInternals:i,zoomIn:c,zoomOut:h,fitView:a,setCenter:u,setMinZoom:f,setMaxZoom:g,setTranslateExtent:y,setPaneClickDistance:m,unselectNodesAndEdges:w,addSelectedNodes:z,addSelectedEdges:N,handleNodeSelection:S,handleEdgeSelection:M,moveSelectedNodes:E,panBy:A,updateConnection:L,cancelConnection:Z,reset:J})}function Ef(e,t){const{minZoom:n,maxZoom:o,initialViewport:r,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:a,translateExtent:u,paneClickDistance:d,setPanZoomInstance:c,onDraggingChange:h,onTransformChange:f}=t,g=jd({domNode:e,minZoom:n,maxZoom:o,translateExtent:u,viewport:r,paneClickDistance:d,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:h}),y=g.getViewport();return(r.x!==y.x||r.y!==y.y||r.zoom!==y.zoom)&&f([y.x,y.y,y.zoom]),c(g),g.update(t),{update(m){g.update(m)}}}var Cf=$('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Nf(e,t){ie(t,!0);let n=Y(t,"store",15),o=Y(t,"panOnScrollMode",19,()=>at.Free),r=Y(t,"preventScrolling",3,!0),s=Y(t,"zoomOnScroll",3,!0),i=Y(t,"zoomOnDoubleClick",3,!0),a=Y(t,"zoomOnPinch",3,!0),u=Y(t,"panOnDrag",3,!0),d=Y(t,"panOnScroll",3,!1),c=Y(t,"paneClickDistance",3,1),h=_(()=>n().panActivationKeyPressed||u()),f=_(()=>n().panActivationKeyPressed||d());const{viewport:g}=n();let y=!1;ht(()=>{!y&&n().viewportInitialized&&(t.oninit?.(),y=!0)});var m=Cf(),k=F(m);ze(k,()=>t.children),K(m),Ee(m,(w,z)=>Ef?.(w,z),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:w=>{n(n().dragging=w,!0)},setPanZoomInstance:w=>{n(n().panZoom=w,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:s(),zoomOnDoubleClick:i(),zoomOnPinch:a(),panOnScroll:l(f),panOnDrag:l(h),panOnScrollSpeed:.5,panOnScrollMode:o()||at.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof r()=="boolean"?r():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:c(),onTransformChange:w=>{n(n().viewport={x:w[0],y:w[1],zoom:w[2]},!0)}})),V(e,m),se()}function Fr(e,t){return n=>{n.target===t&&e?.(n)}}function Xr(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Zr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Pf=$("<div><!></div>");function Af(e,t){ie(t,!0);let n=Y(t,"store",15),o=Y(t,"panOnDrag",3,!0),r,s=null,i=new Set,a=new Set,u=_(()=>n().panActivationKeyPressed||o()),d=_(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&l(u)!==!0),c=_(()=>n().elementsSelectable&&(l(d)||n().selectionRectMode==="user")),h=!1;function f(E){if(h||n().connection.inProgress){h=!1;return}t.onpaneclick?.({event:E}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(E){if(s=r?.getBoundingClientRect(),!n().elementsSelectable||!l(d)||E.button!==0||E.target!==r||!s)return;E.target?.setPointerCapture?.(E.pointerId);const{x:A,y:L}=Xe(E,s);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:A,startY:L,x:A,y:L},!0),t.onselectionstart?.(E)}function y(E){if(!l(d)||!s||!n().selectionRect)return;h=!0;const A=Xe(E,s),{startX:L=0,startY:Z=0}=n().selectionRect,J={...n().selectionRect,x:A.x<L?A.x:L,y:A.y<Z?A.y:Z,width:Math.abs(A.x-L),height:Math.abs(A.y-Z)},H=i,x=a;i=new Set(Uo(n().nodeLookup,J,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===On.Partial,!0).map(v=>v.id));const C=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const v of i){const b=n().connectionLookup.get(v);if(b)for(const{edgeId:p}of b.values()){const P=n().edgeLookup.get(p);P&&(P.selectable??C)&&a.add(p)}}Zr(H,i)||n(n().nodes=n().nodes.map(Xr(i)),!0),Zr(x,a)||n(n().edges=n().edges.map(Xr(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=J,!0)}function m(E){E.button===0&&(E.target?.releasePointerCapture?.(E.pointerId),!l(d)&&n().selectionRectMode==="user"&&E.target===r&&f?.(E),n(n().selectionRect=null,!0),i.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),t.onselectionend?.(E))}const k=E=>{if(Array.isArray(l(u))&&l(u).includes(2)){E.preventDefault();return}t.onpanecontextmenu?.({event:E})};var w=Pf();let z;var N=_(()=>l(c)?void 0:Fr(f,r));w.__click=function(...E){l(N)?.apply(this,E)},w.__pointerdown=function(...E){(l(c)?g:void 0)?.apply(this,E)},w.__pointermove=function(...E){(l(c)?y:void 0)?.apply(this,E)},w.__pointerup=function(...E){(l(c)?m:void 0)?.apply(this,E)};var S=_(()=>Fr(k,r));w.__contextmenu=function(...E){l(S)?.apply(this,E)};var M=F(w);ze(M,()=>t.children),K(w),sn(w,E=>r=E,()=>r),ce(E=>z=Oe(w,1,"svelte-flow__pane svelte-flow__container",null,z,E),[()=>({draggable:o()===!0||Array.isArray(o())&&o().includes(0),dragging:n().dragging,selection:l(d)})]),V(e,w),se()}Rt(["click","pointerdown","pointermove","pointerup","contextmenu"]);var Mf=$('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Df(e,t){ie(t,!0);var n=Mf();let o;var r=F(n);ze(r,()=>t.children),K(n),ce(s=>o=We(n,"",o,s),[()=>({transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})]),V(e,n),se()}function ls(e,t){const{store:n,onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i}=t,a=Vd({onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i,getStoreItems:()=>{const{snapGrid:d,viewport:c}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:d||[0,0],snapToGrid:!!d,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(d,c){if(c.disabled){a.destroy();return}a.update({domNode:d,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return u(e,t),{update(d){u(e,d)},destroy(){a.destroy()}}}var If=$('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-62ze0y"> </div>'),Tf=$('<div class="a11y-hidden svelte-62ze0y"> </div> <div class="a11y-hidden svelte-62ze0y"> </div> <!>',1);function zf(e,t){ie(t,!0);var n=Tf(),o=ae(n),r=F(o,!0);K(o);var s=B(o,2),i=F(s,!0);K(s);var a=B(s,2);{var u=d=>{var c=If(),h=F(c,!0);K(c),ce(()=>{oe(c,"id",`${Of}-${t.store.flowId}`),ye(h,t.store.ariaLiveMessage)}),V(d,c)};ue(a,d=>{t.store.disableKeyboardA11y||d(u)})}ce(()=>{oe(o,"id",`${cs}-${t.store.flowId}`),ye(r,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),oe(s,"id",`${us}-${t.store.flowId}`),ye(i,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),V(e,n),se()}const cs="svelte-flow__node-desc",us="svelte-flow__edge-desc",Of="svelte-flow__aria-live";var Hf=$("<div><!></div>");function Rf(e,t){ie(t,!0);let n=Y(t,"store",15),o=_(()=>be(t.node.data,()=>({}),!0)),r=_(()=>be(t.node.selected,!1)),s=_(()=>t.node.draggable),i=_(()=>t.node.selectable),a=_(()=>be(t.node.deletable,!0)),u=_(()=>t.node.connectable),d=_(()=>t.node.focusable),c=_(()=>be(t.node.hidden,!1)),h=_(()=>be(t.node.dragging,!1)),f=_(()=>be(t.node.style,"")),g=_(()=>t.node.class),y=_(()=>be(t.node.type,"default")),m=_(()=>t.node.parentId),k=_(()=>t.node.sourcePosition),w=_(()=>t.node.targetPosition),z=_(()=>be(t.node.measured,()=>({width:0,height:0}),!0).width),N=_(()=>be(t.node.measured,()=>({width:0,height:0}),!0).height),S=_(()=>t.node.initialWidth),M=_(()=>t.node.initialHeight),E=_(()=>t.node.width),A=_(()=>t.node.height),L=_(()=>t.node.dragHandle),Z=_(()=>be(t.node.internals.z,0)),J=_(()=>t.node.internals.positionAbsolute.x),H=_(()=>t.node.internals.positionAbsolute.y),x=_(()=>t.node.internals.userNode),{id:C}=t.node,v=_(()=>l(s)??n().nodesDraggable),b=_(()=>l(i)??n().elementsSelectable),p=_(()=>l(u)??n().nodesConnectable),P=_(()=>hd(t.node)),T=_(()=>!!t.node.internals.handleBounds),D=_(()=>l(P)&&l(T)),O=_(()=>l(d)??n().nodesFocusable);function R(te){return n().parentLookup.has(te)}let U=_(()=>R(C)),W=ge(null),X=null,q=l(y),G=l(k),Q=l(w),re=_(()=>n().nodeTypes[l(y)]??rs),de=_(()=>n().ariaLabelConfig);En("svelteflow__node_connectable",{get value(){return l(p)}}),En("svelteflow__node_id",C);let fe=_(()=>{const te=l(z)===void 0?l(E)??l(S):l(E),he=l(N)===void 0?l(A)??l(M):l(A);if(!(te===void 0&&he===void 0&&l(f)===void 0))return`${l(f)};${te?`width:${qe(te)};`:""}${he?`height:${qe(he)};`:""}`});ht(()=>{(l(y)!==q||l(k)!==G||l(w)!==Q)&&l(W)!==null&&requestAnimationFrame(()=>{l(W)!==null&&n().updateNodeInternals(new Map([[C,{id:C,nodeElement:l(W),force:!0}]]))}),q=l(y),G=l(k),Q=l(w)}),ht(()=>{t.resizeObserver&&(!l(D)||l(W)!==X)&&(X&&t.resizeObserver.unobserve(X),l(W)&&t.resizeObserver.observe(l(W)),X=l(W))}),Ro(()=>{X&&t.resizeObserver?.unobserve(X)});function ne(te){l(b)&&(!n().selectNodesOnDrag||!l(v)||n().nodeDragThreshold>0)&&n().handleNodeSelection(C),t.onnodeclick?.({node:l(x),event:te})}function ee(te){if(!(Zi(te)||n().disableKeyboardA11y))if(Vi.includes(te.key)&&l(b)){const he=te.key==="Escape";n().handleNodeSelection(C,he,l(W))}else l(v)&&t.node.selected&&Object.prototype.hasOwnProperty.call(Bn,te.key)&&(te.preventDefault(),n(n().ariaLiveMessage=l(de)["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(Bn[te.key],te.shiftKey?4:1))}const le=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!l(W)?.matches(":focus-visible"))return;const{width:te,height:he,viewport:xe}=n();Uo(new Map([[C,t.node]]),{x:0,y:0,width:te,height:he},[xe.x,xe.y,xe.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:xe.zoom})};var we=me(),Me=ae(we);{var pe=te=>{var he=Hf();ct(he,(Se,rt)=>({"data-id":C,class:["svelte-flow__node",`svelte-flow__node-${l(y)}`,l(g)],style:l(fe),onclick:ne,onpointerenter:t.onnodepointerenter?Pe=>t.onnodepointerenter({node:l(x),event:Pe}):void 0,onpointerleave:t.onnodepointerleave?Pe=>t.onnodepointerleave({node:l(x),event:Pe}):void 0,onpointermove:t.onnodepointermove?Pe=>t.onnodepointermove({node:l(x),event:Pe}):void 0,oncontextmenu:t.onnodecontextmenu?Pe=>t.onnodecontextmenu({node:l(x),event:Pe}):void 0,onkeydown:l(O)?ee:void 0,onfocus:l(O)?le:void 0,tabIndex:l(O)?0:void 0,role:t.node.ariaRole??(l(O)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${cs}-${n().flowId}`,...t.node.domAttributes,[it]:Se,[Je]:rt}),[()=>({dragging:l(h),selected:l(r),draggable:l(v),connectable:l(p),selectable:l(b),nopan:l(v),parent:l(U)}),()=>({"z-index":l(Z),transform:`translate(${l(J)??""}px, ${l(H)??""}px)`,visibility:l(P)?"visible":"hidden"})]);var xe=F(he);Vo(xe,()=>l(re),(Se,rt)=>{rt(Se,{get data(){return l(o)},get id(){return C},get selected(){return l(r)},get selectable(){return l(b)},get deletable(){return l(a)},get sourcePosition(){return l(k)},get targetPosition(){return l(w)},get zIndex(){return l(Z)},get dragging(){return l(h)},get draggable(){return l(v)},get dragHandle(){return l(L)},get parentId(){return l(m)},get type(){return l(y)},get isConnectable(){return l(p)},get positionAbsoluteX(){return l(J)},get positionAbsoluteY(){return l(H)},get width(){return l(E)},get height(){return l(A)}})}),K(he),Ee(he,(Se,rt)=>ls?.(Se,rt),()=>({nodeId:C,isSelectable:l(b),disabled:!l(v),handleSelector:l(L),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(Se,rt,Pe,Vt)=>{t.onnodedrag?.({event:Se,targetNode:Pe,nodes:Vt})},onDragStart:(Se,rt,Pe,Vt)=>{t.onnodedragstart?.({event:Se,targetNode:Pe,nodes:Vt})},onDragStop:(Se,rt,Pe,Vt)=>{t.onnodedragstop?.({event:Se,targetNode:Pe,nodes:Vt})},store:n()})),sn(he,Se=>I(W,Se),()=>l(W)),V(te,he)};ue(Me,te=>{l(c)||te(pe)})}V(e,we),se()}var Vf=$('<div class="svelte-flow__nodes"></div>');function Lf(e,t){ie(t,!0);let n=Y(t,"store",15);const o=typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const i=new Map;s.forEach(a=>{const u=a.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:a.target,force:!0})}),n().updateNodeInternals(i)});Ro(()=>{o?.disconnect()});var r=Vf();$e(r,21,()=>n().visible.nodes.values(),s=>s.id,(s,i)=>{Rf(s,{get node(){return l(i)},get resizeObserver(){return o},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),K(r),V(e,r),se()}var Bf=_e('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Kf(e,t){ie(t,!0);let n=_(()=>t.edge.source),o=_(()=>t.edge.target),r=_(()=>t.edge.sourceX),s=_(()=>t.edge.sourceY),i=_(()=>t.edge.targetX),a=_(()=>t.edge.targetY),u=_(()=>t.edge.sourcePosition),d=_(()=>t.edge.targetPosition),c=_(()=>be(t.edge.animated,!1)),h=_(()=>be(t.edge.selected,!1)),f=_(()=>t.edge.label),g=_(()=>t.edge.labelStyle),y=_(()=>be(t.edge.data,()=>({}),!0)),m=_(()=>t.edge.style),k=_(()=>t.edge.interactionWidth),w=_(()=>be(t.edge.type,"default")),z=_(()=>t.edge.sourceHandle),N=_(()=>t.edge.targetHandle),S=_(()=>t.edge.markerStart),M=_(()=>t.edge.markerEnd),E=_(()=>t.edge.selectable),A=_(()=>t.edge.focusable),L=_(()=>be(t.edge.deletable,!0)),Z=_(()=>t.edge.hidden),J=_(()=>t.edge.zIndex),H=_(()=>t.edge.class),x=_(()=>t.edge.ariaLabel),C=null;const{id:v}=t.edge;En("svelteflow__edge_id",v);let b=_(()=>l(E)??t.store.elementsSelectable),p=_(()=>l(A)??t.store.edgesFocusable),P=_(()=>t.store.edgeTypes[l(w)]??is),T=_(()=>l(S)?`url('#${To(l(S),t.store.flowId)}')`:void 0),D=_(()=>l(M)?`url('#${To(l(M),t.store.flowId)}')`:void 0);function O(G){const Q=t.store.edgeLookup.get(v);Q&&(l(b)&&t.store.handleEdgeSelection(v),t.onedgeclick?.({event:G,edge:Q}))}function R(G,Q){const re=t.store.edgeLookup.get(v);re&&Q({event:G,edge:re})}function U(G){if(!t.store.disableKeyboardA11y&&Vi.includes(G.key)&&l(b)){const{unselectNodesAndEdges:Q,addSelectedEdges:re}=t.store;G.key==="Escape"?(C?.blur(),Q({edges:[t.edge]})):re([v])}}var W=me(),X=ae(W);{var q=G=>{var Q=Bf();let re;var de=F(Q);ct(de,fe=>({class:["svelte-flow__edge",l(H)],"data-id":v,onclick:O,oncontextmenu:t.onedgecontextmenu?ne=>{R(ne,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?ne=>{R(ne,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?ne=>{R(ne,t.onedgepointerleave)}:void 0,"aria-label":l(x)===null?void 0:l(x)?l(x):`Edge from ${l(n)} to ${l(o)}`,"aria-describedby":l(p)?`${us}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(l(p)?"group":"img"),"aria-roledescription":"edge",onkeydown:l(p)?U:void 0,tabindex:l(p)?0:void 0,...t.edge.domAttributes,[it]:fe}),[()=>({animated:l(c),selected:l(h),selectable:l(b)})]);var ve=F(de);Vo(ve,()=>l(P),(fe,ne)=>{ne(fe,{get id(){return v},get source(){return l(n)},get target(){return l(o)},get sourceX(){return l(r)},get sourceY(){return l(s)},get targetX(){return l(i)},get targetY(){return l(a)},get sourcePosition(){return l(u)},get targetPosition(){return l(d)},get animated(){return l(c)},get selected(){return l(h)},get label(){return l(f)},get labelStyle(){return l(g)},get data(){return l(y)},get style(){return l(m)},get interactionWidth(){return l(k)},get selectable(){return l(b)},get deletable(){return l(L)},get type(){return l(w)},get sourceHandleId(){return l(z)},get targetHandleId(){return l(N)},get markerStart(){return l(T)},get markerEnd(){return l(D)}})}),K(de),sn(de,fe=>C=fe,()=>C),K(Q),ce(fe=>re=We(Q,"",re,fe),[()=>({"z-index":l(J)})]),V(G,Q)};ue(X,G=>{l(Z)||G(q)})}V(e,W),se()}var Yf=_e("<defs></defs>");function Ff(e,t){ie(t,!1);const n=wt();qr();var o=Yf();$e(o,5,()=>n.markers,r=>r.id,(r,s)=>{qf(r,bt(()=>l(s)))}),K(o),V(e,o),se()}var Xf=_e('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Zf=_e('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Wf=_e('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function qf(e,t){ie(t,!0);let n=Y(t,"width",3,12.5),o=Y(t,"height",3,12.5),r=Y(t,"markerUnits",3,"strokeWidth"),s=Y(t,"orient",3,"auto-start-reverse");var i=Wf(),a=F(i);{var u=c=>{var h=Xf();ce(()=>{oe(h,"stroke",t.color),oe(h,"stroke-width",t.strokeWidth)}),V(c,h)},d=c=>{var h=me(),f=ae(h);{var g=y=>{var m=Zf();ce(()=>{oe(m,"stroke",t.color),oe(m,"stroke-width",t.strokeWidth),oe(m,"fill",t.color)}),V(y,m)};ue(f,y=>{t.type===Hn.ArrowClosed&&y(g)},!0)}V(c,h)};ue(a,c=>{t.type===Hn.Arrow?c(u):c(d,!1)})}K(i),ce(()=>{oe(i,"id",t.id),oe(i,"markerWidth",`${n()}`),oe(i,"markerHeight",`${o()}`),oe(i,"markerUnits",r()),oe(i,"orient",s())}),V(e,i),se()}var Gf=$('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Uf(e,t){ie(t,!0);let n=Y(t,"store",15);var o=Gf(),r=F(o),s=F(r);Ff(s,{}),K(r);var i=B(r,2);$e(i,17,()=>n().visible.edges.values(),a=>a.id,(a,u)=>{Kf(a,{get edge(){return l(u)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(d){n(d)}})}),K(o),V(e,o),se()}var Qf=$('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function ds(e,t){ie(t,!0);let n=Y(t,"x",3,0),o=Y(t,"y",3,0),r=Y(t,"width",3,0),s=Y(t,"height",3,0),i=Y(t,"isVisible",3,!0);var a=me(),u=ae(a);{var d=c=>{var h=Qf();let f;ce(g=>f=We(h,"",f,g),[()=>({width:typeof r()=="string"?r():qe(r()),height:typeof s()=="string"?s():qe(s()),transform:`translate(${n()}px, ${o()}px)`})]),V(c,h)};ue(u,c=>{i()&&c(d)})}V(e,a),se()}function Jf(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectioncontextmenu?.({nodes:n,event:e})}function jf(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectionclick?.({nodes:n,event:e})}var $f=$("<div><!></div>");function eh(e,t){ie(t,!0);let n=ge(void 0);ht(()=>{t.store.disableKeyboardA11y||l(n)?.focus({preventScroll:!0})});let o=_(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,Qn(t.store.nodeLookup,{filter:u=>!!u.selected})):null);function r(u){Object.prototype.hasOwnProperty.call(Bn,u.key)&&(u.preventDefault(),t.store.moveSelectedNodes(Bn[u.key],u.shiftKey?4:1))}var s=me(),i=ae(s);{var a=u=>{var d=$f();d.__contextmenu=[Jf,t],d.__click=[jf,t],d.__keydown=function(...f){(t.store.disableKeyboardA11y?void 0:r)?.apply(this,f)};let c;var h=F(d);ds(h,{width:"100%",height:"100%",x:0,y:0}),K(d),Ee(d,(f,g)=>ls?.(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,y,m)=>{t.onnodedrag?.({event:f,targetNode:null,nodes:m})},onDragStart:(f,g,y,m)=>{t.onnodedragstart?.({event:f,targetNode:null,nodes:m})},onDragStop:(f,g,y,m)=>{t.onnodedragstop?.({event:f,targetNode:null,nodes:m})}})),sn(d,f=>I(n,f),()=>l(n)),ce(f=>{Oe(d,1,Ve(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),oe(d,"role",t.store.disableKeyboardA11y?void 0:"button"),oe(d,"tabindex",t.store.disableKeyboardA11y?void 0:-1),c=We(d,"",c,f)},[()=>({width:qe(l(o).width),height:qe(l(o).height),transform:`translate(${l(o).x??""}px, ${l(o).y??""}px)`})]),V(u,d)};ue(i,u=>{t.store.selectionRectMode==="nodes"&&l(o)&&tt(l(o).x)&&tt(l(o).y)&&u(a)})}V(e,s),se()}Rt(["contextmenu","click","keydown"]);function th(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Be(e,t){let{enabled:n=!0,trigger:o,type:r="keydown"}=t;function s(a){const u=Array.isArray(o)?o:[o],d=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((c,h,f)=>h?c|1<<f:c,0);for(const c of u){const h={preventDefault:!1,enabled:!0,...c},{modifier:f,key:g,callback:y,preventDefault:m,enabled:k}=h;if(k){if(a.key!==g)continue;if(f===null||f===!1){if(d!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const z=Array.isArray(f)?f:[f];let N=!1;for(const S of z)if((Array.isArray(S)?S:[S]).reduce((E,A)=>E|th(A),0)===d){N=!0;break}if(!N)continue}m&&a.preventDefault();const w={node:e,trigger:h,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:w})),y?.(w)}}}let i;return n&&(i=_o(e,r,s)),{update:a=>{const{enabled:u=!0,type:d="keydown"}=a;n&&(!u||r!==d)?i?.():!n&&u&&(i=_o(e,d,s)),n=u,r=d,o=a.trigger},destroy:()=>{i?.()}}}function nh(){const e=_(wt),t=s=>{const i=Kr(s)?s:l(e).nodeLookup.get(s.id),a=i.parentId?gd(i.position,i.measured,i.parentId,l(e).nodeLookup,l(e).nodeOrigin):i.position,u={...i,position:a,width:i.measured?.width??i.width,height:i.measured?.height??i.height};return Tt(u)};function n(s,i,a={replace:!1}){l(e).nodes=je(()=>l(e).nodes).map(u=>{if(u.id===s){const d=typeof i=="function"?i(u):i;return a?.replace&&Kr(d)?d:{...u,...d}}return u})}function o(s,i,a={replace:!1}){l(e).edges=je(()=>l(e).edges).map(u=>{if(u.id===s){const d=typeof i=="function"?i(u):i;return a.replace&&cf(d)?d:{...u,...d}}return u})}const r=s=>l(e).nodeLookup.get(s);return{zoomIn:l(e).zoomIn,zoomOut:l(e).zoomOut,getInternalNode:r,getNode:s=>r(s)?.internals.userNode,getNodes:s=>s===void 0?l(e).nodes:Wr(l(e).nodeLookup,s),getEdge:s=>l(e).edgeLookup.get(s),getEdges:s=>s===void 0?l(e).edges:Wr(l(e).edgeLookup,s),setZoom:(s,i)=>{const a=l(e).panZoom;return a?a.scaleTo(s,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>l(e).viewport.zoom,setViewport:async(s,i)=>{const a=l(e).viewport;return l(e).panZoom?(await l(e).panZoom.setViewport({x:s.x??a.x,y:s.y??a.y,zoom:s.zoom??a.zoom},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Lo(l(e).viewport),setCenter:async(s,i,a)=>l(e).setCenter(s,i,a),fitView:s=>l(e).fitView(s),fitBounds:async(s,i)=>{if(!l(e).panZoom)return Promise.resolve(!1);const a=Qo(s,l(e).width,l(e).height,l(e).minZoom,l(e).maxZoom,i?.padding??.1);return await l(e).panZoom.setViewport(a,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(s,i=!0,a)=>{const u=Ar(s),d=u?s:t(s);return d?(a||l(e).nodes).filter(c=>{const h=l(e).nodeLookup.get(c.id);if(!h||!u&&c.id===s.id)return!1;const f=Tt(h),g=nn(f,d);return i&&g>0||g>=f.width*f.height||g>=d.width*d.height}):[]},isNodeIntersecting:(s,i,a=!0)=>{const d=Ar(s)?s:t(s);if(!d)return!1;const c=nn(d,i);return a&&c>0||c>=d.width*d.height},deleteElements:async({nodes:s=[],edges:i=[]})=>{const{nodes:a,edges:u}=await ld({nodesToRemove:s,edgesToRemove:i,nodes:l(e).nodes,edges:l(e).edges,onBeforeDelete:l(e).onbeforedelete});return a&&(l(e).nodes=je(()=>l(e).nodes).filter(d=>!a.some(({id:c})=>c===d.id))),u&&(l(e).edges=je(()=>l(e).edges).filter(d=>!u.some(({id:c})=>c===d.id))),{deletedNodes:a,deletedEdges:u}},screenToFlowPosition:(s,i={snapToGrid:!0})=>{if(!l(e).domNode)return s;const a=i.snapToGrid?l(e).snapGrid:!1,{x:u,y:d,zoom:c}=l(e).viewport,{x:h,y:f}=l(e).domNode.getBoundingClientRect(),g={x:s.x-h,y:s.y-f};return un(g,[u,d,c],a!==null,a||[1,1])},flowToScreenPosition:s=>{if(!l(e).domNode)return s;const{x:i,y:a,zoom:u}=l(e).viewport,{x:d,y:c}=l(e).domNode.getBoundingClientRect(),h=Vn(s,[i,a,u]);return{x:h.x+d,y:h.y+c}},toObject:()=>structuredClone({nodes:[...l(e).nodes],edges:[...l(e).edges],viewport:{...l(e).viewport}}),updateNode:n,updateNodeData:(s,i,a)=>{const u=l(e).nodeLookup.get(s)?.internals.userNode;if(!u)return;const d=typeof i=="function"?i(u):i;n(s,c=>({...c,data:a?.replace?d:{...c.data,...d}}))},updateEdge:o,getNodesBounds:s=>rd(s,{nodeLookup:l(e).nodeLookup,nodeOrigin:l(e).nodeOrigin}),getHandleConnections:({type:s,id:i,nodeId:a})=>Array.from(l(e).connectionLookup.get(`${a}-${s}-${i??null}`)?.values()??[])}}function Wr(e,t){const n=[];for(const o of t){const r=e.get(o);if(r){const s="internals"in r?r.internals?.userNode:r;n.push(s)}}return n}function oh(e,t){ie(t,!0);let n=Y(t,"store",15),o=Y(t,"selectionKey",3,"Shift"),r=Y(t,"multiSelectionKey",19,()=>Ln()?"Meta":"Control"),s=Y(t,"deleteKey",3,"Backspace"),i=Y(t,"panActivationKey",3," "),a=Y(t,"zoomActivationKey",19,()=>Ln()?"Meta":"Control"),{deleteElements:u}=nh();function d(m){return m!==null&&typeof m=="object"}function c(m){return d(m)?m.modifier||[]:[]}function h(m){return m==null?"":d(m)?m.key:m}function f(m,k){return(Array.isArray(m)?m:[m]).map(z=>{const N=h(z);return{key:N,modifier:c(z),enabled:N!==null,callback:k}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function y(){const m=n().nodes.filter(N=>N.selected),k=n().edges.filter(N=>N.selected),{deletedNodes:w,deletedEdges:z}=await u({nodes:m,edges:k});(w.length>0||z.length>0)&&n().ondelete?.({nodes:w,edges:z})}Qe("blur",De,g),Qe("contextmenu",De,g),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(r(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(r(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(s(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!Zi(m.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),y())}),type:"keydown"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(s(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(i(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(i(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),Ee(De,(m,k)=>Be?.(m,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),se()}var rh=_e('<path fill="none" class="svelte-flow__connection-path"></path>'),ih=_e('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function sh(e,t){ie(t,!0);let n=_(()=>{if(!t.store.connection.inProgress)return"";const i={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case st.Bezier:{const[a]=qi(i);return a}case st.Straight:{const[a]=Ui(i);return a}case st.Step:case st.SmoothStep:{const[a]=eo({...i,borderRadius:t.type===st.Step?0:void 0});return a}}});var o=me(),r=ae(o);{var s=i=>{var a=ih(),u=F(a),d=F(u);{var c=f=>{var g=me(),y=ae(g);Vo(y,()=>t.LineComponent,(m,k)=>{k(m,{})}),V(f,g)},h=f=>{var g=rh();ce(()=>{oe(g,"d",l(n)),We(g,t.style)}),V(f,g)};ue(d,f=>{t.LineComponent?f(c):f(h,!1)})}K(u),K(a),ce(f=>{oe(a,"width",t.store.width),oe(a,"height",t.store.height),We(a,t.containerStyle),Oe(u,0,f)},[()=>Ve(["svelte-flow__connection",nd(t.store.connection.isValid)])]),V(i,a)};ue(r,i=>{t.store.connection.inProgress&&i(s)})}V(e,o),se()}var ah=$("<div><!></div>");function fs(e,t){ie(t,!0);let n=Y(t,"position",3,"top-right"),o=mt(t,["$$slots","$$events","$$legacy","position","style","class","children"]),r=_(()=>`${n()}`.split("-"));var s=ah();ct(s,a=>({class:a,style:t.style,...o}),[()=>["svelte-flow__panel",t.class,...l(r)]]);var i=F(s);ze(i,()=>t.children??Ot),K(s),V(e,s),se()}var lh=$('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function ch(e,t){ie(t,!0);let n=Y(t,"position",3,"bottom-right");var o=me(),r=ae(o);{var s=i=>{fs(i,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,u)=>{var d=lh();V(a,d)},$$slots:{default:!0}})};ue(r,i=>{t.proOptions?.hideAttribution||i(s)})}V(e,o),se()}var uh=$("<div><!></div>");function dh(e,t){ie(t,!0);let n=Y(t,"domNode",15),o=Y(t,"clientWidth",15),r=Y(t,"clientHeight",15),s=_(()=>t.rest.class),i=_(()=>Zs(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","style","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig"]));function a(c){c.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(c)}var u=uh();ct(u,c=>({class:["svelte-flow","svelte-flow__container",l(s),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...l(i),[Je]:c}),[()=>({width:qe(t.width),height:qe(t.height)})],void 0,"svelte-12wlba6");var d=F(u);ze(d,()=>t.children??Ot),K(u),sn(u,c=>n(c),()=>n()),lr(u,"clientHeight",r),lr(u,"clientWidth",o),V(e,u),se()}var fh=$('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),hh=$("<!> <!>",1),gh=$("<!> <!> <!> <!> <!>",1);function vh(e,t){ie(t,!0);let n=Y(t,"paneClickDistance",3,1),o=Y(t,"nodeClickDistance",3,1),r=Y(t,"panOnScrollMode",19,()=>at.Free),s=Y(t,"preventScrolling",3,!0),i=Y(t,"zoomOnScroll",3,!0),a=Y(t,"zoomOnDoubleClick",3,!0),u=Y(t,"zoomOnPinch",3,!0),d=Y(t,"panOnScroll",3,!1),c=Y(t,"panOnDrag",3,!0),h=Y(t,"selectionOnDrag",3,!0),f=Y(t,"connectionLineType",19,()=>st.Bezier),g=Y(t,"nodes",31,()=>Ut([])),y=Y(t,"edges",31,()=>Ut([])),m=Y(t,"viewport",15,void 0),k=mt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),w=Sf({props:k,width:t.width,height:t.height,get nodes(){return g()},set nodes(N){g(N)},get edges(){return y()},set edges(N){y(N)},get viewport(){return m()},set viewport(N){m(N)}});const z=Qt(zo);z&&z.setStore&&z.setStore(w),En(zo,{provider:!1,getStore(){return w}}),ht(()=>{const N={nodes:w.selectedNodes,edges:w.selectedEdges};je(()=>t.onselectionchange)?.(N);for(const S of w.selectionChangeHandlers.values())S(N)}),Ro(()=>{w.reset()}),dh(e,{get colorMode(){return w.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return k},get domNode(){return w.domNode},set domNode(N){w.domNode=N},get clientWidth(){return w.width},set clientWidth(N){w.width=N},get clientHeight(){return w.height},set clientHeight(N){w.height=N},children:(N,S)=>{var M=gh(),E=ae(M);oh(E,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return w},set store(H){w=H}});var A=B(E,2);Nf(A,{get panOnScrollMode(){return r()},get preventScrolling(){return s()},get zoomOnScroll(){return i()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return u()},get panOnScroll(){return d()},get panOnDrag(){return c()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return w},set store(H){w=H},children:(H,x)=>{Af(H,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return c()},get selectionOnDrag(){return h()},get store(){return w},set store(C){w=C},children:(C,v)=>{var b=hh(),p=ae(b);Df(p,{get store(){return w},set store(T){w=T},children:(T,D)=>{var O=fh(),R=B(ae(O),2);Uf(R,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return w},set store(q){w=q}});var U=B(R,4);sh(U,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return w},set store(q){w=q}});var W=B(U,2);Lf(W,{get nodeClickDistance(){return o()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(q){w=q}});var X=B(W,2);eh(X,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return w},set store(q){w=q}}),Xn(2),V(T,O)},$$slots:{default:!0}});var P=B(p,2);{let T=_(()=>!!(w.selectionRect&&w.selectionRectMode==="user")),D=_(()=>w.selectionRect?.width),O=_(()=>w.selectionRect?.height),R=_(()=>w.selectionRect?.x),U=_(()=>w.selectionRect?.y);ds(P,{get isVisible(){return l(T)},get width(){return l(D)},get height(){return l(O)},get x(){return l(R)},get y(){return l(U)}})}V(C,b)},$$slots:{default:!0}})},$$slots:{default:!0}});var L=B(A,2);ch(L,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var Z=B(L,2);zf(Z,{get store(){return w}});var J=B(Z,2);ze(J,()=>t.children??Ot),V(N,M)},$$slots:{default:!0}}),se()}var yh=$("<button><!></button>");function pn(e,t){let n=mt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var o=yh();ct(o,s=>({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[Je]:s}),[()=>({"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor})]);var r=F(o);ze(r,()=>t.children??Ot),K(o),V(e,o)}var mh=_e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function ph(e){var t=mh();V(e,t)}var wh=_e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function _h(e){var t=wh();V(e,t)}var xh=_e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function bh(e){var t=xh();V(e,t)}var kh=_e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function Sh(e){var t=kh();V(e,t)}var Eh=_e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function Ch(e){var t=Eh();V(e,t)}var Nh=$("<!> <!>",1),Ph=$("<!> <!> <!> <!> <!> <!>",1);function Ah(e,t){ie(t,!0);let n=Y(t,"position",3,"bottom-left"),o=Y(t,"orientation",3,"vertical"),r=Y(t,"showZoom",3,!0),s=Y(t,"showFitView",3,!0),i=Y(t,"showLock",3,!0),a=mt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),u=_(wt);const d={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let c=_(()=>l(u).nodesDraggable||l(u).nodesConnectable||l(u).elementsSelectable),h=_(()=>l(u).viewport.zoom<=l(u).minZoom),f=_(()=>l(u).viewport.zoom>=l(u).maxZoom),g=_(()=>l(u).ariaLabelConfig),y=_(()=>o()==="horizontal"?"horizontal":"vertical");const m=()=>{l(u).zoomIn()},k=()=>{l(u).zoomOut()},w=()=>{l(u).fitView(t.fitViewOptions)},z=()=>{let N=!l(c);l(u).nodesDraggable=N,l(u).nodesConnectable=N,l(u).elementsSelectable=N};{let N=_(()=>["svelte-flow__controls",l(y),t.class]);fs(e,bt({get class(){return l(N)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return l(g)["controls.ariaLabel"]},get style(){return t.style}},()=>a,{children:(S,M)=>{var E=Ph(),A=ae(E);{var L=D=>{var O=me(),R=ae(O);ze(R,()=>t.before),V(D,O)};ue(A,D=>{t.before&&D(L)})}var Z=B(A,2);{var J=D=>{var O=Nh(),R=ae(O);pn(R,bt({onclick:m,class:"svelte-flow__controls-zoomin",get title(){return l(g)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomIn.ariaLabel"]},get disabled(){return l(f)}},()=>d,{children:(W,X)=>{ph(W)},$$slots:{default:!0}}));var U=B(R,2);pn(U,bt({onclick:k,class:"svelte-flow__controls-zoomout",get title(){return l(g)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomOut.ariaLabel"]},get disabled(){return l(h)}},()=>d,{children:(W,X)=>{_h(W)},$$slots:{default:!0}})),V(D,O)};ue(Z,D=>{r()&&D(J)})}var H=B(Z,2);{var x=D=>{pn(D,bt({class:"svelte-flow__controls-fitview",onclick:w,get title(){return l(g)["controls.fitView.ariaLabel"]},get"aria-label"(){return l(g)["controls.fitView.ariaLabel"]}},()=>d,{children:(O,R)=>{bh(O)},$$slots:{default:!0}}))};ue(H,D=>{s()&&D(x)})}var C=B(H,2);{var v=D=>{pn(D,bt({class:"svelte-flow__controls-interactive",onclick:z,get title(){return l(g)["controls.interactive.ariaLabel"]},get"aria-label"(){return l(g)["controls.interactive.ariaLabel"]}},()=>d,{children:(O,R)=>{var U=me(),W=ae(U);{var X=G=>{Ch(G)},q=G=>{Sh(G)};ue(W,G=>{l(c)?G(X):G(q,!1)})}V(O,U)},$$slots:{default:!0}}))};ue(C,D=>{i()&&D(v)})}var b=B(C,2);{var p=D=>{var O=me(),R=ae(O);ze(R,()=>t.children),V(D,O)};ue(b,D=>{t.children&&D(p)})}var P=B(b,2);{var T=D=>{var O=me(),R=ae(O);ze(R,()=>t.after),V(D,O)};ue(P,D=>{t.after&&D(T)})}V(S,E)},$$slots:{default:!0}}))}se()}var lt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(lt||(lt={}));var Mh=_e("<circle></circle>");function Dh(e,t){var n=Mh();ce(()=>{oe(n,"cx",t.radius),oe(n,"cy",t.radius),oe(n,"r",t.radius),Oe(n,0,Ve(["svelte-flow__background-pattern","dots",t.class]))}),V(e,n)}var Ih=_e("<path></path>");function Th(e,t){ie(t,!0);var n=Ih();ce(()=>{oe(n,"stroke-width",t.lineWidth),oe(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),Oe(n,0,Ve(["svelte-flow__background-pattern",t.variant,t.class]))}),V(e,n),se()}const zh={[lt.Dots]:1,[lt.Lines]:1,[lt.Cross]:6};var Oh=_e('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Hh(e,t){ie(t,!0);let n=Y(t,"variant",19,()=>lt.Dots),o=Y(t,"gap",3,20),r=Y(t,"lineWidth",3,1),s=_(wt),i=_(()=>n()===lt.Dots),a=_(()=>n()===lt.Cross),u=_(()=>Array.isArray(o())?o():[o(),o()]),d=_(()=>`background-pattern-${l(s).flowId}-${t.id??""}`),c=_(()=>[l(u)[0]*l(s).viewport.zoom||1,l(u)[1]*l(s).viewport.zoom||1]),h=_(()=>(t.size??zh[n()])*l(s).viewport.zoom),f=_(()=>l(a)?[l(h),l(h)]:l(c)),g=_(()=>l(i)?[l(h)/2,l(h)/2]:[l(f)[0]/2,l(f)[1]/2]);var y=Oh();let m;var k=F(y),w=F(k);{var z=M=>{{let E=_(()=>l(h)/2);Dh(M,{get radius(){return l(E)},get class(){return t.patternClass}})}},N=M=>{Th(M,{get dimensions(){return l(f)},get variant(){return n()},get lineWidth(){return r()},get class(){return t.patternClass}})};ue(w,M=>{l(i)?M(z):M(N,!1)})}K(k);var S=B(k);K(y),ce(M=>{Oe(y,0,Ve(["svelte-flow__background","svelte-flow__container",t.class])),m=We(y,"",m,M),oe(k,"id",l(d)),oe(k,"x",l(s).viewport.x%l(c)[0]),oe(k,"y",l(s).viewport.y%l(c)[1]),oe(k,"width",l(c)[0]),oe(k,"height",l(c)[1]),oe(k,"patternTransform",`translate(-${l(g)[0]},-${l(g)[1]})`),oe(S,"fill",`url(#${l(d)})`)},[()=>({"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor})]),V(e,y),se()}var Rh=$('<button aria-label="Edit Button"><svg width="15px" height="15px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="Complete"><g id="edit"><g><path d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><polygon fill="none" points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon></g></g></g></svg></button>');function er(e,t){var n=Rh();n.__click=function(...o){t.onclick?.apply(this,o)},ce(()=>Oe(n,1,Ve(t.classProp))),V(e,n)}Rt(["click"]);var Vh=(e,t)=>{t({event:e})},Lh=$("<option> </option>"),Bh=(e,t)=>{t({event:e})},Kh=$("<option> </option>"),Yh=$("<option> </option>"),Fh=$("<div>TODO</div>"),Xh=$('<div><div>Variable Name:</div> <div><input type="text"/></div></div>'),Zh=$('<div class="text-2xl text-neutral-300 border-3 rounded-lg flex flex-col overflow-scroll border-red-300 p-2 mb-10 space-y-2"><div><div>Type:</div> <select><!></select> <div class="rounded-md bg-red-400 shrink px-2 justify-end ml-auto mr-1"><button>SAVE</button></div></div> <div><div>User Text:</div> <div><input type="text"/></div></div> <!> <!></div>'),Wh=$('<div class="text-xl flex flex-col space-y-2 mx-4 border-3 text-neutral-400 p-2 rounded-lg"><div class="flex flex-row space-x-3"><div> </div> <div>|</div> <div> </div> <div class="scale-150 ml-auto mr-1"><!></div></div> <div class="flex flex-row space-x-3"><div>User Text:</div> <div> </div></div></div> <div class="text-5xl text-center"><button class="text-blue-800 hover:text-red-600">+</button></div>',1),qh=$('<div class="absolute z-10 opacity-[98.5%] mt-5 w-[30%] ml-[70%] h-[100%]"><div class="p-5 bg-gradient-to-br from-slate-700 to-slate-800 rounded-lg h-[95%] overflow-y-scroll m-3"><button class="text-white bg-red-300 hover:bg-red-600 rounded-full w-8 h-8 flex items-center justify-center transition absolute translate-x-[-2vw] translate-y-[-3.5vh]">-</button> <div class="font-bold text-4xl text-center text-neutral-200 rounded-lg"><input type="text" class="font-bold text-4xl text-center"/></div> <div class="font-bold text-2xl mt-5 mx- rounded-lg text-neutral-200 flex flex-row justify-center"><label class="mr-2">Agent:</label> <select class="text-center"></select></div> <div class="mt-5 flex flex-col space-y-2"><div class="text-5xl text-center"><button class="text-blue-800 transition hover:text-red-600">+</button></div> <!></div></div></div>');function Gh(e,t){ie(t,!0);let n=["Output Text","Input  Text","Input  Date","Input  Document","Input  Image","Input  Number"],o=["Output Variable","Input Decision"],r=_(()=>Ce.at(Te.currentStepID)?.formItems),s=_(()=>Ce.at(Te.currentStepID)?.type==="control");const i=({event:y,idx:m})=>{y.preventDefault(),l(r).splice(m+1,0,{type:"output",name:"Set Name",label:"Set Text",isBeingEdited:!0})},a=({event:y,idx:m})=>{y.preventDefault(),l(r)[m].isBeingEdited=!0},u=({event:y,idx:m})=>{y.preventDefault(),l(r)[m].isBeingEdited=!1},d=({event:y})=>{y.preventDefault(),Te.active=!1};let c={active:"flex flex-row space-x-4 py-0.5"};var h=me(),f=ae(h);{var g=y=>{var m=qh(),k=F(m),w=F(k);w.__click=[Vh,d];var z=B(w,2),N=F(z);Et(N),K(z);var S=B(z,2),M=B(F(S),2);$e(M,21,()=>ut,kt,(J,H)=>{var x=me(),C=ae(x);{var v=b=>{var p=Lh(),P=F(p,!0);K(p);var T={};ce(()=>{ye(P,l(H).role),T!==(T=l(H).role)&&(p.value=(p.__value=l(H).role)??"")}),V(b,p)};ue(C,b=>{l(H).status!="deleted"&&b(v)})}V(J,x)}),K(M),K(S);var E=B(S,2),A=F(E),L=F(A);L.__click=[Bh,i],K(A);var Z=B(A,2);$e(Z,17,()=>l(r),kt,(J,H,x)=>{var C=me(),v=ae(C);{var b=P=>{var T=Zh(),D=F(T),O=B(F(D),2),R=F(O);{var U=ee=>{var le=me(),we=ae(le);$e(we,17,()=>o,kt,(Me,pe)=>{var te=Kh(),he=F(te,!0);K(te);var xe={};ce(()=>{ye(he,l(pe)),xe!==(xe=l(pe))&&(te.value=(te.__value=l(pe))??"")}),V(Me,te)}),V(ee,le)},W=ee=>{var le=me(),we=ae(le);$e(we,17,()=>n,kt,(Me,pe)=>{var te=Yh(),he=F(te,!0);K(te);var xe={};ce(()=>{ye(he,l(pe)),xe!==(xe=l(pe))&&(te.value=(te.__value=l(pe))??"")}),V(Me,te)}),V(ee,le)};ue(R,ee=>{l(s)?ee(U):ee(W,!1)})}K(O);var X=B(O,2),q=F(X);q.__click=()=>u({event,idx:x}),K(X),K(D);var G=B(D,2),Q=B(F(G),2),re=F(Q);Et(re),K(Q),K(G);var de=B(G,2);{var ve=ee=>{var le=Fh();V(ee,le)};ue(de,ee=>{l(H).type==="Output Variable"&&ee(ve)})}var fe=B(de,2);{var ne=ee=>{var le=Xh(),we=B(F(le),2),Me=F(we);Et(Me),K(we),K(le),ce(()=>Oe(le,1,Ve(c.active))),Ct(Me,()=>l(H).name,pe=>l(H).name=pe),V(ee,le)};ue(fe,ee=>{l(H).type!=="Output Text"&&!l(s)&&ee(ne)})}K(T),ce(()=>{Oe(D,1,Ve(c.active)),Oe(G,1,Ve(c.active))}),Nn(O,()=>l(H).type,ee=>l(H).type=ee),Ct(re,()=>l(H).label,ee=>l(H).label=ee),V(P,T)},p=P=>{var T=Wh(),D=ae(T),O=F(D),R=F(O),U=F(R,!0);K(R);var W=B(R,4),X=F(W,!0);K(W);var q=B(W,2),G=F(q);er(G,{classProp:"",onclick:ne=>{a({event:ne,idx:x})}}),K(q),K(O);var Q=B(O,2),re=B(F(Q),2),de=F(re,!0);K(re),K(Q),K(D);var ve=B(D,2),fe=F(ve);fe.__click=ne=>{i({event:ne,idx:x})},K(ve),ce(ne=>{ye(U,ne),ye(X,l(H).name),ye(de,l(H).label)},[()=>l(H).type.toUpperCase()]),V(P,T)};ue(v,P=>{l(H).isBeingEdited?P(b):P(p,!1)})}V(J,C)}),K(E),K(k),K(m),Ct(N,()=>Ce[Te.currentStepID].label,J=>Ce[Te.currentStepID].label=J),Nn(M,()=>Ce[Te.currentStepID].agent,J=>Ce[Te.currentStepID].agent=J),V(y,m)};ue(f,y=>{Te.active&&y(g)})}V(e,h),se()}Rt(["click"]);function Uh(e,t){ie(t,!0);let n=Y(t,"style",7),o=_(()=>eo({sourceX:t.sourceX,sourceY:t.sourceY,sourcePosition:t.sourcePosition,targetX:t.targetX,targetY:t.targetY,targetPosition:t.targetPosition})),r=_(()=>Ht(l(o),1)),s=_(()=>l(r)[0]);n(t.sourceHandleId==="pos"?"stroke: green;":t.sourceHandleId==="neg"?"stroke: red;":"stroke: black;"),dn(e,{get id(){return t.id},get style(){return n()},get path(){return l(s)}}),se()}var Qh=$('<!> <div class="maxw-[5vw] px-3 text-center"><div> </div> <div> </div> <!></div> <!>',1);function Jh(e,t){ie(t,!0);const n=({event:f})=>{Te.currentStepID=t.data.id,Te.active=!0};var o=Qh(),r=ae(o);nt(r,{type:"target",get position(){return j.Left}});var s=B(r,2),i=F(s),a=F(i,!0);K(i);var u=B(i,2),d=F(u,!0);K(u);var c=B(u,2);er(c,{classProp:"nodrag",onclick:n}),K(s);var h=B(s,2);nt(h,{type:"source",get position(){return j.Right}}),ce(()=>{ye(a,t.data.agent),ye(d,t.data.label)}),V(e,o),se()}var jh=$('<!> <div class="maxw-[5vw] px-3 text-center"><div> </div> <div> </div> <div> </div> <!></div> <!> <!>',1);function $h(e,t){ie(t,!0);const n=({event:m})=>{Te.currentStepID=t.data.id,Te.active=!0};var o=jh(),r=ae(o);nt(r,{type:"target",get position(){return j.Left}});var s=B(r,2),i=F(s),a=F(i,!0);K(i);var u=B(i,2),d=F(u,!0);K(u);var c=B(u,2),h=F(c,!0);K(c);var f=B(c,2);er(f,{classProp:"nodrag",onclick:n}),K(s);var g=B(s,2);nt(g,{id:"pos",type:"source",class:"!bg-green-500",get position(){return j.Right}});var y=B(g,2);nt(y,{id:"neg",type:"source",class:"!bg-red-500",get position(){return j.Bottom}}),ce(()=>{ye(a,t.data.agent),ye(d,t.data.label),ye(h,t.data.condition)}),V(e,o),se()}var eg=$("<!> <!>",1),tg=$('<li class="px-4 py-2 hover:bg-red-500 hover:text-white cursor-pointer">Delete Node</li>'),ng=$('<ul class="context-menu absolute bg-white border rounded shadow-md w-40 py-1 svelte-tu7f7e"><li class="px-4 py-2 hover:bg-gray-200 cursor-pointer">Add Activity</li> <li class="px-4 py-2 hover:bg-gray-200 cursor-pointer">Add Control</li> <!></ul> <div class="fixed inset-0"></div>',1),og=$("<option> </option>"),rg=$('<div class="mb-4"><label class="block font-medium mb-1">Condition:</label> <input type="text" class="w-full border rounded px-2 py-1"/></div>'),ig=$('<div class="fixed inset-0 flex items-center justify-center modal-bg p-4 svelte-tu7f7e"><div class="bg-white rounded shadow-lg p-6 w-96 max-w-full"><h2 class="text-xl font-semibold mb-4">Create New Node</h2> <div class="mb-4"><label class="block font-medium mb-1">Node Type:</label> <select class="w-full border rounded px-2 py-1"><option>Activity Node</option><option>Control Node</option></select></div> <div class="mb-4"><label class="block font-medium mb-1">Name:</label> <input type="text" class="w-full border rounded px-2 py-1"/></div> <div class="mb-4"><label class="block font-medium mb-1">Agent:</label> <select class="w-full border rounded px-2 py-1"></select></div> <!> <div class="flex justify-end space-x-3"><button class="px-4 py-2 rounded bg-gray-300 hover:bg-gray-400">Cancel</button> <button class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Create</button></div></div></div>'),sg=$('<div class="relative w-full h-screen"><!> <!> <!></div>');function ag(e,t){ie(t,!1);const n={processStep:Jh,controllStep:$h},o={coloredEdge:Uh},r={id:"start",type:"input",data:Ce[0],position:{x:50,y:200},sourcePosition:j.Right},s={id:"end",type:"output",data:Ce[1],position:{x:650,y:200},targetPosition:j.Left};let i=Ie([r,s,{id:"1",data:Ce[2],type:"processStep",position:{x:400,y:200}}]),a=Ie([]),u=Ie(0),d=Ie(0),c=Ie(null),h=Ie(!1),f=Ie(!1),g=Ie("input"),y=Ie(""),m=Ie(""),k=Ie("");function w(){return"node_"+Math.random().toString(36).substr(2,9)}const z=({event:p})=>{p.preventDefault(),I(h,!0),I(c,null),I(u,p.clientX),I(d,p.clientY),console.log("click graph")},N=({event:p,node:P})=>{p.preventDefault(),I(h,!0),I(c,P.id),I(u,p.clientX),I(d,p.clientY),console.log("click node")};function S(){I(f,!0),I(h,!1),I(y,""),I(m,""),I(k,""),I(g,"input")}function M(){I(f,!0),I(h,!1),I(y,""),I(m,""),I(k,""),I(g,"control")}function E(){if(l(c)){if(l(c)==="start"||l(c)==="end"){alert("Cannot delete start or end nodes."),I(h,!1);return}I(i,l(i).filter(p=>p.id!==l(c))),I(a,l(a).filter(p=>p.source!==l(c)&&p.target!==l(c))),I(h,!1)}}function A(){if(!l(y).trim()||!l(m).trim()){alert("Name and Agent are required.");return}const p=w();let P="";l(g)==="input"?(P="processStep",Ce.push({id:Ce.length,label:l(y).trim(),agent:l(m).trim(),type:"input",formItems:[]})):(P="controllStep",Ce.push({id:Ce.length,label:l(y).trim(),agent:l(m).trim(),condition:l(k).trim(),type:"control",formItems:[]}));const T={x:l(u)-400,y:l(d)-300};if(I(i,[...l(i),{id:p,type:P,data:Ce.at(-1),position:T,sourcePosition:j.Right,targetPosition:j.Left}]),l(c)){const D=l(i).find(O=>O.id===l(c));D&&D.data.type==="input"&&I(a,l(a).filter(O=>O.source!==D.id)),l(c)!=="end"&&I(a,[...l(a),{id:`e_${l(c)}_${p}`,source:l(c),target:p}])}I(f,!1)}function L(){I(h,!1)}function Z(){I(f,!1)}qr();var J=sg(),H=F(J);vh(H,{get nodeTypes(){return n},get edgeTypes(){return o},fitView:!0,onnodecontextmenu:N,onpanecontextmenu:z,class:"bg-gray-100",defaultEdgeOptions:{animated:!0,type:"coloredEdge"},get nodes(){return l(i)},set nodes(p){I(i,p)},get edges(){return l(a)},set edges(p){I(a,p)},children:(p,P)=>{var T=eg(),D=ae(T);Hh(D,{});var O=B(D,2);Ah(O,{}),V(p,T)},$$slots:{default:!0},$$legacy:!0});var x=B(H,2);{var C=p=>{var P=ng(),T=ae(P),D=F(T),O=B(D,2),R=B(O,2);{var U=X=>{var q=tg();Qe("click",q,E),V(X,q)};ue(R,X=>{l(c)&&l(c)!=="start"&&l(c)!=="end"&&X(U)})}K(T);var W=B(T,2);ce(()=>We(T,`top: ${l(d)??""}px; left: ${l(u)??""}px;`)),Qe("click",D,S),Qe("click",O,M),Qe("click",T,ua(function(X){da.call(this,t,X)})),Qe("click",W,L),V(p,P)};ue(x,p=>{l(h)&&p(C)})}var v=B(x,2);{var b=p=>{var P=ig(),T=F(P),D=B(F(T),2),O=B(F(D),2);ce(()=>{l(g),rr(()=>{})});var R=F(O);R.value=R.__value="input";var U=B(R);U.value=U.__value="control",K(O),K(D);var W=B(D,2),X=B(F(W),2);Et(X),K(W);var q=B(W,2),G=B(F(q),2);ce(()=>{l(m),rr(()=>{})}),$e(G,5,()=>ut,kt,(ne,ee)=>{var le=me(),we=ae(le);{var Me=pe=>{var te=og(),he=F(te,!0);K(te);var xe={};ce(()=>{ye(he,l(ee).role),xe!==(xe=l(ee).role)&&(te.value=(te.__value=l(ee).role)??"")}),V(pe,te)};ue(we,pe=>{l(ee).status!="deleted"&&pe(Me)})}V(ne,le)}),K(G),K(q);var Q=B(q,2);{var re=ne=>{var ee=rg(),le=B(F(ee),2);Et(le),K(ee),Ct(le,()=>l(k),we=>I(k,we)),V(ne,ee)};ue(Q,ne=>{l(g)==="control"&&ne(re)})}var de=B(Q,2),ve=F(de),fe=B(ve,2);K(de),K(T),K(P),Nn(O,()=>l(g),ne=>I(g,ne)),Ct(X,()=>l(y),ne=>I(y,ne)),Nn(G,()=>l(m),ne=>I(m,ne)),Qe("click",ve,Z),Qe("click",fe,A),V(p,P)};ue(v,p=>{l(f)&&p(b)})}K(J),V(e,J),se()}var lg=$('<div class="absolute z-10 opacity-95 mt-5"><!></div> <!> <!>',1);function gg(e,t){ie(t,!1);const n=!0;var o=lg(),r=ae(o),s=F(r);pa(s,{}),K(r);var i=B(r,2);Gh(i,{});var a=B(i,2);return ag(a,{}),V(e,o),la(t,"prerender",n),se({prerender:n})}export{gg as component};
