import"../chunks/DsnmJJEf.js";import{i as Wr}from"../chunks/DyedvWJA.js";import{ae as Kn,aC as qr,aD as fs,aE as hs,h as l,aF as po,M as zo,e as qe,aG as er,N as Gr,C as Ur,v as Oo,A as to,w as _e,ah as gs,x as vs,R as ys,y as ms,H as ps,z as tr,B as Kt,K as Ht,ai as ws,am as _s,D as Xt,G as xs,F as kt,aH as nr,a6 as Ae,aq as Qr,aI as Fn,I as Jr,J as bs,aJ as Yn,aK as ks,aL as no,aM as Wt,ak as Ss,aN as Es,ap as Cs,aO as Ns,X as As,aP as jr,aQ as Ps,L as nn,i as Ms,aR as Ds,aS as Ts,aT as Is,af as $r,aU as zs,aV as Os,aW as Hs,aX as Rs,aY as Ls,aZ as Vs,a_ as Bs,O as Ks,T as qt,p as re,l as ee,a7 as ge,q as B,a as V,m as ie,V as D,n as Y,o as K,c as ye,f as se,t as ce,ay as Gt,u as Fs,a9 as x,s as Pe,a$ as zt,b0 as on,b1 as rn,b2 as ei,d as ht,b3 as pe,aa as Ys,aA as En,b4 as we,b5 as Ne,b6 as Zs,b7 as or}from"../chunks/9Mg6vh82.js";import{l as ti,i as Xs,c as Ws,d as sn,a as qs,n as Gs,b as Us,e as Qs,s as me,f as wo,g as Ho,j as He}from"../chunks/BK2XbIpB.js";import{i as ae,p as F,r as mt,b as an,c as Ro,s as St}from"../chunks/BDiy184L.js";const Js=[];function Lo(e,t=!1){return wn(e,new Map,"",Js)}function wn(e,t,n,o,r=null){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Kn(e)){var i=Array(e.length);t.set(e,i),r!==null&&t.set(r,i);for(var a=0;a<e.length;a+=1){var c=e[a];a in e&&(i[a]=wn(c,t,n,o))}return i}if(qr(e)===fs){i={},t.set(e,i),r!==null&&t.set(r,i);for(var u in e)i[u]=wn(e[u],t,n,o);return i}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return wn(e.toJSON(),t,n,o,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function js(e){let t=0,n=po(0),o;return()=>{hs()&&(l(n),zo(()=>(t===0&&(o=qe(()=>e(()=>er(n)))),t+=1,()=>{Gr(()=>{t-=1,t===0&&(o?.(),o=void 0,er(n))})})))}}function Ft(e,t){return t}function $s(e,t,n){for(var o=e.items,r=[],s=t.length,i=0;i<s;i++)Es(t[i].e,r,!0);var a=s>0&&r.length===0&&n!==null;if(a){var c=n.parentNode;Cs(c),c.append(n),o.clear(),Oe(e,t[0].prev,t[s-1].next)}Ns(r,()=>{for(var u=0;u<s;u++){var d=t[u];a||(o.delete(d.k),Oe(e,d.prev,d.next)),Wt(d.e,!a)}})}function rt(e,t,n,o,r,s=null){var i=e,a={flags:t,items:new Map,first:null},c=(t&jr)!==0;if(c){var u=e;i=_e?to(gs(u)):u.appendChild(Ur())}_e&&vs();var d=null,h=!1,f=new Map,g=ys(()=>{var y=n();return Kn(y)?y:y==null?[]:Qr(y)}),m,p;function k(){ea(p,m,a,f,i,r,t,o,n),s!==null&&(m.length===0?d?Jr(d):d=Xt(()=>s(i)):d!==null&&bs(d,()=>{d=null}))}Oo(()=>{p??=As,m=l(g);var y=m.length;if(h&&y===0)return;h=y===0;let z=!1;if(_e){var N=ms(i)===ps;N!==(y===0)&&(i=tr(),to(i),Kt(!1),z=!0)}if(_e){for(var E=null,M,S=0;S<y;S++){if(Ht.nodeType===ws&&Ht.data===_s){i=Ht,z=!0,Kt(!1);break}var A=m[S],H=o(A,S);M=_o(Ht,a,E,null,A,H,S,r,t,n),a.items.set(H,M),E=M}y>0&&to(tr())}if(_e)y===0&&s&&(d=Xt(()=>s(i)));else if(xs()){var X=new Set,J=kt;for(S=0;S<y;S+=1){A=m[S],H=o(A,S);var R=a.items.get(H)??f.get(H);R?(t&(Yn|Fn))!==0&&ni(R,A,S,t):(M=_o(null,a,null,null,A,H,S,r,t,n,!0),f.set(H,M)),X.add(H)}for(const[b,C]of a.items)X.has(b)||J.skipped_effects.add(C.e);J.add_callback(k)}else k();z&&Kt(!0),l(g)}),_e&&(i=Ht)}function ea(e,t,n,o,r,s,i,a,c){var u=(i&Ps)!==0,d=(i&(Yn|Fn))!==0,h=t.length,f=n.items,g=n.first,m=g,p,k=null,y,z=[],N=[],E,M,S,A;if(u)for(A=0;A<h;A+=1)E=t[A],M=a(E,A),S=f.get(M),S!==void 0&&(S.a?.measure(),(y??=new Set).add(S));for(A=0;A<h;A+=1){if(E=t[A],M=a(E,A),S=f.get(M),S===void 0){var H=o.get(M);if(H!==void 0){o.delete(M),f.set(M,H);var X=k?k.next:m;Oe(n,k,H),Oe(n,H,X),oo(H,X,r),k=H}else{var J=m?m.e.nodes_start:r;k=_o(J,n,k,k===null?n.first:k.next,E,M,A,s,i,c)}f.set(M,k),z=[],N=[],m=k.next;continue}if(d&&ni(S,E,A,i),(S.e.f&no)!==0&&(Jr(S.e),u&&(S.a?.unfix(),(y??=new Set).delete(S))),S!==m){if(p!==void 0&&p.has(S)){if(z.length<N.length){var R=N[0],b;k=R.prev;var C=z[0],v=z[z.length-1];for(b=0;b<z.length;b+=1)oo(z[b],R,r);for(b=0;b<N.length;b+=1)p.delete(N[b]);Oe(n,C.prev,v.next),Oe(n,k,C),Oe(n,v,R),m=R,k=v,A-=1,z=[],N=[]}else p.delete(S),oo(S,m,r),Oe(n,S.prev,S.next),Oe(n,S,k===null?n.first:k.next),Oe(n,k,S),k=S;continue}for(z=[],N=[];m!==null&&m.k!==M;)(m.e.f&no)===0&&(p??=new Set).add(m),N.push(m),m=m.next;if(m===null)continue;S=m}z.push(S),k=S,m=S.next}if(m!==null||p!==void 0){for(var w=p===void 0?[]:Qr(p);m!==null;)(m.e.f&no)===0&&w.push(m),m=m.next;var _=w.length;if(_>0){var P=(i&jr)!==0&&h===0?r:null;if(u){for(A=0;A<_;A+=1)w[A].a?.measure();for(A=0;A<_;A+=1)w[A].a?.fix()}$s(n,w,P)}}u&&Gr(()=>{if(y!==void 0)for(S of y)S.a?.apply()}),e.first=n.first&&n.first.e,e.last=k&&k.e;for(var I of o.values())Wt(I.e);o.clear()}function ni(e,t,n,o){(o&Yn)!==0&&nr(e.v,t),(o&Fn)!==0?nr(e.i,n):e.i=n}function _o(e,t,n,o,r,s,i,a,c,u,d){var h=(c&Yn)!==0,f=(c&ks)===0,g=h?f?Ae(r,!1,!1):po(r):r,m=(c&Fn)===0?i:po(i),p={i:m,v:g,k:s,a:null,e:null,prev:n,next:o};try{if(e===null){var k=document.createDocumentFragment();k.append(e=Ur())}return p.e=Xt(()=>a(e,g,m,u),_e),p.e.prev=n&&n.e,p.e.next=o&&o.e,n===null?d||(t.first=p):(n.next=p,n.e.next=p.e),o!==null&&(o.prev=p,o.e.prev=p.e),p}finally{}}function oo(e,t,n){for(var o=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==o;){var i=Ss(s);r.before(s),s=i}}function Oe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function be(e,t,n){nn(()=>{var o=qe(()=>t(e,n?.())||{});if(n&&o?.update){var r=!1,s={};zo(()=>{var i=n();Ms(i),r&&Ds(s,i)&&(s=i,o.update(i))}),r=!0}if(o?.destroy)return()=>o.destroy()})}function ta(e,t){var n=void 0,o;Oo(()=>{n!==(n=t())&&(o&&(Wt(o),o=null),n&&(o=Xt(()=>{nn(()=>n(e))})))})}function oi(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=oi(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function na(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=oi(e))&&(o&&(o+=" "),o+=t);return o}function pt(e){return typeof e=="object"?na(e):e??""}const rr=[...` 	
\r\fÂ \v\uFEFF`];function oa(e,t,n){var o=e==null?"":""+e;if(t&&(o=o?o+" "+t:t),n){for(var r in n)if(n[r])o=o?o+" "+r:r;else if(o.length)for(var s=r.length,i=0;(i=o.indexOf(r,i))>=0;){var a=i+s;(i===0||rr.includes(o[i-1]))&&(a===o.length||rr.includes(o[a]))?o=(i===0?"":o.substring(0,i))+o.substring(a+1):i=a}}return o===""?null:o}function ir(e,t=!1){var n=t?" !important;":";",o="";for(var r in e){var s=e[r];s!=null&&s!==""&&(o+=" "+r+": "+s+n)}return o}function ro(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ra(e,t){if(t){var n="",o,r;if(Array.isArray(t)?(o=t[0],r=t[1]):o=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,i=0,a=!1,c=[];o&&c.push(...Object.keys(o).map(ro)),r&&c.push(...Object.keys(r).map(ro));var u=0,d=-1;const p=e.length;for(var h=0;h<p;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):s?s===f&&(s=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?s=f:f==="("?i++:f===")"&&i--,!a&&s===!1&&i===0){if(f===":"&&d===-1)d=h;else if(f===";"||h===p-1){if(d!==-1){var g=ro(e.substring(u,d).trim());if(!c.includes(g)){f!==";"&&h++;var m=e.substring(u,h).trim();n+=" "+m+";"}}u=h+1,d=-1}}}}return o&&(n+=ir(o)),r&&(n+=ir(r,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function at(e,t,n,o,r,s){var i=e.__className;if(_e||i!==n||i===void 0){var a=oa(n,o,s);(!_e||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a)),e.__className=n}else if(s&&r!==s)for(var c in s){var u=!!s[c];(r==null||u!==!!r[c])&&e.classList.toggle(c,u)}return s}function io(e,t={},n,o){for(var r in n){var s=n[r];t[r]!==s&&(n[r]==null?e.style.removeProperty(r):e.style.setProperty(r,s,o))}}function Ke(e,t,n,o){var r=e.__style;if(_e||r!==t){var s=ra(t,o);(!_e||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}else o&&(Array.isArray(o)?(io(e,n?.[0],o[0]),io(e,n?.[1],o[1],"important")):io(e,n,o));return o}function Cn(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Kn(t))return Ts();for(var o of e.options)o.selected=t.includes(Yt(o));return}for(o of e.options){var r=Yt(o);if(Is(r,t)){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ri(e){var t=new MutationObserver(()=>{Cn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),$r(()=>{t.disconnect()})}function Nn(e,t,n=t){var o=!0;ti(e,"change",r=>{var s=r?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(s),Yt);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");i=a&&Yt(a)}n(i)}),nn(()=>{var r=t();if(Cn(e,r,o),o&&r===void 0){var s=e.querySelector(":checked");s!==null&&(r=Yt(s),n(r))}e.__value=r,o=!1}),ri(e)}function Yt(e){return"__value"in e?e.__value:e.value}const et=Symbol("class"),We=Symbol("style"),ii=Symbol("is custom element"),si=Symbol("is html");function tt(e){if(_e){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;oe(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var r=e.checked;oe(e,"checked",null),e.checked=r}}};e.__on_r=n,Vs(n),Qs()}}function ia(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function oe(e,t,n,o){var r=ai(e);_e&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="loading"&&(e[Rs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&li(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function sa(e,t,n,o,r=!1){var s=ai(e),i=s[ii],a=!s[si];let c=_e&&i;c&&Kt(!1);var u=t||{},d=e.tagName==="OPTION";for(var h in t)h in n||(n[h]=null);n.class?n.class=pt(n.class):(o||n[et])&&(n.class=null),n[We]&&(n.style??=null);var f=li(e);for(const N in n){let E=n[N];if(d&&N==="value"&&E==null){e.value=e.__value="",u[N]=E;continue}if(N==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";at(e,g,E,o,t?.[et],n[et]),u[N]=E,u[et]=n[et];continue}if(N==="style"){Ke(e,E,t?.[We],n[We]),u[N]=E,u[We]=n[We];continue}var m=u[N];if(!(E===m&&!(E===void 0&&e.hasAttribute(N)))){u[N]=E;var p=N[0]+N[1];if(p!=="$$")if(p==="on"){const M={},S="$$"+N;let A=N.slice(2);var k=Us(A);if(Xs(A)&&(A=A.slice(0,-7),M.capture=!0),!k&&m){if(E!=null)continue;e.removeEventListener(A,u[S],M),u[S]=null}if(E!=null)if(k)e[`__${A}`]=E,sn([A]);else{let H=function(X){u[N].call(this,X)};u[S]=Ws(A,e,H,M)}else k&&(e[`__${A}`]=void 0)}else if(N==="style")oe(e,N,E);else if(N==="autofocus")qs(e,!!E);else if(!i&&(N==="__value"||N==="value"&&E!=null))e.value=e.__value=E;else if(N==="selected"&&d)ia(e,E);else{var y=N;a||(y=Gs(y));var z=y==="defaultValue"||y==="defaultChecked";if(E==null&&!i&&!z)if(s[N]=null,y==="value"||y==="checked"){let M=e;const S=t===void 0;if(y==="value"){let A=M.defaultValue;M.removeAttribute(y),M.defaultValue=A,M.value=M.__value=S?A:null}else{let A=M.defaultChecked;M.removeAttribute(y),M.defaultChecked=A,M.checked=S?A:!1}}else e.removeAttribute(N);else z||f.includes(y)&&(i||typeof E!="string")?e[y]=E:typeof E!="function"&&oe(e,y,E)}}}return c&&Kt(!0),u}function lt(e,t,n=[],o=[],r,s=!1){zs(n,o,i=>{var a=void 0,c={},u=e.nodeName==="SELECT",d=!1;if(Oo(()=>{var f=t(...i.map(l)),g=sa(e,a,f,r,s);d&&u&&"value"in f&&Cn(e,f.value);for(let p of Object.getOwnPropertySymbols(c))f[p]||Wt(c[p]);for(let p of Object.getOwnPropertySymbols(f)){var m=f[p];p.description===Os&&(!a||m!==a[p])&&(c[p]&&Wt(c[p]),c[p]=Xt(()=>ta(e,()=>m))),g[p]=m}a=g}),u){var h=e;nn(()=>{Cn(h,a.value,!0),ri(h)})}d=!0})}function ai(e){return e.__attributes??={[ii]:e.nodeName.includes("-"),[si]:e.namespaceURI===Hs}}var sr=new Map;function li(e){var t=sr.get(e.nodeName);if(t)return t;sr.set(e.nodeName,t=[]);for(var n,o=e,r=Element.prototype;r!==o;){n=Ls(o);for(var s in n)n[s].set&&t.push(s);o=qr(o)}return t}function nt(e,t,n=t){var o=Bs(),r=new WeakSet;ti(e,"input",s=>{var i=s?e.defaultValue:e.value;if(i=so(e)?ao(i):i,n(i),kt!==null&&r.add(kt),o&&i!==(i=t())){var a=e.selectionStart,c=e.selectionEnd;e.value=i??"",c!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(c,e.value.length))}}),(_e&&e.defaultValue!==e.value||qe(t)==null&&e.value)&&(n(so(e)?ao(e.value):e.value),kt!==null&&r.add(kt)),zo(()=>{var s=t();e===document.activeElement&&r.has(kt)||so(e)&&s===ao(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function so(e){var t=e.type;return t==="number"||t==="range"}function ao(e){return e===""?null:+e}function aa(e,t,n){var o=Ks(e,t);o&&o.set&&(e[t]=n,$r(()=>{e[t]=null}))}class Vo{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var o=this.#e.get(t)||new Set;return o.add(n),this.#e.set(t,o),this.#o().observe(t,this.#n),()=>{var r=this.#e.get(t);r.delete(n),r.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#o(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){Vo.entries.set(n.target,n);for(var o of this.#e.get(n.target)||[])o(n)}}))}}var la=new Vo({box:"border-box"});function ar(e,t,n){var o=la.observe(e,()=>n(e[t]));nn(()=>(qe(()=>n(e[t])),o))}function ca(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function ua(e,t){var n=e.$$events?.[t.type],o=Kn(n)?n.slice():n==null?[]:[n];for(var r of o)r.call(this,t)}const ut=qt([{role:"user",status:"active"},{role:"admin",status:"active"}]),Xe=qt({active:!1,currentStepID:0}),Ee=qt([{id:0,label:"Start",agent:"system",type:"start",condition:"never",formItems:[]},{id:1,label:"end",agent:"system",type:"end",formItems:[]},{id:2,label:"Start",agent:"system",type:"start",formItems:[]}]);function da(e,t){console.log("open"),D(t,!0)}function fa(e,t){D(t,!1)}var ha=ee('<div class="flex items-center justify-between bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200"><span class="text-gray-700 font-medium mr-5"> </span> <button class="text-white bg-red-500 hover:bg-red-600 rounded-full w-8 h-8 flex items-center justify-center transition" aria-label="Remove Agent">â</button></div>'),ga=(e,t)=>{e.key==="Enter"&&t()},va=ee('<div id="new-agent-form" class="space-y-3 mt-4 bg-gray-50 p-4 rounded-md border border-gray-200"><input type="text" placeholder="Enter new role" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/> <div class="flex justify-evenly space-x-2"><button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition">Submit</button> <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md transition">Cancel</button></div></div>'),ya=ee('<div class="p-6 mx-5 bg-blue-400 rounded-lg shadow-md space-y-4"><h2 class="text-xl font-semibold text-gray-800">agentList</h2> <div class="grid grid-cols-1 gap-4"></div> <button class="mt-4 text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md transition font-medium">+ Add Agent</button> <!></div>');function ma(e,t){re(t,!0);let n=ge(!1),o=ge("");function r(){let h=!1;ut.map(f=>(f.role===l(o)&&(h=!0,f.status="active"),f)),h||ut.push({role:l(o),status:"active"}),D(n,!1),D(o,""),console.log(ut,l(o))}function s(h){ut[Lo(h).i].status="deleted"}var i=ya(),a=B(Y(i),2);rt(a,21,()=>ut,Ft,(h,f,g)=>{var m=ye(),p=se(m);{var k=y=>{var z=ha(),N=Y(z),E=Y(N,!0);K(N);var M=B(N,2);M.__click=()=>s({i:g}),K(z),ce(()=>me(E,l(f).role)),V(y,z)};ae(p,y=>{l(f).status!=="deleted"&&y(k)})}V(h,m)}),K(a);var c=B(a,2);c.__click=[da,n];var u=B(c,2);{var d=h=>{var f=va(),g=Y(f);tt(g),g.__keydown=[ga,r];var m=B(g,2),p=Y(m);p.__click=r;var k=B(p,2);k.__click=[fa,n],K(m),K(f),nt(g,()=>l(o),y=>D(o,y)),V(h,f)};ae(u,h=>{l(n)&&h(d)})}K(i),V(e,i),ie()}sn(["click","keydown"]);var pa={value:()=>{}};function Zn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new _n(n)}function _n(e){this._=e}function wa(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}_n.prototype=Zn.prototype={constructor:_n,on:function(e,t){var n=this._,o=wa(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=_a(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=lr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=lr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _n(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function _a(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function lr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=pa,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var xo="http://www.w3.org/1999/xhtml";const cr={svg:"http://www.w3.org/2000/svg",xhtml:xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cr.hasOwnProperty(t)?{space:cr[t],local:e}:e}function xa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xo&&t.documentElement.namespaceURI===xo?t.createElement(e):t.createElementNS(n,e)}}function ba(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ci(e){var t=Xn(e);return(t.local?ba:xa)(t)}function ka(){}function Bo(e){return e==null?ka:function(){return this.querySelector(e)}}function Sa(e){typeof e!="function"&&(e=Bo(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new Ce(o,this._parents)}function Ea(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ca(){return[]}function ui(e){return e==null?Ca:function(){return this.querySelectorAll(e)}}function Na(e){return function(){return Ea(e.apply(this,arguments))}}function Aa(e){typeof e=="function"?e=Na(e):e=ui(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&(o.push(e.call(c,c.__data__,u,i)),r.push(c));return new Ce(o,r)}function di(e){return function(){return this.matches(e)}}function fi(e){return function(t){return t.matches(e)}}var Pa=Array.prototype.find;function Ma(e){return function(){return Pa.call(this.children,e)}}function Da(){return this.firstElementChild}function Ta(e){return this.select(e==null?Da:Ma(typeof e=="function"?e:fi(e)))}var Ia=Array.prototype.filter;function za(){return Array.from(this.children)}function Oa(e){return function(){return Ia.call(this.children,e)}}function Ha(e){return this.selectAll(e==null?za:Oa(typeof e=="function"?e:fi(e)))}function Ra(e){typeof e!="function"&&(e=di(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new Ce(o,this._parents)}function hi(e){return new Array(e.length)}function La(){return new Ce(this._enter||this._groups.map(hi),this._parents)}function An(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}An.prototype={constructor:An,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Va(e){return function(){return e}}function Ba(e,t,n,o,r,s){for(var i=0,a,c=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new An(e,s[i]);for(;i<c;++i)(a=t[i])&&(r[i]=a)}function Ka(e,t,n,o,r,s,i){var a,c,u=new Map,d=t.length,h=s.length,f=new Array(d),g;for(a=0;a<d;++a)(c=t[a])&&(f[a]=g=i.call(c,c.__data__,a,t)+"",u.has(g)?r[a]=c:u.set(g,c));for(a=0;a<h;++a)g=i.call(e,s[a],a,s)+"",(c=u.get(g))?(o[a]=c,c.__data__=s[a],u.delete(g)):n[a]=new An(e,s[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(f[a])===c&&(r[a]=c)}function Fa(e){return e.__data__}function Ya(e,t){if(!arguments.length)return Array.from(this,Fa);var n=t?Ka:Ba,o=this._parents,r=this._groups;typeof e!="function"&&(e=Va(e));for(var s=r.length,i=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var d=o[u],h=r[u],f=h.length,g=Za(e.call(d,d&&d.__data__,u,o)),m=g.length,p=a[u]=new Array(m),k=i[u]=new Array(m),y=c[u]=new Array(f);n(d,h,p,k,y,g,t);for(var z=0,N=0,E,M;z<m;++z)if(E=p[z]){for(z>=N&&(N=z+1);!(M=k[N])&&++N<m;);E._next=M||null}}return i=new Ce(i,o),i._enter=a,i._exit=c,i}function Za(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xa(){return new Ce(this._exit||this._groups.map(hi),this._parents)}function Wa(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function qa(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),c=0;c<i;++c)for(var u=n[c],d=o[c],h=u.length,f=a[c]=new Array(h),g,m=0;m<h;++m)(g=u[m]||d[m])&&(f[m]=g);for(;c<r;++c)a[c]=n[c];return new Ce(a,this._parents)}function Ga(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Ua(e){e||(e=Qa);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,c=r[s]=new Array(a),u,d=0;d<a;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Ce(r,this._parents).order()}function Qa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ja(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ja(){return Array.from(this)}function $a(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function el(){let e=0;for(const t of this)++e;return e}function tl(){return!this.node()}function nl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function ol(e){return function(){this.removeAttribute(e)}}function rl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function il(e,t){return function(){this.setAttribute(e,t)}}function sl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function al(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ll(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cl(e,t){var n=Xn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?rl:ol:typeof t=="function"?n.local?ll:al:n.local?sl:il)(n,t))}function gi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ul(e){return function(){this.style.removeProperty(e)}}function dl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function hl(e,t,n){return arguments.length>1?this.each((t==null?ul:typeof t=="function"?fl:dl)(e,t,n??"")):At(this.node(),e)}function At(e,t){return e.style.getPropertyValue(t)||gi(e).getComputedStyle(e,null).getPropertyValue(t)}function gl(e){return function(){delete this[e]}}function vl(e,t){return function(){this[e]=t}}function yl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ml(e,t){return arguments.length>1?this.each((t==null?gl:typeof t=="function"?yl:vl)(e,t)):this.node()[e]}function vi(e){return e.trim().split(/^|\s+/)}function Ko(e){return e.classList||new yi(e)}function yi(e){this._node=e,this._names=vi(e.getAttribute("class")||"")}yi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mi(e,t){for(var n=Ko(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function pi(e,t){for(var n=Ko(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function pl(e){return function(){mi(this,e)}}function wl(e){return function(){pi(this,e)}}function _l(e,t){return function(){(t.apply(this,arguments)?mi:pi)(this,e)}}function xl(e,t){var n=vi(e+"");if(arguments.length<2){for(var o=Ko(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?_l:t?pl:wl)(n,t))}function bl(){this.textContent=""}function kl(e){return function(){this.textContent=e}}function Sl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function El(e){return arguments.length?this.each(e==null?bl:(typeof e=="function"?Sl:kl)(e)):this.node().textContent}function Cl(){this.innerHTML=""}function Nl(e){return function(){this.innerHTML=e}}function Al(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Pl(e){return arguments.length?this.each(e==null?Cl:(typeof e=="function"?Al:Nl)(e)):this.node().innerHTML}function Ml(){this.nextSibling&&this.parentNode.appendChild(this)}function Dl(){return this.each(Ml)}function Tl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Il(){return this.each(Tl)}function zl(e){var t=typeof e=="function"?e:ci(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ol(){return null}function Hl(e,t){var n=typeof e=="function"?e:ci(e),o=t==null?Ol:typeof t=="function"?t:Bo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Rl(){var e=this.parentNode;e&&e.removeChild(this)}function Ll(){return this.each(Rl)}function Vl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kl(e){return this.select(e?Bl:Vl)}function Fl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Yl(e){return function(t){e.call(this,t,this.__data__)}}function Zl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Xl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function Wl(e,t,n){return function(){var o=this.__on,r,s=Yl(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function ql(e,t,n){var o=Zl(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(r=0,d=a[c];r<s;++r)if((i=o[r]).type===d.type&&i.name===d.name)return d.value}return}for(a=t?Wl:Xl,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function wi(e,t,n){var o=gi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Gl(e,t){return function(){return wi(this,e,t)}}function Ul(e,t){return function(){return wi(this,e,t.apply(this,arguments))}}function Ql(e,t){return this.each((typeof t=="function"?Ul:Gl)(e,t))}function*Jl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var _i=[null];function Ce(e,t){this._groups=e,this._parents=t}function ln(){return new Ce([[document.documentElement]],_i)}function jl(){return this}Ce.prototype=ln.prototype={constructor:Ce,select:Sa,selectAll:Aa,selectChild:Ta,selectChildren:Ha,filter:Ra,data:Ya,enter:La,exit:Xa,join:Wa,merge:qa,selection:jl,order:Ga,sort:Ua,call:Ja,nodes:ja,node:$a,size:el,empty:tl,each:nl,attr:cl,style:hl,property:ml,classed:xl,text:El,html:Pl,raise:Dl,lower:Il,append:zl,insert:Hl,remove:Ll,clone:Kl,datum:Fl,on:ql,dispatch:Ql,[Symbol.iterator]:Jl};function Me(e){return typeof e=="string"?new Ce([[document.querySelector(e)]],[document.documentElement]):new Ce([[e]],_i)}function $l(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Re(e,t){if(e=$l(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const ec={passive:!1},Ut={capture:!0,passive:!1};function lo(e){e.stopImmediatePropagation()}function Ct(e){e.preventDefault(),e.stopImmediatePropagation()}function xi(e){var t=e.document.documentElement,n=Me(e).on("dragstart.drag",Ct,Ut);"onselectstart"in t?n.on("selectstart.drag",Ct,Ut):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function bi(e,t){var n=e.document.documentElement,o=Me(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ct,Ut),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fn=e=>()=>e;function bo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}bo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function tc(e){return!e.ctrlKey&&!e.button}function nc(){return this.parentNode}function oc(e,t){return t??{x:e.x,y:e.y}}function rc(){return navigator.maxTouchPoints||"ontouchstart"in this}function ic(){var e=tc,t=nc,n=oc,o=rc,r={},s=Zn("start","drag","end"),i=0,a,c,u,d,h=0;function f(E){E.on("mousedown.drag",g).filter(o).on("touchstart.drag",k).on("touchmove.drag",y,ec).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,M){if(!(d||!e.call(this,E,M))){var S=N(this,t.call(this,E,M),E,M,"mouse");S&&(Me(E.view).on("mousemove.drag",m,Ut).on("mouseup.drag",p,Ut),xi(E.view),lo(E),u=!1,a=E.clientX,c=E.clientY,S("start",E))}}function m(E){if(Ct(E),!u){var M=E.clientX-a,S=E.clientY-c;u=M*M+S*S>h}r.mouse("drag",E)}function p(E){Me(E.view).on("mousemove.drag mouseup.drag",null),bi(E.view,u),Ct(E),r.mouse("end",E)}function k(E,M){if(e.call(this,E,M)){var S=E.changedTouches,A=t.call(this,E,M),H=S.length,X,J;for(X=0;X<H;++X)(J=N(this,A,E,M,S[X].identifier,S[X]))&&(lo(E),J("start",E,S[X]))}}function y(E){var M=E.changedTouches,S=M.length,A,H;for(A=0;A<S;++A)(H=r[M[A].identifier])&&(Ct(E),H("drag",E,M[A]))}function z(E){var M=E.changedTouches,S=M.length,A,H;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),A=0;A<S;++A)(H=r[M[A].identifier])&&(lo(E),H("end",E,M[A]))}function N(E,M,S,A,H,X){var J=s.copy(),R=Re(X||S,M),b,C,v;if((v=n.call(E,new bo("beforestart",{sourceEvent:S,target:f,identifier:H,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:J}),A))!=null)return b=v.x-R[0]||0,C=v.y-R[1]||0,function w(_,P,I){var T=R,O;switch(_){case"start":r[H]=w,O=i++;break;case"end":delete r[H],--i;case"drag":R=Re(I||P,M),O=i;break}J.call(_,E,new bo(_,{sourceEvent:P,subject:v,target:f,identifier:H,active:O,x:R[0]+b,y:R[1]+C,dx:R[0]-T[0],dy:R[1]-T[1],dispatch:J}),A)}}return f.filter=function(E){return arguments.length?(e=typeof E=="function"?E:fn(!!E),f):e},f.container=function(E){return arguments.length?(t=typeof E=="function"?E:fn(E),f):t},f.subject=function(E){return arguments.length?(n=typeof E=="function"?E:fn(E),f):n},f.touchable=function(E){return arguments.length?(o=typeof E=="function"?E:fn(!!E),f):o},f.on=function(){var E=s.on.apply(s,arguments);return E===s?f:E},f.clickDistance=function(E){return arguments.length?(h=(E=+E)*E,f):Math.sqrt(h)},f}function Fo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ki(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function cn(){}var Qt=.7,Pn=1/Qt,Nt="\\s*([+-]?\\d+)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sc=/^#([0-9a-f]{3,8})$/,ac=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),lc=new RegExp(`^rgb\\(${Be},${Be},${Be}\\)$`),cc=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Jt}\\)$`),uc=new RegExp(`^rgba\\(${Be},${Be},${Be},${Jt}\\)$`),dc=new RegExp(`^hsl\\(${Jt},${Be},${Be}\\)$`),fc=new RegExp(`^hsla\\(${Jt},${Be},${Be},${Jt}\\)$`),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fo(cn,gt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dr,formatHex:dr,formatHex8:hc,formatHsl:gc,formatRgb:fr,toString:fr});function dr(){return this.rgb().formatHex()}function hc(){return this.rgb().formatHex8()}function gc(){return Si(this).formatHsl()}function fr(){return this.rgb().formatRgb()}function gt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hr(t):n===3?new ke(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ac.exec(e))?new ke(t[1],t[2],t[3],1):(t=lc.exec(e))?new ke(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cc.exec(e))?hn(t[1],t[2],t[3],t[4]):(t=uc.exec(e))?hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dc.exec(e))?yr(t[1],t[2]/100,t[3]/100,1):(t=fc.exec(e))?yr(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?hr(ur[e]):e==="transparent"?new ke(NaN,NaN,NaN,0):null}function hr(e){return new ke(e>>16&255,e>>8&255,e&255,1)}function hn(e,t,n,o){return o<=0&&(e=t=n=NaN),new ke(e,t,n,o)}function vc(e){return e instanceof cn||(e=gt(e)),e?(e=e.rgb(),new ke(e.r,e.g,e.b,e.opacity)):new ke}function ko(e,t,n,o){return arguments.length===1?vc(e):new ke(e,t,n,o??1)}function ke(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Fo(ke,ko,ki(cn,{brighter(e){return e=e==null?Pn:Math.pow(Pn,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qt:Math.pow(Qt,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ke(ft(this.r),ft(this.g),ft(this.b),Mn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gr,formatHex:gr,formatHex8:yc,formatRgb:vr,toString:vr}));function gr(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}`}function yc(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}${dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function vr(){const e=Mn(this.opacity);return`${e===1?"rgb(":"rgba("}${ft(this.r)}, ${ft(this.g)}, ${ft(this.b)}${e===1?")":`, ${e})`}`}function Mn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dt(e){return e=ft(e),(e<16?"0":"")+e.toString(16)}function yr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new De(e,t,n,o)}function Si(e){if(e instanceof De)return new De(e.h,e.s,e.l,e.opacity);if(e instanceof cn||(e=gt(e)),!e)return new De;if(e instanceof De)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,a=s-r,c=(s+r)/2;return a?(t===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-t)/a+2:i=(t-n)/a+4,a/=c<.5?s+r:2-s-r,i*=60):a=c>0&&c<1?0:i,new De(i,a,c,e.opacity)}function mc(e,t,n,o){return arguments.length===1?Si(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Fo(De,mc,ki(cn,{brighter(e){return e=e==null?Pn:Math.pow(Pn,e),new De(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qt:Math.pow(Qt,e),new De(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ke(co(e>=240?e-240:e+120,r,o),co(e,r,o),co(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new De(mr(this.h),gn(this.s),gn(this.l),Mn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mn(this.opacity);return`${e===1?"hsl(":"hsla("}${mr(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mr(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function co(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Yo=e=>()=>e;function pc(e,t){return function(n){return e+n*t}}function wc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function _c(e){return(e=+e)==1?Ei:function(t,n){return n-t?wc(t,n,e):Yo(isNaN(t)?n:t)}}function Ei(e,t){var n=t-e;return n?pc(e,n):Yo(isNaN(e)?t:e)}const Dn=function e(t){var n=_c(t);function o(r,s){var i=n((r=ko(r)).r,(s=ko(s)).r),a=n(r.g,s.g),c=n(r.b,s.b),u=Ei(r.opacity,s.opacity);return function(d){return r.r=i(d),r.g=a(d),r.b=c(d),r.opacity=u(d),r+""}}return o.gamma=e,o}(1);function xc(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(s){for(r=0;r<n;++r)o[r]=e[r]*(1-s)+t[r]*s;return o}}function bc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kc(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),s=new Array(n),i;for(i=0;i<o;++i)r[i]=Zt(e[i],t[i]);for(;i<n;++i)s[i]=t[i];return function(a){for(i=0;i<o;++i)s[i]=r[i](a);return s}}function Sc(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Le(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ec(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Zt(e[r],t[r]):o[r]=t[r];return function(s){for(r in n)o[r]=n[r](s);return o}}var So=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uo=new RegExp(So.source,"g");function Cc(e){return function(){return e}}function Nc(e){return function(t){return e(t)+""}}function Ci(e,t){var n=So.lastIndex=uo.lastIndex=0,o,r,s,i=-1,a=[],c=[];for(e=e+"",t=t+"";(o=So.exec(e))&&(r=uo.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,c.push({i,x:Le(o,r)})),n=uo.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?c[0]?Nc(c[0].x):Cc(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)a[(h=c[d]).i]=h.x(u);return a.join("")})}function Zt(e,t){var n=typeof t,o;return t==null||n==="boolean"?Yo(t):(n==="number"?Le:n==="string"?(o=gt(t))?(t=o,Dn):Ci:t instanceof gt?Dn:t instanceof Date?Sc:bc(t)?xc:Array.isArray(t)?kc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ec:Le)(e,t)}var pr=180/Math.PI,Eo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ni(e,t,n,o,r,s){var i,a,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*pr,skewX:Math.atan(c)*pr,scaleX:i,scaleY:a}}var vn;function Ac(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Eo:Ni(t.a,t.b,t.c,t.d,t.e,t.f)}function Pc(e){return e==null||(vn||(vn=document.createElementNS("http://www.w3.org/2000/svg","g")),vn.setAttribute("transform",e),!(e=vn.transform.baseVal.consolidate()))?Eo:(e=e.matrix,Ni(e.a,e.b,e.c,e.d,e.e,e.f))}function Ai(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function s(u,d,h,f,g,m){if(u!==h||d!==f){var p=g.push("translate(",null,t,null,n);m.push({i:p-4,x:Le(u,h)},{i:p-2,x:Le(d,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function i(u,d,h,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:h.push(r(h)+"rotate(",null,o)-2,x:Le(u,d)})):d&&h.push(r(h)+"rotate("+d+o)}function a(u,d,h,f){u!==d?f.push({i:h.push(r(h)+"skewX(",null,o)-2,x:Le(u,d)}):d&&h.push(r(h)+"skewX("+d+o)}function c(u,d,h,f,g,m){if(u!==h||d!==f){var p=g.push(r(g)+"scale(",null,",",null,")");m.push({i:p-4,x:Le(u,h)},{i:p-2,x:Le(d,f)})}else(h!==1||f!==1)&&g.push(r(g)+"scale("+h+","+f+")")}return function(u,d){var h=[],f=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,h,f),i(u.rotate,d.rotate,h,f),a(u.skewX,d.skewX,h,f),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,f),u=d=null,function(g){for(var m=-1,p=f.length,k;++m<p;)h[(k=f[m]).i]=k.x(g);return h.join("")}}}var Mc=Ai(Ac,"px, ","px)","deg)"),Dc=Ai(Pc,", ",")",")"),Tc=1e-12;function wr(e){return((e=Math.exp(e))+1/e)/2}function Ic(e){return((e=Math.exp(e))-1/e)/2}function zc(e){return((e=Math.exp(2*e))-1)/(e+1)}const xn=function e(t,n,o){function r(s,i){var a=s[0],c=s[1],u=s[2],d=i[0],h=i[1],f=i[2],g=d-a,m=h-c,p=g*g+m*m,k,y;if(p<Tc)y=Math.log(f/u)/t,k=function(A){return[a+A*g,c+A*m,u*Math.exp(t*A*y)]};else{var z=Math.sqrt(p),N=(f*f-u*u+o*p)/(2*u*n*z),E=(f*f-u*u-o*p)/(2*f*n*z),M=Math.log(Math.sqrt(N*N+1)-N),S=Math.log(Math.sqrt(E*E+1)-E);y=(S-M)/t,k=function(A){var H=A*y,X=wr(M),J=u/(n*z)*(X*zc(t*H+M)-Ic(M));return[a+J*g,c+J*m,u*X/wr(t*H+M)]}}return k.duration=y*1e3*t/Math.SQRT2,k}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,c=a*a;return e(i,a,c)},r}(Math.SQRT2,2,4);var Pt=0,Vt=0,Rt=0,Pi=1e3,Tn,Bt,In=0,vt=0,Wn=0,jt=typeof performance=="object"&&performance.now?performance:Date,Mi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zo(){return vt||(Mi(Oc),vt=jt.now()+Wn)}function Oc(){vt=0}function zn(){this._call=this._time=this._next=null}zn.prototype=Di.prototype={constructor:zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zo():+n)+(t==null?0:+t),!this._next&&Bt!==this&&(Bt?Bt._next=this:Tn=this,Bt=this),this._call=e,this._time=n,Co()},stop:function(){this._call&&(this._call=null,this._time=1/0,Co())}};function Di(e,t,n){var o=new zn;return o.restart(e,t,n),o}function Hc(){Zo(),++Pt;for(var e=Tn,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pt}function _r(){vt=(In=jt.now())+Wn,Pt=Vt=0;try{Hc()}finally{Pt=0,Lc(),vt=0}}function Rc(){var e=jt.now(),t=e-In;t>Pi&&(Wn-=t,In=e)}function Lc(){for(var e,t=Tn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Tn=n);Bt=e,Co(o)}function Co(e){if(!Pt){Vt&&(Vt=clearTimeout(Vt));var t=e-vt;t>24?(e<1/0&&(Vt=setTimeout(_r,e-jt.now()-Wn)),Rt&&(Rt=clearInterval(Rt))):(Rt||(In=jt.now(),Rt=setInterval(Rc,Pi)),Pt=1,Mi(_r))}}function xr(e,t,n){var o=new zn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Vc=Zn("start","end","cancel","interrupt"),Bc=[],Ti=0,br=1,No=2,bn=3,kr=4,Ao=5,kn=6;function qn(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Kc(e,n,{name:t,index:o,group:r,on:Vc,tween:Bc,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ti})}function Xo(e,t){var n=Te(e,t);if(n.state>Ti)throw new Error("too late; already scheduled");return n}function Ye(e,t){var n=Te(e,t);if(n.state>bn)throw new Error("too late; already running");return n}function Te(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Kc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Di(s,0,n.time);function s(u){n.state=br,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,h,f,g;if(n.state!==br)return c();for(d in o)if(g=o[d],g.name===n.name){if(g.state===bn)return xr(i);g.state===kr?(g.state=kn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[d]):+d<t&&(g.state=kn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[d])}if(xr(function(){n.state===bn&&(n.state=kr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=No,n.on.call("start",e,e.__data__,n.index,n.group),n.state===No){for(n.state=bn,r=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(g=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=g);r.length=h+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Ao,1),h=-1,f=r.length;++h<f;)r[h].call(e,d);n.state===Ao&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=kn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Sn(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>No&&o.state<Ao,o.state=kn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function Fc(e){return this.each(function(){Sn(this,e)})}function Yc(e,t){var n,o;return function(){var r=Ye(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Zc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Ye(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}s.tween=r}}function Xc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Te(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?Yc:Zc)(n,e,t))}function Wo(e,t,n){var o=e._id;return e.each(function(){var r=Ye(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Te(r,o).value[t]}}function Ii(e,t){var n;return(typeof t=="number"?Le:t instanceof gt?Dn:(n=gt(t))?(t=n,Dn):Ci)(e,t)}function Wc(e){return function(){this.removeAttribute(e)}}function qc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gc(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function Uc(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function Qc(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function Jc(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function jc(e,t){var n=Xn(e),o=n==="transform"?Dc:Ii;return this.attrTween(e,typeof t=="function"?(n.local?Jc:Qc)(n,o,Wo(this,"attr."+e,t)):t==null?(n.local?qc:Wc)(n):(n.local?Uc:Gc)(n,o,t))}function $c(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function eu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tu(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&eu(e,s)),n}return r._value=t,r}function nu(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&$c(e,s)),n}return r._value=t,r}function ou(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Xn(e);return this.tween(n,(o.local?tu:nu)(o,t))}function ru(e,t){return function(){Xo(this,e).delay=+t.apply(this,arguments)}}function iu(e,t){return t=+t,function(){Xo(this,e).delay=t}}function su(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ru:iu)(t,e)):Te(this.node(),t).delay}function au(e,t){return function(){Ye(this,e).duration=+t.apply(this,arguments)}}function lu(e,t){return t=+t,function(){Ye(this,e).duration=t}}function cu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?au:lu)(t,e)):Te(this.node(),t).duration}function uu(e,t){if(typeof t!="function")throw new Error;return function(){Ye(this,e).ease=t}}function du(e){var t=this._id;return arguments.length?this.each(uu(t,e)):Te(this.node(),t).ease}function fu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ye(this,e).ease=n}}function hu(e){if(typeof e!="function")throw new Error;return this.each(fu(this._id,e))}function gu(e){typeof e!="function"&&(e=di(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new Je(o,this._parents,this._name,this._id)}function vu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var c=t[a],u=n[a],d=c.length,h=i[a]=new Array(d),f,g=0;g<d;++g)(f=c[g]||u[g])&&(h[g]=f);for(;a<o;++a)i[a]=t[a];return new Je(i,this._parents,this._name,this._id)}function yu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mu(e,t,n){var o,r,s=yu(t)?Xo:Ye;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function pu(e,t){var n=this._id;return arguments.length<2?Te(this.node(),n).on.on(e):this.each(mu(n,e,t))}function wu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _u(){return this.on("end.remove",wu(this._id))}function xu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bo(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],c=a.length,u=s[i]=new Array(c),d,h,f=0;f<c;++f)(d=a[f])&&(h=e.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),u[f]=h,qn(u[f],t,n,f,u,Te(d,n)));return new Je(s,this._parents,t,n)}function bu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ui(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var c=o[a],u=c.length,d,h=0;h<u;++h)if(d=c[h]){for(var f=e.call(d,d.__data__,h,c),g,m=Te(d,n),p=0,k=f.length;p<k;++p)(g=f[p])&&qn(g,t,n,p,f,m);s.push(f),i.push(d)}return new Je(s,i,t,n)}var ku=ln.prototype.constructor;function Su(){return new ku(this._groups,this._parents)}function Eu(e,t){var n,o,r;return function(){var s=At(this,e),i=(this.style.removeProperty(e),At(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function zi(e){return function(){this.style.removeProperty(e)}}function Cu(e,t,n){var o,r=n+"",s;return function(){var i=At(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function Nu(e,t,n){var o,r,s;return function(){var i=At(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),At(this,e))),i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a))}}function Au(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var c=Ye(this,e),u=c.on,d=c.value[s]==null?a||(a=zi(t)):void 0;(u!==n||r!==d)&&(o=(n=u).copy()).on(i,r=d),c.on=o}}function Pu(e,t,n){var o=(e+="")=="transform"?Mc:Ii;return t==null?this.styleTween(e,Eu(e,o)).on("end.style."+e,zi(e)):typeof t=="function"?this.styleTween(e,Nu(e,o,Wo(this,"style."+e,t))).each(Au(this._id,e)):this.styleTween(e,Cu(e,o,t),n).on("end.style."+e,null)}function Mu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Du(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&Mu(e,i,n)),o}return s._value=t,s}function Tu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Du(e,t,n??""))}function Iu(e){return function(){this.textContent=e}}function zu(e){return function(){var t=e(this);this.textContent=t??""}}function Ou(e){return this.tween("text",typeof e=="function"?zu(Wo(this,"text",e)):Iu(e==null?"":e+""))}function Hu(e){return function(t){this.textContent=e.call(this,t)}}function Ru(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Hu(r)),t}return o._value=e,o}function Lu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ru(e))}function Vu(){for(var e=this._name,t=this._id,n=Oi(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,u=0;u<a;++u)if(c=i[u]){var d=Te(c,t);qn(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Je(o,this._parents,e,n)}function Bu(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},c={value:function(){--r===0&&s()}};n.each(function(){var u=Ye(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),r===0&&s()})}var Ku=0;function Je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Oi(){return++Ku}var Ze=ln.prototype;Je.prototype={constructor:Je,select:xu,selectAll:bu,selectChild:Ze.selectChild,selectChildren:Ze.selectChildren,filter:gu,merge:vu,selection:Su,transition:Vu,call:Ze.call,nodes:Ze.nodes,node:Ze.node,size:Ze.size,empty:Ze.empty,each:Ze.each,on:pu,attr:jc,attrTween:ou,style:Pu,styleTween:Tu,text:Ou,textTween:Lu,remove:_u,tween:Xc,delay:su,duration:cu,ease:du,easeVarying:hu,end:Bu,[Symbol.iterator]:Ze[Symbol.iterator]};function Fu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Yu={time:null,delay:0,duration:250,ease:Fu};function Zu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Xu(e){var t,n;e instanceof Je?(t=e._id,e=e._name):(t=Oi(),(n=Yu).time=Zo(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&qn(c,e,t,u,i,n||Zu(c,t));return new Je(o,this._parents,e,t)}ln.prototype.interrupt=Fc;ln.prototype.transition=Xu;const yn=e=>()=>e;function Wu(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Ge(e,t,n){this.k=e,this.x=t,this.y=n}Ge.prototype={constructor:Ge,scale:function(e){return e===1?this:new Ge(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ge(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gn=new Ge(1,0,0);Hi.prototype=Ge.prototype;function Hi(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Gn;return e.__zoom}function fo(e){e.stopImmediatePropagation()}function Lt(e){e.preventDefault(),e.stopImmediatePropagation()}function qu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Gu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Sr(){return this.__zoom||Gn}function Uu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Qu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ju(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function ju(){var e=qu,t=Gu,n=Ju,o=Uu,r=Qu,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,c=xn,u=Zn("start","zoom","end"),d,h,f,g=500,m=150,p=0,k=10;function y(v){v.property("__zoom",Sr).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",J).filter(r).on("touchstart.zoom",R).on("touchmove.zoom",b).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(v,w,_,P){var I=v.selection?v.selection():v;I.property("__zoom",Sr),v!==I?M(v,w,_,P):I.interrupt().each(function(){S(this,arguments).event(P).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},y.scaleBy=function(v,w,_,P){y.scaleTo(v,function(){var I=this.__zoom.k,T=typeof w=="function"?w.apply(this,arguments):w;return I*T},_,P)},y.scaleTo=function(v,w,_,P){y.transform(v,function(){var I=t.apply(this,arguments),T=this.__zoom,O=_==null?E(I):typeof _=="function"?_.apply(this,arguments):_,L=T.invert(O),U=typeof w=="function"?w.apply(this,arguments):w;return n(N(z(T,U),O,L),I,i)},_,P)},y.translateBy=function(v,w,_,P){y.transform(v,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),i)},null,P)},y.translateTo=function(v,w,_,P,I){y.transform(v,function(){var T=t.apply(this,arguments),O=this.__zoom,L=P==null?E(T):typeof P=="function"?P.apply(this,arguments):P;return n(Gn.translate(L[0],L[1]).scale(O.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof _=="function"?-_.apply(this,arguments):-_),T,i)},P,I)};function z(v,w){return w=Math.max(s[0],Math.min(s[1],w)),w===v.k?v:new Ge(w,v.x,v.y)}function N(v,w,_){var P=w[0]-_[0]*v.k,I=w[1]-_[1]*v.k;return P===v.x&&I===v.y?v:new Ge(v.k,P,I)}function E(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function M(v,w,_,P){v.on("start.zoom",function(){S(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(P).end()}).tween("zoom",function(){var I=this,T=arguments,O=S(I,T).event(P),L=t.apply(I,T),U=_==null?E(L):typeof _=="function"?_.apply(I,T):_,G=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),q=I.__zoom,Q=typeof w=="function"?w.apply(I,T):w,Z=c(q.invert(U).concat(G/q.k),Q.invert(U).concat(G/Q.k));return function(W){if(W===1)W=Q;else{var $=Z(W),ne=G/$[2];W=new Ge(ne,U[0]-$[0]*ne,U[1]-$[1]*ne)}O.zoom(null,W)}})}function S(v,w,_){return!_&&v.__zooming||new A(v,w)}function A(v,w){this.that=v,this.args=w,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,w),this.taps=0}A.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,w){return this.mouse&&v!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var w=Me(this.that).datum();u.call(v,this.that,new Wu(v,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),w)}};function H(v,...w){if(!e.apply(this,arguments))return;var _=S(this,w).event(v),P=this.__zoom,I=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,o.apply(this,arguments)))),T=Re(v);if(_.wheel)(_.mouse[0][0]!==T[0]||_.mouse[0][1]!==T[1])&&(_.mouse[1]=P.invert(_.mouse[0]=T)),clearTimeout(_.wheel);else{if(P.k===I)return;_.mouse=[T,P.invert(T)],Sn(this),_.start()}Lt(v),_.wheel=setTimeout(O,m),_.zoom("mouse",n(N(z(P,I),_.mouse[0],_.mouse[1]),_.extent,i));function O(){_.wheel=null,_.end()}}function X(v,...w){if(f||!e.apply(this,arguments))return;var _=v.currentTarget,P=S(this,w,!0).event(v),I=Me(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",G,!0),T=Re(v,_),O=v.clientX,L=v.clientY;xi(v.view),fo(v),P.mouse=[T,this.__zoom.invert(T)],Sn(this),P.start();function U(q){if(Lt(q),!P.moved){var Q=q.clientX-O,Z=q.clientY-L;P.moved=Q*Q+Z*Z>p}P.event(q).zoom("mouse",n(N(P.that.__zoom,P.mouse[0]=Re(q,_),P.mouse[1]),P.extent,i))}function G(q){I.on("mousemove.zoom mouseup.zoom",null),bi(q.view,P.moved),Lt(q),P.event(q).end()}}function J(v,...w){if(e.apply(this,arguments)){var _=this.__zoom,P=Re(v.changedTouches?v.changedTouches[0]:v,this),I=_.invert(P),T=_.k*(v.shiftKey?.5:2),O=n(N(z(_,T),P,I),t.apply(this,w),i);Lt(v),a>0?Me(this).transition().duration(a).call(M,O,P,v):Me(this).call(y.transform,O,P,v)}}function R(v,...w){if(e.apply(this,arguments)){var _=v.touches,P=_.length,I=S(this,w,v.changedTouches.length===P).event(v),T,O,L,U;for(fo(v),O=0;O<P;++O)L=_[O],U=Re(L,this),U=[U,this.__zoom.invert(U),L.identifier],I.touch0?!I.touch1&&I.touch0[2]!==U[2]&&(I.touch1=U,I.taps=0):(I.touch0=U,T=!0,I.taps=1+!!d);d&&(d=clearTimeout(d)),T&&(I.taps<2&&(h=U[0],d=setTimeout(function(){d=null},g)),Sn(this),I.start())}}function b(v,...w){if(this.__zooming){var _=S(this,w).event(v),P=v.changedTouches,I=P.length,T,O,L,U;for(Lt(v),T=0;T<I;++T)O=P[T],L=Re(O,this),_.touch0&&_.touch0[2]===O.identifier?_.touch0[0]=L:_.touch1&&_.touch1[2]===O.identifier&&(_.touch1[0]=L);if(O=_.that.__zoom,_.touch1){var G=_.touch0[0],q=_.touch0[1],Q=_.touch1[0],Z=_.touch1[1],W=(W=Q[0]-G[0])*W+(W=Q[1]-G[1])*W,$=($=Z[0]-q[0])*$+($=Z[1]-q[1])*$;O=z(O,Math.sqrt(W/$)),L=[(G[0]+Q[0])/2,(G[1]+Q[1])/2],U=[(q[0]+Z[0])/2,(q[1]+Z[1])/2]}else if(_.touch0)L=_.touch0[0],U=_.touch0[1];else return;_.zoom("touch",n(N(O,L,U),_.extent,i))}}function C(v,...w){if(this.__zooming){var _=S(this,w).event(v),P=v.changedTouches,I=P.length,T,O;for(fo(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),T=0;T<I;++T)O=P[T],_.touch0&&_.touch0[2]===O.identifier?delete _.touch0:_.touch1&&_.touch1[2]===O.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(O=Re(O,this),Math.hypot(h[0]-O[0],h[1]-O[1])<k)){var L=Me(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return y.wheelDelta=function(v){return arguments.length?(o=typeof v=="function"?v:yn(+v),y):o},y.filter=function(v){return arguments.length?(e=typeof v=="function"?v:yn(!!v),y):e},y.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:yn(!!v),y):r},y.extent=function(v){return arguments.length?(t=typeof v=="function"?v:yn([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),y):t},y.scaleExtent=function(v){return arguments.length?(s[0]=+v[0],s[1]=+v[1],y):[s[0],s[1]]},y.translateExtent=function(v){return arguments.length?(i[0][0]=+v[0][0],i[1][0]=+v[1][0],i[0][1]=+v[0][1],i[1][1]=+v[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(v){return arguments.length?(n=v,y):n},y.duration=function(v){return arguments.length?(a=+v,y):a},y.interpolate=function(v){return arguments.length?(c=v,y):c},y.on=function(){var v=u.on.apply(u,arguments);return v===u?y:v},y.clickDistance=function(v){return arguments.length?(p=(v=+v)*v,y):Math.sqrt(p)},y.tapDistance=function(v){return arguments.length?(k=+v,y):k},y}const $t={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Po=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ri=["Enter"," ","Escape"],$u={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Mt;(function(e){e.Strict="strict",e.Loose="loose"})(Mt||(Mt={}));var it;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(it||(it={}));var On;(function(e){e.Partial="partial",e.Full="full"})(On||(On={}));const Mo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ot;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ot||(ot={}));var Hn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Hn||(Hn={}));var j;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(j||(j={}));const Er={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top};function ed(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Cr(e,t,n){if(!n)return;const o=[];e.forEach((r,s)=>{t?.has(s)||o.push(r)}),o.length&&n(o)}function td(e){return e===null?null:e?"valid":"invalid"}const Li=e=>"id"in e&&"source"in e&&"target"in e,nd=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),qo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),un=(e,t=[0,0])=>{const{width:n,height:o}=wt(e),r=e.origin??t,s=n*r[0],i=o*r[1];return{x:e.position.x-s,y:e.position.y-i}},od=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const s=typeof r=="string";let i=!t.nodeLookup&&!s?r:void 0;t.nodeLookup&&(i=s?t.nodeLookup.get(r):qo(r)?r:t.nodeLookup.get(r.id));const a=i?Rn(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Qn(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Jn(n)},Un=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=Rn(o);n=Qn(n,r)}}),Jn(n)},Go=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1)=>{const a={...dn(t,[n,o,r]),width:t.width/r,height:t.height/r},c=[];for(const u of e.values()){const{measured:d,selectable:h=!0,hidden:f=!1}=u;if(i&&!h||f)continue;const g=d.width??u.width??u.initialWidth??null,m=d.height??u.height??u.initialHeight??null,p=en(a,Tt(u)),k=(g??0)*(m??0),y=s&&p>0;(!u.internals.handleBounds||y||p>=k||u.dragging)&&c.push(u)}return c},rd=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function id(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function sd({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:s},i){if(e.size===0)return Promise.resolve(!0);const a=id(e,i),c=Un(a),u=Uo(c,t,n,i?.minZoom??r,i?.maxZoom??s,i?.padding??.1);return await o.setViewport(u,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function Vi({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:s}){const i=n.get(e),a=i.parentId?n.get(i.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},d=i.origin??o;let h=i.extent||r;if(i.extent==="parent"&&!i.expandParent)if(!a)s?.("005",$t.error005());else{const g=a.measured.width,m=a.measured.height;g&&m&&(h=[[c,u],[c+g,u+m]])}else a&&It(i.extent)&&(h=[[i.extent[0][0]+c,i.extent[0][1]+u],[i.extent[1][0]+c,i.extent[1][1]+u]]);const f=It(h)?yt(t,h,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&s?.("015",$t.error015()),{position:{x:f.x-c+(i.measured.width??0)*d[0],y:f.y-u+(i.measured.height??0)*d[1]},positionAbsolute:f}}async function ad({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const s=new Set(e.map(f=>f.id)),i=[];for(const f of n){if(f.deletable===!1)continue;const g=s.has(f.id),m=!g&&f.parentId&&i.find(p=>p.id===f.parentId);(g||m)&&i.push(f)}const a=new Set(t.map(f=>f.id)),c=o.filter(f=>f.deletable!==!1),d=rd(i,c);for(const f of c)a.has(f.id)&&!d.find(m=>m.id===f.id)&&d.push(f);if(!r)return{edges:d,nodes:i};const h=await r({nodes:i,edges:d});return typeof h=="boolean"?h?{edges:d,nodes:i}:{edges:[],nodes:[]}:h}const Dt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),yt=(e={x:0,y:0},t,n)=>({x:Dt(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Dt(e.y,t[0][1],t[1][1]-(n?.height??0))});function Bi(e,t,n){const{width:o,height:r}=wt(n),{x:s,y:i}=n.internals.positionAbsolute;return yt(e,[[s,i],[s+o,i+r]],t)}const Nr=(e,t,n)=>e<t?Dt(Math.abs(e-t),1,t)/t:e>n?-Dt(Math.abs(e-n),1,t)/t:0,Ki=(e,t,n=15,o=40)=>{const r=Nr(e.x,o,t.width-o)*n,s=Nr(e.y,o,t.height-o)*n;return[r,s]},Qn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Do=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Jn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Tt=(e,t=[0,0])=>{const{x:n,y:o}=qo(e)?e.internals.positionAbsolute:un(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Rn=(e,t=[0,0])=>{const{x:n,y:o}=qo(e)?e.internals.positionAbsolute:un(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},ld=(e,t)=>Jn(Qn(Do(e),Do(t))),en=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Ar=e=>Ue(e.width)&&Ue(e.height)&&Ue(e.x)&&Ue(e.y),Ue=e=>!isNaN(e)&&isFinite(e),cd=(e,t)=>{},jn=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),dn=({x:e,y:t},[n,o,r],s=!1,i=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return s?jn(a,i):a},Ln=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function bt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function ud(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=bt(e,n),r=bt(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=bt(e.top??e.y??0,n),r=bt(e.bottom??e.y??0,n),s=bt(e.left??e.x??0,t),i=bt(e.right??e.x??0,t);return{top:o,right:i,bottom:r,left:s,x:s+i,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function dd(e,t,n,o,r,s){const{x:i,y:a}=Ln(e,[t,n,o]),{x:c,y:u}=Ln({x:e.x+e.width,y:e.y+e.height},[t,n,o]),d=r-c,h=s-u;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(h)}}const Uo=(e,t,n,o,r,s)=>{const i=ud(s,t,n),a=(t-i.x)/e.width,c=(n-i.y)/e.height,u=Math.min(a,c),d=Dt(u,o,r),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*d,m=n/2-f*d,p=dd(e,g,m,d,t,n),k={left:Math.min(p.left-i.left,0),top:Math.min(p.top-i.top,0),right:Math.min(p.right-i.right,0),bottom:Math.min(p.bottom-i.bottom,0)};return{x:g-k.left+k.right,y:m-k.top+k.bottom,zoom:d}},Vn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function It(e){return e!==void 0&&e!=="parent"}function wt(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function fd(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function hd(e,t={width:0,height:0},n,o,r){const s={...e},i=o.get(n);if(i){const a=i.origin||r;s.x+=i.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=i.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function gd(e){return{...$u,...e||{}}}function ho(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:s,y:i}=Ve(e),a=dn({x:s-(r?.left??0),y:i-(r?.top??0)},o),{x:c,y:u}=n?jn(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const Fi=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yi=e=>e?.getRootNode?.()||window?.document,vd=["INPUT","SELECT","TEXTAREA"];function Zi(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:vd.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Xi=e=>"clientX"in e,Ve=(e,t)=>{const n=Xi(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Pr=(e,t,n,o,r)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:r,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Fi(i)}})};function yd({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const c=e*.125+r*.375+i*.375+n*.125,u=t*.125+s*.375+a*.375+o*.125,d=Math.abs(c-e),h=Math.abs(u-t);return[c,u,d,h]}function mn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Mr({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){switch(e){case j.Left:return[t-mn(t-o,s),n];case j.Right:return[t+mn(o-t,s),n];case j.Top:return[t,n-mn(n-r,s)];case j.Bottom:return[t,n+mn(r-n,s)]}}function Wi({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:s=j.Top,curvature:i=.25}){const[a,c]=Mr({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[u,d]=Mr({pos:s,x1:o,y1:r,x2:e,y2:t,c:i}),[h,f,g,m]=yd({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${o},${r}`,h,f,g,m]}function qi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[s,a,r,i]}function md({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:r=!1}){if(o!==void 0)return o;const s=r&&n?1e3:0,i=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+i}function pd({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const s=Qn(Rn(e),Rn(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return en(i,Jn(s))>0}const wd=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,_d=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),xd=(e,t)=>{if(!e.source||!e.target)return t;let n;return Li(e)?n={...e}:n={...e,id:wd(e)},_d(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Gi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,s,i,a]=qi({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,s,i,a]}const Dr={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}},bd=({source:e,sourcePosition:t=j.Bottom,target:n})=>t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Tr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kd({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:r,offset:s,stepPosition:i}){const a=Dr[t],c=Dr[o],u={x:e.x+a.x*s,y:e.y+a.y*s},d={x:n.x+c.x*s,y:n.y+c.y*s},h=bd({source:u,sourcePosition:t,target:d}),f=h.x!==0?"x":"y",g=h[f];let m=[],p,k;const y={x:0,y:0},z={x:0,y:0},[,,N,E]=qi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*c[f]===-1){f==="x"?(p=r.x??u.x+(d.x-u.x)*i,k=r.y??(u.y+d.y)/2):(p=r.x??(u.x+d.x)/2,k=r.y??u.y+(d.y-u.y)*i);const S=[{x:p,y:u.y},{x:p,y:d.y}],A=[{x:u.x,y:k},{x:d.x,y:k}];a[f]===g?m=f==="x"?S:A:m=f==="x"?A:S}else{const S=[{x:u.x,y:d.y}],A=[{x:d.x,y:u.y}];if(f==="x"?m=a.x===g?A:S:m=a.y===g?S:A,t===o){const b=Math.abs(e[f]-n[f]);if(b<=s){const C=Math.min(s-1,s-b);a[f]===g?y[f]=(u[f]>e[f]?-1:1)*C:z[f]=(d[f]>n[f]?-1:1)*C}}if(t!==o){const b=f==="x"?"y":"x",C=a[f]===c[b],v=u[b]>d[b],w=u[b]<d[b];(a[f]===1&&(!C&&v||C&&w)||a[f]!==1&&(!C&&w||C&&v))&&(m=f==="x"?S:A)}const H={x:u.x+y.x,y:u.y+y.y},X={x:d.x+z.x,y:d.y+z.y},J=Math.max(Math.abs(H.x-m[0].x),Math.abs(X.x-m[0].x)),R=Math.max(Math.abs(H.y-m[0].y),Math.abs(X.y-m[0].y));J>=R?(p=(H.x+X.x)/2,k=m[0].y):(p=m[0].x,k=(H.y+X.y)/2)}return[[e,{x:u.x+y.x,y:u.y+y.y},...m,{x:d.x+z.x,y:d.y+z.y},n],p,k,N,E]}function Sd(e,t,n,o){const r=Math.min(Tr(e,t)/2,Tr(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${s+r*u},${i}Q ${s},${i} ${s},${i+r*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${i+r*c}Q ${s},${i} ${s+r*a},${i}`}function Qo({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:s=j.Top,borderRadius:i=5,centerX:a,centerY:c,offset:u=20,stepPosition:d=.5}){const[h,f,g,m,p]=kd({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:c},offset:u,stepPosition:d});return[h.reduce((y,z,N)=>{let E="";return N>0&&N<h.length-1?E=Sd(h[N-1],z,h[N+1],i):E=`${N===0?"M":"L"}${z.x} ${z.y}`,y+=E,y},""),f,g,m,p]}function Ir(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ed(e){const{sourceNode:t,targetNode:n}=e;if(!Ir(t)||!Ir(n))return null;const o=t.internals.handleBounds||zr(t.handles),r=n.internals.handleBounds||zr(n.handles),s=Or(o?.source??[],e.sourceHandle),i=Or(e.connectionMode===Mt.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!s||!i)return e.onError?.("008",$t.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=s?.position||j.Bottom,c=i?.position||j.Top,u=tn(t,s,a),d=tn(n,i,c);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:c}}function zr(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function tn(e,t,n=j.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:i,height:a}=t??wt(e);if(o)return{x:r+i/2,y:s+a/2};switch(t?.position??n){case j.Top:return{x:r+i/2,y:s};case j.Right:return{x:r+i,y:s+a/2};case j.Bottom:return{x:r+i/2,y:s+a};case j.Left:return{x:r,y:s+a/2}}}function Or(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function To(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Cd(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const s=new Set;return e.reduce((i,a)=>([a.markerStart||o,a.markerEnd||r].forEach(c=>{if(c&&typeof c=="object"){const u=To(c,t);s.has(u)||(i.push({id:u,color:c.color||n,...c}),s.add(u))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const Jo={nodeOrigin:[0,0],nodeExtent:Po,elevateNodesOnSelect:!0,defaults:{}},Nd={...Jo,checkEquality:!0};function jo(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Ad(e,t,n){const o=jo(Jo,n);for(const r of e.values())if(r.parentId)$o(r,e,t,o);else{const s=un(r,o.nodeOrigin),i=It(r.extent)?r.extent:o.nodeExtent,a=yt(s,i,wt(r));r.internals.positionAbsolute=a}}function Pd(e,t,n,o){const r=jo(Nd,o);let s=e.length>0;const i=new Map(t),a=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let u=i.get(c.id);if(r.checkEquality&&c===u?.internals.userNode)t.set(c.id,u);else{const d=un(c,r.nodeOrigin),h=It(c.extent)?c.extent:r.nodeExtent,f=yt(d,h,wt(c));u={...r.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:f,handleBounds:c.measured?u?.internals.handleBounds:void 0,z:Ui(c,a),userNode:c}},t.set(c.id,u)}(u.measured===void 0||u.measured.width===void 0||u.measured.height===void 0)&&!u.hidden&&(s=!1),c.parentId&&$o(u,t,n,o)}return s}function Md(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function $o(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:i}=jo(Jo,o),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Md(e,n);const u=r?1e3:0,{x:d,y:h,z:f}=Dd(e,c,s,i,u),{positionAbsolute:g}=e.internals,m=d!==g.x||h!==g.y;(m||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:d,y:h}:g,z:f}})}function Ui(e,t){return(Ue(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Dd(e,t,n,o,r){const{x:s,y:i}=t.internals.positionAbsolute,a=wt(e),c=un(e,n),u=It(e.extent)?yt(c,e.extent,a):c;let d=yt({x:s+u.x,y:i+u.y},o,a);e.extent==="parent"&&(d=Bi(d,a,t));const h=Ui(e,r),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>=h?f+1:h}}function Td(e,t,n,o=[0,0]){const r=[],s=new Map;for(const i of e){const a=t.get(i.parentId);if(!a)continue;const c=s.get(i.parentId)?.expandedRect??Tt(a),u=ld(c,i.rect);s.set(i.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:i,parent:a},c)=>{const u=a.internals.positionAbsolute,d=wt(a),h=a.origin??o,f=i.x<u.x?Math.round(Math.abs(u.x-i.x)):0,g=i.y<u.y?Math.round(Math.abs(u.y-i.y)):0,m=Math.max(d.width,Math.round(i.width)),p=Math.max(d.height,Math.round(i.height)),k=(m-d.width)*h[0],y=(p-d.height)*h[1];(f>0||g>0||k||y)&&(r.push({id:c,type:"position",position:{x:a.position.x-f+k,y:a.position.y-g+y}}),n.get(c)?.forEach(z=>{e.some(N=>N.id===z.id)||r.push({id:z.id,type:"position",position:{x:z.position.x+f,y:z.position.y+g}})})),(d.width<i.width||d.height<i.height||f||g)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:m+(f?h[0]*f-k:0),height:p+(g?h[1]*g-y:0)}})}),r}function Id(e,t,n,o,r,s){const i=o?.querySelector(".xyflow__viewport");let a=!1;if(!i)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(i),{m22:d}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const m=Fi(f.nodeElement),p=g.measured.width!==m.width||g.measured.height!==m.height;if(!!(m.width&&m.height&&(p||!g.internals.handleBounds||f.force))){const y=f.nodeElement.getBoundingClientRect(),z=It(g.extent)?g.extent:s;let{positionAbsolute:N}=g.internals;g.parentId&&g.extent==="parent"?N=Bi(N,m,t.get(g.parentId)):z&&(N=yt(N,z,m));const E={...g,measured:m,internals:{...g.internals,positionAbsolute:N,handleBounds:{source:Pr("source",f.nodeElement,y,d,g.id),target:Pr("target",f.nodeElement,y,d,g.id)}}};t.set(g.id,E),g.parentId&&$o(E,t,n,{nodeOrigin:r}),a=!0,p&&(c.push({id:g.id,type:"dimensions",dimensions:m}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:Tt(E,r)}))}}if(h.length>0){const f=Td(h,t,n,r);c.push(...f)}return{changes:c,updatedInternals:a}}async function zd({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,s]],o),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function Hr(e,t,n,o,r,s){let i=r;const a=o.get(i)||new Map;o.set(i,a.set(n,t)),i=`${r}-${e}`;const c=o.get(i)||new Map;if(o.set(i,c.set(n,t)),s){i=`${r}-${e}-${s}`;const u=o.get(i)||new Map;o.set(i,u.set(n,t))}}function Od(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:s,sourceHandle:i=null,targetHandle:a=null}=o,c={edgeId:o.id,source:r,target:s,sourceHandle:i,targetHandle:a},u=`${r}-${i}--${s}-${a}`,d=`${s}-${a}--${r}-${i}`;Hr("source",c,d,e,r,i),Hr("target",c,u,e,s,a),t.set(o.id,o)}}function Qi(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Qi(n,t):!1}function Rr(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function Hd(e,t,n,o){const r=new Map;for(const[s,i]of e)if((i.selected||i.id===o)&&(!i.parentId||!Qi(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const a=e.get(s);a&&r.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function go({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[i,a]of t){const c=n.get(i)?.internals.userNode;c&&r.push({...c,position:a.position,dragging:o})}if(!e)return[r[0],r];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:o}:r[0],r]}function Rd({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let s={x:null,y:null},i=0,a=new Map,c=!1,u={x:0,y:0},d=null,h=!1,f=null,g=!1,m=!1;function p({noDragClassName:y,handleSelector:z,domNode:N,isSelectable:E,nodeId:M,nodeClickDistance:S=0}){f=Me(N);function A({x:R,y:b},C){const{nodeLookup:v,nodeExtent:w,snapGrid:_,snapToGrid:P,nodeOrigin:I,onNodeDrag:T,onSelectionDrag:O,onError:L,updateNodePositions:U}=t();s={x:R,y:b};let G=!1,q={x:0,y:0,x2:0,y2:0};if(a.size>1&&w){const Q=Un(a);q=Do(Q)}for(const[Q,Z]of a){if(!v.has(Q))continue;let W={x:R-Z.distance.x,y:b-Z.distance.y};P&&(W=jn(W,_));let $=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];if(a.size>1&&w&&!Z.extent){const{positionAbsolute:te}=Z.internals,le=te.x-q.x+w[0][0],de=te.x+Z.measured.width-q.x2+w[1][0],he=te.y-q.y+w[0][1],je=te.y+Z.measured.height-q.y2+w[1][1];$=[[le,he],[de,je]]}const{position:ne,positionAbsolute:fe}=Vi({nodeId:Q,nextPosition:W,nodeLookup:v,nodeExtent:$,nodeOrigin:I,onError:L});G=G||Z.position.x!==ne.x||Z.position.y!==ne.y,Z.position=ne,Z.internals.positionAbsolute=fe}if(m=m||G,!!G&&(U(a,!0),C&&(o||T||!M&&O))){const[Q,Z]=go({nodeId:M,dragItems:a,nodeLookup:v});o?.(C,a,Q,Z),T?.(C,Q,Z),M||O?.(C,Z)}}async function H(){if(!d)return;const{transform:R,panBy:b,autoPanSpeed:C,autoPanOnNodeDrag:v}=t();if(!v){c=!1,cancelAnimationFrame(i);return}const[w,_]=Ki(u,d,C);(w!==0||_!==0)&&(s.x=(s.x??0)-w/R[2],s.y=(s.y??0)-_/R[2],await b({x:w,y:_})&&A(s,null)),i=requestAnimationFrame(H)}function X(R){const{nodeLookup:b,multiSelectionActive:C,nodesDraggable:v,transform:w,snapGrid:_,snapToGrid:P,selectNodesOnDrag:I,onNodeDragStart:T,onSelectionDragStart:O,unselectNodesAndEdges:L}=t();h=!0,(!I||!E)&&!C&&M&&(b.get(M)?.selected||L()),E&&I&&M&&e?.(M);const U=ho(R.sourceEvent,{transform:w,snapGrid:_,snapToGrid:P,containerBounds:d});if(s=U,a=Hd(b,v,U,M),a.size>0&&(n||T||!M&&O)){const[G,q]=go({nodeId:M,dragItems:a,nodeLookup:b});n?.(R.sourceEvent,a,G,q),T?.(R.sourceEvent,G,q),M||O?.(R.sourceEvent,q)}}const J=ic().clickDistance(S).on("start",R=>{const{domNode:b,nodeDragThreshold:C,transform:v,snapGrid:w,snapToGrid:_}=t();d=b?.getBoundingClientRect()||null,g=!1,m=!1,C===0&&X(R),s=ho(R.sourceEvent,{transform:v,snapGrid:w,snapToGrid:_,containerBounds:d}),u=Ve(R.sourceEvent,d)}).on("drag",R=>{const{autoPanOnNodeDrag:b,transform:C,snapGrid:v,snapToGrid:w,nodeDragThreshold:_,nodeLookup:P}=t(),I=ho(R.sourceEvent,{transform:C,snapGrid:v,snapToGrid:w,containerBounds:d});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||M&&!P.has(M))&&(g=!0),!g){if(!c&&b&&h&&(c=!0,H()),!h){const T=I.xSnapped-(s.x??0),O=I.ySnapped-(s.y??0);Math.sqrt(T*T+O*O)>_&&X(R)}(s.x!==I.xSnapped||s.y!==I.ySnapped)&&a&&h&&(u=Ve(R.sourceEvent,d),A(I,R.sourceEvent))}}).on("end",R=>{if(!(!h||g)&&(c=!1,h=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:b,updateNodePositions:C,onNodeDragStop:v,onSelectionDragStop:w}=t();if(m&&(C(a,!1),m=!1),r||v||!M&&w){const[_,P]=go({nodeId:M,dragItems:a,nodeLookup:b,dragging:!1});r?.(R.sourceEvent,a,_,P),v?.(R.sourceEvent,_,P),M||w?.(R.sourceEvent,P)}}}).filter(R=>{const b=R.target;return!R.button&&(!y||!Rr(b,`.${y}`,N))&&(!z||Rr(b,z,N))});f.call(J)}function k(){f?.on(".drag",null)}return{update:p,destroy:k}}function Ld(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())en(r,Tt(s))>0&&o.push(s);return o}const Vd=250;function Bd(e,t,n,o){let r=[],s=1/0;const i=Ld(e,n,t+Vd);for(const a of i){const c=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const u of c){if(o.nodeId===u.nodeId&&o.type===u.type&&o.id===u.id)continue;const{x:d,y:h}=tn(a,u,u.position,!0),f=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(h-e.y,2));f>t||(f<s?(r=[{...u,x:d,y:h}],s=f):f===s&&r.push({...u,x:d,y:h}))}}if(!r.length)return null;if(r.length>1){const a=o.type==="source"?"target":"source";return r.find(c=>c.type===a)??r[0]}return r[0]}function Ji(e,t,n,o,r,s=!1){const i=o.get(e);if(!i)return null;const a=r==="strict"?i.internals.handleBounds?.[t]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],c=(n?a?.find(u=>u.id===n):a?.[0])??null;return c&&s?{...c,...tn(i,c,c.position,!0)}:c}function ji(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Kd(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const $i=()=>!0;function Fd(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:s,isTarget:i,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:d,flowId:h,panBy:f,cancelConnection:g,onConnectStart:m,onConnect:p,onConnectEnd:k,isValidConnection:y=$i,onReconnectEnd:z,updateConnection:N,getTransform:E,getFromHandle:M,autoPanSpeed:S,dragThreshold:A=1}){const H=Yi(e.target);let X=0,J;const{x:R,y:b}=Ve(e),C=H?.elementFromPoint(R,b),v=ji(s,C),w=a?.getBoundingClientRect();let _=!1;if(!w||!v)return;const P=Ji(r,v,o,c,t);if(!P)return;let I=Ve(e,w),T=!1,O=null,L=!1,U=null;function G(){if(!d||!w)return;const[te,le]=Ki(I,w,S);f({x:te,y:le}),X=requestAnimationFrame(G)}const q={...P,nodeId:r,type:v,position:P.position},Q=c.get(r);let W={inProgress:!0,isValid:null,from:tn(Q,q,j.Left,!0),fromHandle:q,fromPosition:q.position,fromNode:Q,to:I,toHandle:null,toPosition:Er[q.position],toNode:null};function $(){_=!0,N(W),m?.(e,{nodeId:r,handleId:o,handleType:v})}A===0&&$();function ne(te){if(!_){const{x:je,y:ct}=Ve(te),Ie=je-R,ue=ct-b;if(!(Ie*Ie+ue*ue>A*A))return;$()}if(!M()||!q){fe(te);return}const le=E();I=Ve(te,w),J=Bd(dn(I,le,!1,[1,1]),n,c,q),T||(G(),T=!0);const de=es(te,{handle:J,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:i?"target":"source",isValidConnection:y,doc:H,lib:u,flowId:h,nodeLookup:c});U=de.handleDomNode,O=de.connection,L=Kd(!!J,de.isValid);const he={...W,isValid:L,to:de.toHandle&&L?Ln({x:de.toHandle.x,y:de.toHandle.y},le):I,toHandle:de.toHandle,toPosition:L&&de.toHandle?de.toHandle.position:Er[q.position],toNode:de.toHandle?c.get(de.toHandle.nodeId):null};L&&J&&W.toHandle&&he.toHandle&&W.toHandle.type===he.toHandle.type&&W.toHandle.nodeId===he.toHandle.nodeId&&W.toHandle.id===he.toHandle.id&&W.to.x===he.to.x&&W.to.y===he.to.y||(N(he),W=he)}function fe(te){if(_){(J||U)&&O&&L&&p?.(O);const{inProgress:le,...de}=W,he={...de,toPosition:W.toHandle?W.toPosition:null};k?.(te,he),s&&z?.(te,he)}g(),cancelAnimationFrame(X),T=!1,L=!1,O=null,U=null,H.removeEventListener("mousemove",ne),H.removeEventListener("mouseup",fe),H.removeEventListener("touchmove",ne),H.removeEventListener("touchend",fe)}H.addEventListener("mousemove",ne),H.addEventListener("mouseup",fe),H.addEventListener("touchmove",ne),H.addEventListener("touchend",fe)}function es(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:s,doc:i,lib:a,flowId:c,isValidConnection:u=$i,nodeLookup:d}){const h=s==="target",f=t?i.querySelector(`.${a}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:m}=Ve(e),p=i.elementFromPoint(g,m),k=p?.classList.contains(`${a}-flow__handle`)?p:f,y={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const z=ji(void 0,k),N=k.getAttribute("data-nodeid"),E=k.getAttribute("data-handleid"),M=k.classList.contains("connectable"),S=k.classList.contains("connectableend");if(!N||!z)return y;const A={source:h?N:o,sourceHandle:h?E:r,target:h?o:N,targetHandle:h?r:E};y.connection=A;const X=M&&S&&(n===Mt.Strict?h&&z==="source"||!h&&z==="target":N!==o||E!==r);y.isValid=X&&u(A),y.toHandle=Ji(N,z,E,d,n,!0)}return y}const Lr={onPointerDown:Fd,isValid:es},Yd=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,$n=e=>({x:e.x,y:e.y,zoom:e.k}),vo=({x:e,y:t,zoom:n})=>Gn.translate(e,t).scale(n),Et=(e,t)=>e.target.closest(`.${t}`),ts=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Zd=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,yo=(e,t=0,n=Zd,o=()=>{})=>{const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},ns=e=>{const t=e.ctrlKey&&Vn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Xd({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return d=>{if(Et(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(d.ctrlKey&&i){const k=Re(d),y=ns(d),z=h*Math.pow(2,y);o.scaleTo(n,z,k,d);return}const f=d.deltaMode===1?20:1;let g=r===it.Vertical?0:d.deltaX*f,m=r===it.Horizontal?0:d.deltaY*f;!Vn()&&d.shiftKey&&r!==it.Vertical&&(g=d.deltaY*f,m=0),o.translateBy(n,-(g/h)*s,-(m/h)*s,{internal:!0});const p=$n(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(d,p)),e.isPanScrolling&&(c?.(d,p),e.panScrollTimeout=setTimeout(()=>{u?.(d,p),e.isPanScrolling=!1},150))}}function Wd({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const s=o.type==="wheel",i=!t&&s&&!o.ctrlKey,a=Et(o,e);if(o.ctrlKey&&s&&a&&o.preventDefault(),i||a)return null;o.preventDefault(),n.call(this,o,r)}}function qd({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=$n(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,o.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(o.sourceEvent,r)}}function Gd({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return s=>{e.usedRightMouseButton=!!(n&&ts(t,e.mouseButton??0)),s.sourceEvent?.sync||o([s.transform.x,s.transform.y,s.transform.k]),r&&!s.sourceEvent?.internal&&r?.(s.sourceEvent,$n(s.transform))}}function Ud({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:s}){return i=>{if(!i.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&ts(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Yd(e.prevViewport,i.transform))){const a=$n(i.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r?.(i.sourceEvent,a)},n?150:0)}}}function Qd({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:a,noPanClassName:c,lib:u}){return d=>{const h=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(Et(d,`${u}-flow__node`)||Et(d,`${u}-flow__edge`)))return!0;if(!o&&!h&&!r&&!s&&!n||i||Et(d,a)&&d.type==="wheel"||Et(d,c)&&(d.type!=="wheel"||r&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&d.touches?.length>1)return d.preventDefault(),!1;if(!h&&!r&&!f&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;const g=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&g}}function Jd({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:s,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=ju().clickDistance(!Ue(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),g=Me(e).call(f);N({x:s.x,y:s.y,zoom:Dt(s.zoom,t,n)},[[0,0],[h.width,h.height]],r);const m=g.on("wheel.zoom"),p=g.on("dblclick.zoom");f.wheelDelta(ns);function k(b,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Zt:xn).transform(yo(g,C?.duration,C?.ease,()=>v(!0)),b)}):Promise.resolve(!1)}function y({noWheelClassName:b,noPanClassName:C,onPaneContextMenu:v,userSelectionActive:w,panOnScroll:_,panOnDrag:P,panOnScrollMode:I,panOnScrollSpeed:T,preventScrolling:O,zoomOnPinch:L,zoomOnScroll:U,zoomOnDoubleClick:G,zoomActivationKeyPressed:q,lib:Q,onTransformChange:Z}){w&&!d.isZoomingOrPanning&&z();const $=_&&!q&&!w?Xd({zoomPanValues:d,noWheelClassName:b,d3Selection:g,d3Zoom:f,panOnScrollMode:I,panOnScrollSpeed:T,zoomOnPinch:L,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:c}):Wd({noWheelClassName:b,preventScrolling:O,d3ZoomHandler:m});if(g.on("wheel.zoom",$,{passive:!1}),!w){const fe=qd({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:a});f.on("start",fe);const te=Gd({zoomPanValues:d,panOnDrag:P,onPaneContextMenu:!!v,onPanZoom:i,onTransformChange:Z});f.on("zoom",te);const le=Ud({zoomPanValues:d,panOnDrag:P,panOnScroll:_,onPaneContextMenu:v,onPanZoomEnd:c,onDraggingChange:u});f.on("end",le)}const ne=Qd({zoomActivationKeyPressed:q,panOnDrag:P,zoomOnScroll:U,panOnScroll:_,zoomOnDoubleClick:G,zoomOnPinch:L,userSelectionActive:w,noPanClassName:C,noWheelClassName:b,lib:Q});f.filter(ne),G?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function z(){f.on("zoom",null)}async function N(b,C,v){const w=vo(b),_=f?.constrain()(w,C,v);return _&&await k(_),new Promise(P=>P(_))}async function E(b,C){const v=vo(b);return await k(v,C),new Promise(w=>w(v))}function M(b){if(g){const C=vo(b),v=g.property("__zoom");(v.k!==b.zoom||v.x!==b.x||v.y!==b.y)&&f?.transform(g,C,null,{sync:!0})}}function S(){const b=g?Hi(g.node()):{x:0,y:0,k:1};return{x:b.x,y:b.y,zoom:b.k}}function A(b,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Zt:xn).scaleTo(yo(g,C?.duration,C?.ease,()=>v(!0)),b)}):Promise.resolve(!1)}function H(b,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Zt:xn).scaleBy(yo(g,C?.duration,C?.ease,()=>v(!0)),b)}):Promise.resolve(!1)}function X(b){f?.scaleExtent(b)}function J(b){f?.translateExtent(b)}function R(b){const C=!Ue(b)||b<0?0:b;f?.clickDistance(C)}return{update:y,destroy:z,setViewport:E,setViewportConstrained:N,getViewport:S,scaleTo:A,scaleBy:H,setScaleExtent:X,setTranslateExtent:J,syncViewport:M,setClickDistance:R}}var Vr;(function(e){e.Line="line",e.Handle="handle"})(Vr||(Vr={}));var jd=ee("<div><!></div>");function Qe(e,t){re(t,!0);let n=F(t,"id",3,null),o=F(t,"type",3,"source"),r=F(t,"position",19,()=>j.Top),s=F(t,"isConnectableStart",3,!0),i=F(t,"isConnectableEnd",3,!0),a=mt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const c=Gt("svelteflow__node_id"),u=Gt("svelteflow__node_connectable");let d=x(()=>o()==="target"),h=x(()=>t.isConnectable!==void 0?t.isConnectable:u.value),f=_t(),g=x(()=>f.ariaLabelConfig),m=null;Fs(()=>{if(t.onconnect||t.ondisconnect){f.edges;let b=f.connectionLookup.get(`${c}-${o()}${n()?`-${n()}`:""}`);if(m&&!ed(b,m)){const C=b??new Map;Cr(m,C,t.ondisconnect),Cr(C,m,t.onconnect)}m=new Map(b)}});let p=x(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:b,toHandle:C,isValid:v}=f.connection,w=b&&b.nodeId===c&&b.type===o()&&b.id===n(),_=C&&C.nodeId===c&&C.type===o()&&C.id===n(),P=f.connectionMode===Mt.Strict?b?.type!==o():c!==b?.nodeId||n()!==b?.id;return[!0,w,_,P,_&&v]}),k=x(()=>on(l(p),5)),y=x(()=>l(k)[0]),z=x(()=>l(k)[1]),N=x(()=>l(k)[2]),E=x(()=>l(k)[3]),M=x(()=>l(k)[4]);function S(b){const C=f.onbeforeconnect?.(b)??b;C&&(f.addEdge(C),f.onconnect?.(b))}function A(b){const C=Xi(b);(C&&b.button===0||!C)&&Lr.onPointerDown(b,{handleId:n(),nodeId:c,isTarget:l(d),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:S,onConnectStart:(v,w)=>{f.onconnectstart?.(v,{nodeId:w.nodeId,handleId:w.handleId,handleType:w.handleType})},onConnectEnd:(v,w)=>{f.onconnectend?.(v,w)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold})}function H(b){if(!c||!f.clickConnectStartHandle&&!s())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(b,{nodeId:c,handleId:n(),handleType:o()}),f.clickConnectStartHandle={nodeId:c,type:o(),id:n()};return}const C=Yi(b.target),v=t.isValidConnection??f.isValidConnection,{connectionMode:w,clickConnectStartHandle:_,flowId:P,nodeLookup:I}=f,{connection:T,isValid:O}=Lr.isValid(b,{handle:{nodeId:c,id:n(),type:o()},connectionMode:w,fromNodeId:_.nodeId,fromHandleId:_.id??null,fromType:_.type,isValidConnection:v,flowId:P,doc:C,lib:"svelte",nodeLookup:I});O&&T&&S(T);const L=structuredClone(Lo(f.connection));delete L.inProgress,L.toPosition=L.toHandle?L.toHandle.position:null,f.onclickconnectend?.(b,L),f.clickConnectStartHandle=null}var X=jd(),J=()=>{};lt(X,b=>({"data-handleid":n(),"data-nodeid":c,"data-handlepos":r(),"data-id":`${f.flowId??""}-${c??""}-${n()??"null"??""}-${o()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${r()}`,f.noDragClass,f.noPanClass,r(),t.class],onmousedown:A,ontouchstart:A,onclick:f.clickConnect?H:void 0,onkeypress:J,style:t.style,role:"button","aria-label":l(g)["handle.ariaLabel"],tabindex:"-1",...a,[et]:b}),[()=>({valid:l(M),connectingto:l(N),connectingfrom:l(z),source:!l(d),target:l(d),connectablestart:s(),connectableend:i(),connectable:l(h),connectionindicator:l(h)&&(!l(y)||l(E))&&(l(y)||f.clickConnectStartHandle?i():s())})]);var R=Y(X);Pe(R,()=>t.children??zt),K(X),V(e,X),ie()}var $d=ee("<!> <!>",1);function os(e,t){re(t,!0);let n=F(t,"targetPosition",19,()=>j.Top),o=F(t,"sourcePosition",19,()=>j.Bottom);var r=$d(),s=se(r);Qe(s,{type:"target",get position(){return n()}});var i=B(s),a=B(i);Qe(a,{type:"source",get position(){return o()}}),ce(()=>me(i,` ${t.data?.label??""} `)),V(e,r),ie()}var ef=ee(" <!>",1);function tf(e,t){re(t,!0);let n=F(t,"data",19,()=>({label:"Node"})),o=F(t,"sourcePosition",19,()=>j.Bottom);rn();var r=ef(),s=se(r),i=B(s);Qe(i,{type:"source",get position(){return o()}}),ce(()=>me(s,`${n()?.label??""} `)),V(e,r),ie()}var nf=ee(" <!>",1);function of(e,t){re(t,!0);let n=F(t,"data",19,()=>({label:"Node"})),o=F(t,"targetPosition",19,()=>j.Top);rn();var r=nf(),s=se(r),i=B(s);Qe(i,{type:"target",get position(){return o()}}),ce(()=>me(s,`${n()?.label??""} `)),V(e,r),ie()}function rf(e,t){}function mo(e,t,n){if(!n||!t)return;const o=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);o&&o.appendChild(e)}function sf(e,t){const n=x(_t),o=x(()=>l(n).domNode);let r;return l(o)?mo(e,l(o),t):r=ei(()=>{ht(()=>{mo(e,l(o),t),r?.()})}),{async update(s){mo(e,l(o),s)},destroy(){e.parentNode&&e.parentNode.removeChild(e),r?.()}}}function af(){let e=ge(typeof window>"u");if(l(e)){const t=ei(()=>{ht(()=>{D(e,!1),t?.()})})}return{get value(){return l(e)}}}const Br=e=>nd(e),lf=e=>Li(e);function Fe(e){return e===void 0?void 0:`${e}px`}const Bn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var cf=ee("<div><!></div>");function uf(e,t){re(t,!0);let n=F(t,"x",3,0),o=F(t,"y",3,0),r=F(t,"selectEdgeOnClick",3,!1),s=F(t,"transparent",3,!1),i=mt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=_t(),c=Gt("svelteflow__edge_id");let u=x(()=>a.visible.edges.get(c)?.zIndex);var d=cf(),h=()=>{r()&&c&&a.handleEdgeSelection(c)};lt(d,g=>({class:["svelte-flow__edge-label",{transparent:s()},t.class],tabindex:"-1",onclick:h,...i,[We]:g}),[()=>({display:af().value?"none":void 0,cursor:r()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${o()??""}px)`,"pointer-events":"all",width:Fe(t.width),height:Fe(t.height),"z-index":l(u)})],void 0,"svelte-w2n27y");var f=Y(d);Pe(f,()=>t.children??zt),K(d),be(d,(g,m)=>sf?.(g,m),()=>"edge-labels"),V(e,d),ie()}var df=pe("<path></path>"),ff=pe('<path fill="none"></path><!><!>',1);function eo(e,t){let n=F(t,"interactionWidth",3,20),o=mt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var r=ff(),s=se(r),i=B(s);{var a=d=>{var h=df();lt(h,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...o})),V(d,h)};ae(i,d=>{n()>0&&d(a)})}var c=B(i);{var u=d=>{uf(d,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{rn();var g=Ys();ce(()=>me(g,t.label)),V(h,g)},$$slots:{default:!0}})};ae(c,d=>{t.label&&d(u)})}ce(()=>{oe(s,"id",t.id),oe(s,"d",t.path),at(s,0,pt(["svelte-flow__edge-path",t.class])),oe(s,"marker-start",t.markerStart),oe(s,"marker-end",t.markerEnd),Ke(s,t.style)}),V(e,r)}function rs(e,t){re(t,!0);let n=x(()=>Wi({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.pathOptions?.curvature})),o=x(()=>on(l(n),3)),r=x(()=>l(o)[0]),s=x(()=>l(o)[1]),i=x(()=>l(o)[2]);eo(e,{get id(){return t.id},get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function hf(e,t){re(t,!0);let n=x(()=>Qo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),o=x(()=>on(l(n),3)),r=x(()=>l(o)[0]),s=x(()=>l(o)[1]),i=x(()=>l(o)[2]);eo(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function gf(e,t){re(t,!0);let n=x(()=>Gi({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),o=x(()=>on(l(n),3)),r=x(()=>l(o)[0]),s=x(()=>l(o)[1]),i=x(()=>l(o)[2]);eo(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function vf(e,t){re(t,!0);let n=x(()=>Qo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),o=x(()=>on(l(n),3)),r=x(()=>l(o)[0]),s=x(()=>l(o)[1]),i=x(()=>l(o)[2]);eo(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}class yf{#e;#t;constructor(t,n){this.#e=t,this.#t=js(n)}get current(){return this.#t(),this.#e()}}const mf=/\(.+\)/,pf=new Set(["all","print","screen","and","or","not","only"]);class wf extends yf{constructor(t,n){let o=mf.test(t)||t.split(/[\s,]+/).some(s=>pf.has(s.trim()))?t:`(${t})`;const r=window.matchMedia(o);super(()=>r.matches,s=>wo(r,"change",s))}}function _f(e,t,n,o){const r=new Map;return Go(e,{x:0,y:0,width:n,height:o},t,!0).forEach(s=>{r.set(s.id,s)}),r}function Kr(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:o,previousEdges:r,connectionMode:s,onerror:i,onlyRenderVisible:a,elevateEdgesOnSelect:c}=e,u=new Map;for(const d of t){const h=o.get(d.source),f=o.get(d.target);if(!h||!f)continue;if(a){const{visibleNodes:p,transform:k,width:y,height:z}=e;if(pd({sourceNode:h,targetNode:f,width:y,height:z,transform:k}))p.set(h.id,h),p.set(f.id,f);else continue}const g=r.get(d.id);if(g&&d===g.edge&&h==g.sourceNode&&f==g.targetNode){u.set(d.id,g);continue}const m=Ed({id:d.id,sourceNode:h,targetNode:f,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:s,onError:i});m&&u.set(d.id,{...n,...d,...m,zIndex:md({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:c}),sourceNode:h,targetNode:f,edge:d})}return u}const is={input:tf,output:of,default:os,group:rf},ss={straight:gf,smoothstep:hf,default:rs,step:vf};function xf(e,t,n,o,r,s){if(t&&!n&&o&&r){const i=Un(s,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Uo(i,o,r,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function bf(e){class t{#e=x(()=>e.props.id??"1");get flowId(){return l(this.#e)}set flowId(o){D(this.#e,o)}#t=ge(null);get domNode(){return l(this.#t)}set domNode(o){D(this.#t,o)}#n=ge(null);get panZoom(){return l(this.#n)}set panZoom(o){D(this.#n,o)}#o=ge(e.width??0);get width(){return l(this.#o)}set width(o){D(this.#o,o)}#r=ge(e.height??0);get height(){return l(this.#r)}set height(o){D(this.#r,o)}#i=x(()=>{const o=Pd(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&o&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),o});get nodesInitialized(){return l(this.#i)}set nodesInitialized(o){D(this.#i,o)}#s=x(()=>this.panZoom!==null);get viewportInitialized(){return l(this.#s)}set viewportInitialized(o){D(this.#s,o)}#a=x(()=>(Od(this.connectionLookup,this.edgeLookup,e.edges),e.edges));get _edges(){return l(this.#a)}set _edges(o){D(this.#a,o)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(o){e.nodes=o}get edges(){return this._edges}set edges(o){e.edges=o}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#l=x(()=>{const o=this._prevSelectedNodeIds.size,r=new Set,s=this.nodes.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedNodeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=s),this._prevSelectedNodeIds=r,this._prevSelectedNodes});get selectedNodes(){return l(this.#l)}set selectedNodes(o){D(this.#l,o)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#c=x(()=>{const o=this._prevSelectedEdgeIds.size,r=new Set,s=this.edges.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedEdgeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=s),this._prevSelectedEdgeIds=r,this._prevSelectedEdges});get selectedEdges(){return l(this.#c)}set selectedEdges(o){D(this.#c,o)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=x(()=>{const{nodes:o,_edges:r,_prevVisibleEdges:s,nodeLookup:i,connectionMode:a,onerror:c,onlyRenderVisibleElements:u,defaultEdgeOptions:d}=this;let h,f;const g={edges:r,defaultEdgeOptions:d,previousEdges:s,nodeLookup:i,connectionMode:a,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:c};if(u){const{viewport:m,width:p,height:k}=this,y=[m.x,m.y,m.zoom];h=_f(i,y,p,k),f=Kr({...g,onlyRenderVisible:!0,visibleNodes:h,transform:y,width:p,height:k})}else h=this.nodeLookup,f=Kr(g);return{nodes:h,edges:f}});get visible(){return l(this.#u)}set visible(o){D(this.#u,o)}#d=x(()=>e.props.nodesDraggable??!0);get nodesDraggable(){return l(this.#d)}set nodesDraggable(o){D(this.#d,o)}#f=x(()=>e.props.nodesConnectable??!0);get nodesConnectable(){return l(this.#f)}set nodesConnectable(o){D(this.#f,o)}#h=x(()=>e.props.elementsSelectable??!0);get elementsSelectable(){return l(this.#h)}set elementsSelectable(o){D(this.#h,o)}#g=x(()=>e.props.nodesFocusable??!0);get nodesFocusable(){return l(this.#g)}set nodesFocusable(o){D(this.#g,o)}#v=x(()=>e.props.edgesFocusable??!0);get edgesFocusable(){return l(this.#v)}set edgesFocusable(o){D(this.#v,o)}#y=x(()=>e.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return l(this.#y)}set disableKeyboardA11y(o){D(this.#y,o)}#m=x(()=>e.props.minZoom??.5);get minZoom(){return l(this.#m)}set minZoom(o){D(this.#m,o)}#p=x(()=>e.props.maxZoom??2);get maxZoom(){return l(this.#p)}set maxZoom(o){D(this.#p,o)}#w=x(()=>e.props.nodeOrigin??[0,0]);get nodeOrigin(){return l(this.#w)}set nodeOrigin(o){D(this.#w,o)}#_=x(()=>e.props.nodeExtent??Po);get nodeExtent(){return l(this.#_)}set nodeExtent(o){D(this.#_,o)}#x=x(()=>e.props.translateExtent??Po);get translateExtent(){return l(this.#x)}set translateExtent(o){D(this.#x,o)}#b=x(()=>e.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return l(this.#b)}set defaultEdgeOptions(o){D(this.#b,o)}#k=x(()=>e.props.nodeDragThreshold??1);get nodeDragThreshold(){return l(this.#k)}set nodeDragThreshold(o){D(this.#k,o)}#S=x(()=>e.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return l(this.#S)}set autoPanOnNodeDrag(o){D(this.#S,o)}#E=x(()=>e.props.autoPanOnConnect??!0);get autoPanOnConnect(){return l(this.#E)}set autoPanOnConnect(o){D(this.#E,o)}#C=x(()=>e.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return l(this.#C)}set autoPanOnNodeFocus(o){D(this.#C,o)}#N=x(()=>e.props.connectionDragThreshold??1);get connectionDragThreshold(){return l(this.#N)}set connectionDragThreshold(o){D(this.#N,o)}fitViewQueued=e.props.fitView??!1;fitViewOptions=e.props.fitViewOptions;fitViewResolver=null;#A=x(()=>e.props.snapGrid??null);get snapGrid(){return l(this.#A)}set snapGrid(o){D(this.#A,o)}#P=ge(!1);get dragging(){return l(this.#P)}set dragging(o){D(this.#P,o)}#M=ge(null);get selectionRect(){return l(this.#M)}set selectionRect(o){D(this.#M,o)}#D=ge(!1);get selectionKeyPressed(){return l(this.#D)}set selectionKeyPressed(o){D(this.#D,o)}#T=ge(!1);get multiselectionKeyPressed(){return l(this.#T)}set multiselectionKeyPressed(o){D(this.#T,o)}#I=ge(!1);get deleteKeyPressed(){return l(this.#I)}set deleteKeyPressed(o){D(this.#I,o)}#z=ge(!1);get panActivationKeyPressed(){return l(this.#z)}set panActivationKeyPressed(o){D(this.#z,o)}#O=ge(!1);get zoomActivationKeyPressed(){return l(this.#O)}set zoomActivationKeyPressed(o){D(this.#O,o)}#H=ge(null);get selectionRectMode(){return l(this.#H)}set selectionRectMode(o){D(this.#H,o)}#R=ge("");get ariaLiveMessage(){return l(this.#R)}set ariaLiveMessage(o){D(this.#R,o)}#L=x(()=>e.props.selectionMode??On.Partial);get selectionMode(){return l(this.#L)}set selectionMode(o){D(this.#L,o)}#V=x(()=>({...is,...e.props.nodeTypes}));get nodeTypes(){return l(this.#V)}set nodeTypes(o){D(this.#V,o)}#B=x(()=>({...ss,...e.props.edgeTypes}));get edgeTypes(){return l(this.#B)}set edgeTypes(o){D(this.#B,o)}#K=x(()=>e.props.noPanClass??"nopan");get noPanClass(){return l(this.#K)}set noPanClass(o){D(this.#K,o)}#F=x(()=>e.props.noDragClass??"nodrag");get noDragClass(){return l(this.#F)}set noDragClass(o){D(this.#F,o)}#Y=x(()=>e.props.noWheelClass??"nowheel");get noWheelClass(){return l(this.#Y)}set noWheelClass(o){D(this.#Y,o)}#Z=x(()=>gd(e.props.ariaLabelConfig));get ariaLabelConfig(){return l(this.#Z)}set ariaLabelConfig(o){D(this.#Z,o)}#X=ge(xf(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return l(this.#X)}set _viewport(o){D(this.#X,o)}get viewport(){return e.viewport??this._viewport}set viewport(o){e.viewport&&(e.viewport=o),this._viewport=o}#W=ge(Mo);get _connection(){return l(this.#W)}set _connection(o){D(this.#W,o)}#q=x(()=>this._connection.inProgress?{...this._connection,to:dn(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return l(this.#q)}set connection(o){D(this.#q,o)}#G=x(()=>e.props.connectionMode??Mt.Strict);get connectionMode(){return l(this.#G)}set connectionMode(o){D(this.#G,o)}#U=x(()=>e.props.connectionRadius??20);get connectionRadius(){return l(this.#U)}set connectionRadius(o){D(this.#U,o)}#Q=x(()=>e.props.isValidConnection??(()=>!0));get isValidConnection(){return l(this.#Q)}set isValidConnection(o){D(this.#Q,o)}#J=x(()=>e.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return l(this.#J)}set selectNodesOnDrag(o){D(this.#J,o)}#j=x(()=>e.props.defaultMarkerColor??"#b1b1b7");get defaultMarkerColor(){return l(this.#j)}set defaultMarkerColor(o){D(this.#j,o)}#$=x(()=>Cd(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return l(this.#$)}set markers(o){D(this.#$,o)}#ee=x(()=>e.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return l(this.#ee)}set onlyRenderVisibleElements(o){D(this.#ee,o)}#te=x(()=>e.props.onflowerror??cd);get onerror(){return l(this.#te)}set onerror(o){D(this.#te,o)}#ne=x(()=>e.props.ondelete);get ondelete(){return l(this.#ne)}set ondelete(o){D(this.#ne,o)}#oe=x(()=>e.props.onbeforedelete);get onbeforedelete(){return l(this.#oe)}set onbeforedelete(o){D(this.#oe,o)}#re=x(()=>e.props.onbeforeconnect);get onbeforeconnect(){return l(this.#re)}set onbeforeconnect(o){D(this.#re,o)}#ie=x(()=>e.props.onconnect);get onconnect(){return l(this.#ie)}set onconnect(o){D(this.#ie,o)}#se=x(()=>e.props.onconnectstart);get onconnectstart(){return l(this.#se)}set onconnectstart(o){D(this.#se,o)}#ae=x(()=>e.props.onconnectend);get onconnectend(){return l(this.#ae)}set onconnectend(o){D(this.#ae,o)}#le=x(()=>e.props.onbeforereconnect);get onbeforereconnect(){return l(this.#le)}set onbeforereconnect(o){D(this.#le,o)}#ce=x(()=>e.props.onreconnect);get onreconnect(){return l(this.#ce)}set onreconnect(o){D(this.#ce,o)}#ue=x(()=>e.props.onreconnectstart);get onreconnectstart(){return l(this.#ue)}set onreconnectstart(o){D(this.#ue,o)}#de=x(()=>e.props.onreconnectend);get onreconnectend(){return l(this.#de)}set onreconnectend(o){D(this.#de,o)}#fe=x(()=>e.props.clickConnect??!0);get clickConnect(){return l(this.#fe)}set clickConnect(o){D(this.#fe,o)}#he=x(()=>e.props.onclickconnectstart);get onclickconnectstart(){return l(this.#he)}set onclickconnectstart(o){D(this.#he,o)}#ge=x(()=>e.props.onclickconnectend);get onclickconnectend(){return l(this.#ge)}set onclickconnectend(o){D(this.#ge,o)}#ve=ge(null);get clickConnectStartHandle(){return l(this.#ve)}set clickConnectStartHandle(o){D(this.#ve,o)}#ye=x(()=>e.props.onselectiondrag);get onselectiondrag(){return l(this.#ye)}set onselectiondrag(o){D(this.#ye,o)}#me=x(()=>e.props.onselectiondragstart);get onselectiondragstart(){return l(this.#me)}set onselectiondragstart(o){D(this.#me,o)}#pe=x(()=>e.props.onselectiondragstop);get onselectiondragstop(){return l(this.#pe)}set onselectiondragstop(o){D(this.#pe,o)}resolveFitView=async()=>{this.panZoom&&(await sd({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new wf("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark");#we=x(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light");get colorMode(){return l(this.#we)}set colorMode(o){D(this.#we,o)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Mo,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new t}function _t(){const e=Gt(Io);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const Io=Symbol();function kf(e){const t=bf(e);function n(b){t.nodeTypes={...is,...b}}function o(b){t.edgeTypes={...ss,...b}}function r(b){t.edges=xd(b,t.edges)}const s=(b,C=!1)=>{t.nodes=t.nodes.map(v=>{const w=b.get(v.id);return w?{...v,position:w.position,dragging:C}:v})};function i(b){const{changes:C,updatedInternals:v}=Id(b,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!v)return;Ad(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const w=new Map;for(const _ of C){const P=t.nodeLookup.get(_.id)?.internals.userNode;if(!P)continue;const I={...P};switch(_.type){case"dimensions":{const T={...I.measured,..._.dimensions};_.setAttributes&&(I.width=_.dimensions?.width??I.width,I.height=_.dimensions?.height??I.height),I.measured=T;break}case"position":I.position=_.position??I.position;break}w.set(_.id,I)}t.nodes=t.nodes.map(_=>w.get(_.id)??_)}function a(b){const C=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=b,t.fitViewResolver=C,t.nodes=[...t.nodes],C.promise}async function c(b,C,v){const w=typeof v?.zoom<"u"?v.zoom:t.maxZoom,_=t.panZoom;return _?(await _.setViewport({x:t.width/2-b*w,y:t.height/2-C*w,zoom:w},{duration:v?.duration,ease:v?.ease,interpolate:v?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function u(b,C){const v=t.panZoom;return v?v.scaleBy(b,C):Promise.resolve(!1)}function d(b){return u(1.2,b)}function h(b){return u(1/1.2,b)}function f(b){const C=t.panZoom;C&&(C.setScaleExtent([b,t.maxZoom]),t.minZoom=b)}function g(b){const C=t.panZoom;C&&(C.setScaleExtent([t.minZoom,b]),t.maxZoom=b)}function m(b){const C=t.panZoom;C&&(C.setTranslateExtent(b),t.translateExtent=b)}function p(b){t.panZoom?.setClickDistance(b)}function k(b,C=null){let v=!1;const w=b.map(_=>(C?C.has(_.id):!0)&&_.selected?(v=!0,{..._,selected:!1}):_);return[v,w]}function y(b){const C=b?.nodes?new Set(b.nodes.map(T=>T.id)):null,[v,w]=k(t.nodes,C);v&&(t.nodes=w);const _=b?.edges?new Set(b.edges.map(T=>T.id)):null,[P,I]=k(t.edges,_);P&&(t.edges=I)}function z(b){const C=t.multiselectionKeyPressed;t.nodes=t.nodes.map(v=>{const w=b.includes(v.id),_=C&&v.selected||w;if(v.selected!==_){const P=t.nodeLookup.get(v.id);return P&&(P.selected=_),v.selected=_,{...v}}return v}),C||y({nodes:[]})}function N(b){const C=t.multiselectionKeyPressed;t.edges=t.edges.map(v=>{const w=b.includes(v.id),_=C&&v.selected||w;return v.selected!==_?{...v,selected:_}:v}),C||y({edges:[]})}function E(b,C,v){const w=t.nodeLookup.get(b);if(!w){console.warn("012",$t.error012(b));return}t.selectionRect=null,t.selectionRectMode=null,w.selected?(C||w.selected&&t.multiselectionKeyPressed)&&(y({nodes:[w],edges:[]}),requestAnimationFrame(()=>v?.blur())):z([b])}function M(b){const C=t.edgeLookup.get(b);if(!C){console.warn("012",$t.error012(b));return}(C.selectable||t.elementsSelectable&&typeof C.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,C.selected?C.selected&&t.multiselectionKeyPressed&&y({nodes:[],edges:[C]}):N([b]))}function S(b,C){const{nodeExtent:v,snapGrid:w,nodeOrigin:_,nodeLookup:P,nodesDraggable:I,onerror:T}=t,O=new Map,L=w?.[0]??5,U=w?.[1]??5,G=b.x*L*C,q=b.y*U*C;for(const Q of P.values()){if(!(Q.selected&&(Q.draggable||I&&typeof Q.draggable>"u")))continue;let W={x:Q.internals.positionAbsolute.x+G,y:Q.internals.positionAbsolute.y+q};w&&(W=jn(W,w));const{position:$,positionAbsolute:ne}=Vi({nodeId:Q.id,nextPosition:W,nodeLookup:P,nodeExtent:v,nodeOrigin:_,onError:T});Q.position=$,Q.internals.positionAbsolute=ne,O.set(Q.id,Q)}s(O)}function A(b){return zd({delta:b,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const H=b=>{t._connection={...b}};function X(){t._connection=Mo}function J(){t.resetStoreValues(),y()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:o,addEdge:r,updateNodePositions:s,updateNodeInternals:i,zoomIn:d,zoomOut:h,fitView:a,setCenter:c,setMinZoom:f,setMaxZoom:g,setTranslateExtent:m,setPaneClickDistance:p,unselectNodesAndEdges:y,addSelectedNodes:z,addSelectedEdges:N,handleNodeSelection:E,handleEdgeSelection:M,moveSelectedNodes:S,panBy:A,updateConnection:H,cancelConnection:X,reset:J})}function Sf(e,t){const{minZoom:n,maxZoom:o,initialViewport:r,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:a,translateExtent:c,paneClickDistance:u,setPanZoomInstance:d,onDraggingChange:h,onTransformChange:f}=t,g=Jd({domNode:e,minZoom:n,maxZoom:o,translateExtent:c,viewport:r,paneClickDistance:u,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:h}),m=g.getViewport();return(r.x!==m.x||r.y!==m.y||r.zoom!==m.zoom)&&f([m.x,m.y,m.zoom]),d(g),g.update(t),{update(p){g.update(p)}}}var Ef=ee('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Cf(e,t){re(t,!0);let n=F(t,"store",15),o=F(t,"panOnScrollMode",19,()=>it.Free),r=F(t,"preventScrolling",3,!0),s=F(t,"zoomOnScroll",3,!0),i=F(t,"zoomOnDoubleClick",3,!0),a=F(t,"zoomOnPinch",3,!0),c=F(t,"panOnDrag",3,!0),u=F(t,"panOnScroll",3,!1),d=F(t,"paneClickDistance",3,1),h=x(()=>n().panActivationKeyPressed||c()),f=x(()=>n().panActivationKeyPressed||u());const{viewport:g}=n();let m=!1;ht(()=>{!m&&n().viewportInitialized&&(t.oninit?.(),m=!0)});var p=Ef(),k=Y(p);Pe(k,()=>t.children),K(p),be(p,(y,z)=>Sf?.(y,z),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:y=>{n(n().dragging=y,!0)},setPanZoomInstance:y=>{n(n().panZoom=y,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:s(),zoomOnDoubleClick:i(),zoomOnPinch:a(),panOnScroll:l(f),panOnDrag:l(h),panOnScrollSpeed:.5,panOnScrollMode:o()||it.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof r()=="boolean"?r():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:d(),onTransformChange:y=>{n(n().viewport={x:y[0],y:y[1],zoom:y[2]},!0)}})),V(e,p),ie()}function Fr(e,t){return n=>{n.target===t&&e?.(n)}}function Yr(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Zr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Nf=ee("<div><!></div>");function Af(e,t){re(t,!0);let n=F(t,"store",15),o=F(t,"panOnDrag",3,!0),r,s=null,i=new Set,a=new Set,c=x(()=>n().panActivationKeyPressed||o()),u=x(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&l(c)!==!0),d=x(()=>n().elementsSelectable&&(l(u)||n().selectionRectMode==="user")),h=!1;function f(S){if(h||n().connection.inProgress){h=!1;return}t.onpaneclick?.({event:S}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(S){if(s=r?.getBoundingClientRect(),!n().elementsSelectable||!l(u)||S.button!==0||S.target!==r||!s)return;S.target?.setPointerCapture?.(S.pointerId);const{x:A,y:H}=Ve(S,s);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:A,startY:H,x:A,y:H},!0),t.onselectionstart?.(S)}function m(S){if(!l(u)||!s||!n().selectionRect)return;h=!0;const A=Ve(S,s),{startX:H=0,startY:X=0}=n().selectionRect,J={...n().selectionRect,x:A.x<H?A.x:H,y:A.y<X?A.y:X,width:Math.abs(A.x-H),height:Math.abs(A.y-X)},R=i,b=a;i=new Set(Go(n().nodeLookup,J,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===On.Partial,!0).map(v=>v.id));const C=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const v of i){const w=n().connectionLookup.get(v);if(w)for(const{edgeId:_}of w.values()){const P=n().edgeLookup.get(_);P&&(P.selectable??C)&&a.add(_)}}Zr(R,i)||n(n().nodes=n().nodes.map(Yr(i)),!0),Zr(b,a)||n(n().edges=n().edges.map(Yr(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=J,!0)}function p(S){S.button===0&&(S.target?.releasePointerCapture?.(S.pointerId),!l(u)&&n().selectionRectMode==="user"&&S.target===r&&f?.(S),n(n().selectionRect=null,!0),i.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),t.onselectionend?.(S))}const k=S=>{if(Array.isArray(l(c))&&l(c).includes(2)){S.preventDefault();return}t.onpanecontextmenu?.({event:S})};var y=Nf();let z;var N=x(()=>l(d)?void 0:Fr(f,r));y.__click=function(...S){l(N)?.apply(this,S)},y.__pointerdown=function(...S){(l(d)?g:void 0)?.apply(this,S)},y.__pointermove=function(...S){(l(d)?m:void 0)?.apply(this,S)},y.__pointerup=function(...S){(l(d)?p:void 0)?.apply(this,S)};var E=x(()=>Fr(k,r));y.__contextmenu=function(...S){l(E)?.apply(this,S)};var M=Y(y);Pe(M,()=>t.children),K(y),an(y,S=>r=S,()=>r),ce(S=>z=at(y,1,"svelte-flow__pane svelte-flow__container",null,z,S),[()=>({draggable:o()===!0||Array.isArray(o())&&o().includes(0),dragging:n().dragging,selection:l(u)})]),V(e,y),ie()}sn(["click","pointerdown","pointermove","pointerup","contextmenu"]);var Pf=ee('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Mf(e,t){re(t,!0);var n=Pf();let o;var r=Y(n);Pe(r,()=>t.children),K(n),ce(s=>o=Ke(n,"",o,s),[()=>({transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})]),V(e,n),ie()}function as(e,t){const{store:n,onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i}=t,a=Rd({onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i,getStoreItems:()=>{const{snapGrid:u,viewport:d}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function c(u,d){if(d.disabled){a.destroy();return}a.update({domNode:u,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return c(e,t),{update(u){c(e,u)},destroy(){a.destroy()}}}var Df=ee('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-62ze0y"> </div>'),Tf=ee('<div class="a11y-hidden svelte-62ze0y"> </div> <div class="a11y-hidden svelte-62ze0y"> </div> <!>',1);function If(e,t){re(t,!0);var n=Tf(),o=se(n),r=Y(o,!0);K(o);var s=B(o,2),i=Y(s,!0);K(s);var a=B(s,2);{var c=u=>{var d=Df(),h=Y(d,!0);K(d),ce(()=>{oe(d,"id",`${zf}-${t.store.flowId}`),me(h,t.store.ariaLiveMessage)}),V(u,d)};ae(a,u=>{t.store.disableKeyboardA11y||u(c)})}ce(()=>{oe(o,"id",`${ls}-${t.store.flowId}`),me(r,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),oe(s,"id",`${cs}-${t.store.flowId}`),me(i,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),V(e,n),ie()}const ls="svelte-flow__node-desc",cs="svelte-flow__edge-desc",zf="svelte-flow__aria-live";var Of=ee("<div><!></div>");function Hf(e,t){re(t,!0);let n=F(t,"store",15),o=x(()=>we(t.node.data,()=>({}),!0)),r=x(()=>we(t.node.selected,!1)),s=x(()=>t.node.draggable),i=x(()=>t.node.selectable),a=x(()=>we(t.node.deletable,!0)),c=x(()=>t.node.connectable),u=x(()=>t.node.focusable),d=x(()=>we(t.node.hidden,!1)),h=x(()=>we(t.node.dragging,!1)),f=x(()=>we(t.node.style,"")),g=x(()=>t.node.class),m=x(()=>we(t.node.type,"default")),p=x(()=>t.node.parentId),k=x(()=>t.node.sourcePosition),y=x(()=>t.node.targetPosition),z=x(()=>we(t.node.measured,()=>({width:0,height:0}),!0).width),N=x(()=>we(t.node.measured,()=>({width:0,height:0}),!0).height),E=x(()=>t.node.initialWidth),M=x(()=>t.node.initialHeight),S=x(()=>t.node.width),A=x(()=>t.node.height),H=x(()=>t.node.dragHandle),X=x(()=>we(t.node.internals.z,0)),J=x(()=>t.node.internals.positionAbsolute.x),R=x(()=>t.node.internals.positionAbsolute.y),b=x(()=>t.node.internals.userNode),{id:C}=t.node,v=x(()=>l(s)??n().nodesDraggable),w=x(()=>l(i)??n().elementsSelectable),_=x(()=>l(c)??n().nodesConnectable),P=x(()=>fd(t.node)),I=x(()=>!!t.node.internals.handleBounds),T=x(()=>l(P)&&l(I)),O=x(()=>l(u)??n().nodesFocusable);function L(ue){return n().parentLookup.has(ue)}let U=x(()=>L(C)),G=ge(null),q=null,Q=l(m),Z=l(k),W=l(y),$=x(()=>n().nodeTypes[l(m)]??os),ne=x(()=>n().ariaLabelConfig);En("svelteflow__node_connectable",{get value(){return l(_)}}),En("svelteflow__node_id",C);let te=x(()=>{const ue=l(z)===void 0?l(S)??l(E):l(S),ve=l(N)===void 0?l(A)??l(M):l(A);if(!(ue===void 0&&ve===void 0&&l(f)===void 0))return`${l(f)};${ue?`width:${Fe(ue)};`:""}${ve?`height:${Fe(ve)};`:""}`});ht(()=>{(l(m)!==Q||l(k)!==Z||l(y)!==W)&&l(G)!==null&&requestAnimationFrame(()=>{l(G)!==null&&n().updateNodeInternals(new Map([[C,{id:C,nodeElement:l(G),force:!0}]]))}),Q=l(m),Z=l(k),W=l(y)}),ht(()=>{t.resizeObserver&&(!l(T)||l(G)!==q)&&(q&&t.resizeObserver.unobserve(q),l(G)&&t.resizeObserver.observe(l(G)),q=l(G))}),Ho(()=>{q&&t.resizeObserver?.unobserve(q)});function le(ue){l(w)&&(!n().selectNodesOnDrag||!l(v)||n().nodeDragThreshold>0)&&n().handleNodeSelection(C),t.onnodeclick?.({node:l(b),event:ue})}function de(ue){if(!(Zi(ue)||n().disableKeyboardA11y))if(Ri.includes(ue.key)&&l(w)){const ve=ue.key==="Escape";n().handleNodeSelection(C,ve,l(G))}else l(v)&&t.node.selected&&Object.prototype.hasOwnProperty.call(Bn,ue.key)&&(ue.preventDefault(),n(n().ariaLiveMessage=l(ne)["node.a11yDescription.ariaLiveMessage"]({direction:ue.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(Bn[ue.key],ue.shiftKey?4:1))}const he=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!l(G)?.matches(":focus-visible"))return;const{width:ue,height:ve,viewport:xt}=n();Go(new Map([[C,t.node]]),{x:0,y:0,width:ue,height:ve},[xt.x,xt.y,xt.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:xt.zoom})};var je=ye(),ct=se(je);{var Ie=ue=>{var ve=Of();lt(ve,(xe,$e)=>({"data-id":C,class:["svelte-flow__node",`svelte-flow__node-${l(m)}`,l(g)],style:l(te),onclick:le,onpointerenter:t.onnodepointerenter?Se=>t.onnodepointerenter({node:l(b),event:Se}):void 0,onpointerleave:t.onnodepointerleave?Se=>t.onnodepointerleave({node:l(b),event:Se}):void 0,onpointermove:t.onnodepointermove?Se=>t.onnodepointermove({node:l(b),event:Se}):void 0,oncontextmenu:t.onnodecontextmenu?Se=>t.onnodecontextmenu({node:l(b),event:Se}):void 0,onkeydown:l(O)?de:void 0,onfocus:l(O)?he:void 0,tabIndex:l(O)?0:void 0,role:t.node.ariaRole??(l(O)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${ls}-${n().flowId}`,...t.node.domAttributes,[et]:xe,[We]:$e}),[()=>({dragging:l(h),selected:l(r),draggable:l(v),connectable:l(_),selectable:l(w),nopan:l(v),parent:l(U)}),()=>({"z-index":l(X),transform:`translate(${l(J)??""}px, ${l(R)??""}px)`,visibility:l(P)?"visible":"hidden"})]);var xt=Y(ve);Ro(xt,()=>l($),(xe,$e)=>{$e(xe,{get data(){return l(o)},get id(){return C},get selected(){return l(r)},get selectable(){return l(w)},get deletable(){return l(a)},get sourcePosition(){return l(k)},get targetPosition(){return l(y)},get zIndex(){return l(X)},get dragging(){return l(h)},get draggable(){return l(v)},get dragHandle(){return l(H)},get parentId(){return l(p)},get type(){return l(m)},get isConnectable(){return l(_)},get positionAbsoluteX(){return l(J)},get positionAbsoluteY(){return l(R)},get width(){return l(S)},get height(){return l(A)}})}),K(ve),be(ve,(xe,$e)=>as?.(xe,$e),()=>({nodeId:C,isSelectable:l(w),disabled:!l(v),handleSelector:l(H),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(xe,$e,Se,Ot)=>{t.onnodedrag?.({event:xe,targetNode:Se,nodes:Ot})},onDragStart:(xe,$e,Se,Ot)=>{t.onnodedragstart?.({event:xe,targetNode:Se,nodes:Ot})},onDragStop:(xe,$e,Se,Ot)=>{t.onnodedragstop?.({event:xe,targetNode:Se,nodes:Ot})},store:n()})),an(ve,xe=>D(G,xe),()=>l(G)),V(ue,ve)};ae(ct,ue=>{l(d)||ue(Ie)})}V(e,je),ie()}var Rf=ee('<div class="svelte-flow__nodes"></div>');function Lf(e,t){re(t,!0);let n=F(t,"store",15);const o=typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const i=new Map;s.forEach(a=>{const c=a.target.getAttribute("data-id");i.set(c,{id:c,nodeElement:a.target,force:!0})}),n().updateNodeInternals(i)});Ho(()=>{o?.disconnect()});var r=Rf();rt(r,21,()=>n().visible.nodes.values(),s=>s.id,(s,i)=>{Hf(s,{get node(){return l(i)},get resizeObserver(){return o},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),K(r),V(e,r),ie()}var Vf=pe('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Bf(e,t){re(t,!0);let n=x(()=>t.edge.source),o=x(()=>t.edge.target),r=x(()=>t.edge.sourceX),s=x(()=>t.edge.sourceY),i=x(()=>t.edge.targetX),a=x(()=>t.edge.targetY),c=x(()=>t.edge.sourcePosition),u=x(()=>t.edge.targetPosition),d=x(()=>we(t.edge.animated,!1)),h=x(()=>we(t.edge.selected,!1)),f=x(()=>t.edge.label),g=x(()=>t.edge.labelStyle),m=x(()=>we(t.edge.data,()=>({}),!0)),p=x(()=>t.edge.style),k=x(()=>t.edge.interactionWidth),y=x(()=>we(t.edge.type,"default")),z=x(()=>t.edge.sourceHandle),N=x(()=>t.edge.targetHandle),E=x(()=>t.edge.markerStart),M=x(()=>t.edge.markerEnd),S=x(()=>t.edge.selectable),A=x(()=>t.edge.focusable),H=x(()=>we(t.edge.deletable,!0)),X=x(()=>t.edge.hidden),J=x(()=>t.edge.zIndex),R=x(()=>t.edge.class),b=x(()=>t.edge.ariaLabel),C=null;const{id:v}=t.edge;En("svelteflow__edge_id",v);let w=x(()=>l(S)??t.store.elementsSelectable),_=x(()=>l(A)??t.store.edgesFocusable),P=x(()=>t.store.edgeTypes[l(y)]??rs),I=x(()=>l(E)?`url('#${To(l(E),t.store.flowId)}')`:void 0),T=x(()=>l(M)?`url('#${To(l(M),t.store.flowId)}')`:void 0);function O(Z){const W=t.store.edgeLookup.get(v);W&&(l(w)&&t.store.handleEdgeSelection(v),t.onedgeclick?.({event:Z,edge:W}))}function L(Z,W){const $=t.store.edgeLookup.get(v);$&&W({event:Z,edge:$})}function U(Z){if(!t.store.disableKeyboardA11y&&Ri.includes(Z.key)&&l(w)){const{unselectNodesAndEdges:W,addSelectedEdges:$}=t.store;Z.key==="Escape"?(C?.blur(),W({edges:[t.edge]})):$([v])}}var G=ye(),q=se(G);{var Q=Z=>{var W=Vf();let $;var ne=Y(W);lt(ne,te=>({class:["svelte-flow__edge",l(R)],"data-id":v,onclick:O,oncontextmenu:t.onedgecontextmenu?le=>{L(le,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?le=>{L(le,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?le=>{L(le,t.onedgepointerleave)}:void 0,"aria-label":l(b)===null?void 0:l(b)?l(b):`Edge from ${l(n)} to ${l(o)}`,"aria-describedby":l(_)?`${cs}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(l(_)?"group":"img"),"aria-roledescription":"edge",onkeydown:l(_)?U:void 0,tabindex:l(_)?0:void 0,...t.edge.domAttributes,[et]:te}),[()=>({animated:l(d),selected:l(h),selectable:l(w)})]);var fe=Y(ne);Ro(fe,()=>l(P),(te,le)=>{le(te,{get id(){return v},get source(){return l(n)},get target(){return l(o)},get sourceX(){return l(r)},get sourceY(){return l(s)},get targetX(){return l(i)},get targetY(){return l(a)},get sourcePosition(){return l(c)},get targetPosition(){return l(u)},get animated(){return l(d)},get selected(){return l(h)},get label(){return l(f)},get labelStyle(){return l(g)},get data(){return l(m)},get style(){return l(p)},get interactionWidth(){return l(k)},get selectable(){return l(w)},get deletable(){return l(H)},get type(){return l(y)},get sourceHandleId(){return l(z)},get targetHandleId(){return l(N)},get markerStart(){return l(I)},get markerEnd(){return l(T)}})}),K(ne),an(ne,te=>C=te,()=>C),K(W),ce(te=>$=Ke(W,"",$,te),[()=>({"z-index":l(J)})]),V(Z,W)};ae(q,Z=>{l(X)||Z(Q)})}V(e,G),ie()}var Kf=pe("<defs></defs>");function Ff(e,t){re(t,!1);const n=_t();Wr();var o=Kf();rt(o,5,()=>n.markers,r=>r.id,(r,s)=>{Wf(r,St(()=>l(s)))}),K(o),V(e,o),ie()}var Yf=pe('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Zf=pe('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Xf=pe('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Wf(e,t){re(t,!0);let n=F(t,"width",3,12.5),o=F(t,"height",3,12.5),r=F(t,"markerUnits",3,"strokeWidth"),s=F(t,"orient",3,"auto-start-reverse");var i=Xf(),a=Y(i);{var c=d=>{var h=Yf();ce(()=>{oe(h,"stroke",t.color),oe(h,"stroke-width",t.strokeWidth)}),V(d,h)},u=d=>{var h=ye(),f=se(h);{var g=m=>{var p=Zf();ce(()=>{oe(p,"stroke",t.color),oe(p,"stroke-width",t.strokeWidth),oe(p,"fill",t.color)}),V(m,p)};ae(f,m=>{t.type===Hn.ArrowClosed&&m(g)},!0)}V(d,h)};ae(a,d=>{t.type===Hn.Arrow?d(c):d(u,!1)})}K(i),ce(()=>{oe(i,"id",t.id),oe(i,"markerWidth",`${n()}`),oe(i,"markerHeight",`${o()}`),oe(i,"markerUnits",r()),oe(i,"orient",s())}),V(e,i),ie()}var qf=ee('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Gf(e,t){re(t,!0);let n=F(t,"store",15);var o=qf(),r=Y(o),s=Y(r);Ff(s,{}),K(r);var i=B(r,2);rt(i,17,()=>n().visible.edges.values(),a=>a.id,(a,c)=>{Bf(a,{get edge(){return l(c)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(u){n(u)}})}),K(o),V(e,o),ie()}var Uf=ee('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function us(e,t){re(t,!0);let n=F(t,"x",3,0),o=F(t,"y",3,0),r=F(t,"width",3,0),s=F(t,"height",3,0),i=F(t,"isVisible",3,!0);var a=ye(),c=se(a);{var u=d=>{var h=Uf();let f;ce(g=>f=Ke(h,"",f,g),[()=>({width:typeof r()=="string"?r():Fe(r()),height:typeof s()=="string"?s():Fe(s()),transform:`translate(${n()}px, ${o()}px)`})]),V(d,h)};ae(c,d=>{i()&&d(u)})}V(e,a),ie()}function Qf(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectioncontextmenu?.({nodes:n,event:e})}function Jf(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectionclick?.({nodes:n,event:e})}var jf=ee("<div><!></div>");function $f(e,t){re(t,!0);let n=ge(void 0);ht(()=>{t.store.disableKeyboardA11y||l(n)?.focus({preventScroll:!0})});let o=x(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,Un(t.store.nodeLookup,{filter:c=>!!c.selected})):null);function r(c){Object.prototype.hasOwnProperty.call(Bn,c.key)&&(c.preventDefault(),t.store.moveSelectedNodes(Bn[c.key],c.shiftKey?4:1))}var s=ye(),i=se(s);{var a=c=>{var u=jf();u.__contextmenu=[Qf,t],u.__click=[Jf,t],u.__keydown=function(...f){(t.store.disableKeyboardA11y?void 0:r)?.apply(this,f)};let d;var h=Y(u);us(h,{width:"100%",height:"100%",x:0,y:0}),K(u),be(u,(f,g)=>as?.(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,m,p)=>{t.onnodedrag?.({event:f,targetNode:null,nodes:p})},onDragStart:(f,g,m,p)=>{t.onnodedragstart?.({event:f,targetNode:null,nodes:p})},onDragStop:(f,g,m,p)=>{t.onnodedragstop?.({event:f,targetNode:null,nodes:p})}})),an(u,f=>D(n,f),()=>l(n)),ce(f=>{at(u,1,pt(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),oe(u,"role",t.store.disableKeyboardA11y?void 0:"button"),oe(u,"tabindex",t.store.disableKeyboardA11y?void 0:-1),d=Ke(u,"",d,f)},[()=>({width:Fe(l(o).width),height:Fe(l(o).height),transform:`translate(${l(o).x??""}px, ${l(o).y??""}px)`})]),V(c,u)};ae(i,c=>{t.store.selectionRectMode==="nodes"&&l(o)&&Ue(l(o).x)&&Ue(l(o).y)&&c(a)})}V(e,s),ie()}sn(["contextmenu","click","keydown"]);function eh(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function ze(e,t){let{enabled:n=!0,trigger:o,type:r="keydown"}=t;function s(a){const c=Array.isArray(o)?o:[o],u=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((d,h,f)=>h?d|1<<f:d,0);for(const d of c){const h={preventDefault:!1,enabled:!0,...d},{modifier:f,key:g,callback:m,preventDefault:p,enabled:k}=h;if(k){if(a.key!==g)continue;if(f===null||f===!1){if(u!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const z=Array.isArray(f)?f:[f];let N=!1;for(const E of z)if((Array.isArray(E)?E:[E]).reduce((S,A)=>S|eh(A),0)===u){N=!0;break}if(!N)continue}p&&a.preventDefault();const y={node:e,trigger:h,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:y})),m?.(y)}}}let i;return n&&(i=wo(e,r,s)),{update:a=>{const{enabled:c=!0,type:u="keydown"}=a;n&&(!c||r!==u)?i?.():!n&&c&&(i=wo(e,u,s)),n=c,r=u,o=a.trigger},destroy:()=>{i?.()}}}function th(){const e=x(_t),t=s=>{const i=Br(s)?s:l(e).nodeLookup.get(s.id),a=i.parentId?hd(i.position,i.measured,i.parentId,l(e).nodeLookup,l(e).nodeOrigin):i.position,c={...i,position:a,width:i.measured?.width??i.width,height:i.measured?.height??i.height};return Tt(c)};function n(s,i,a={replace:!1}){l(e).nodes=qe(()=>l(e).nodes).map(c=>{if(c.id===s){const u=typeof i=="function"?i(c):i;return a?.replace&&Br(u)?u:{...c,...u}}return c})}function o(s,i,a={replace:!1}){l(e).edges=qe(()=>l(e).edges).map(c=>{if(c.id===s){const u=typeof i=="function"?i(c):i;return a.replace&&lf(u)?u:{...c,...u}}return c})}const r=s=>l(e).nodeLookup.get(s);return{zoomIn:l(e).zoomIn,zoomOut:l(e).zoomOut,getInternalNode:r,getNode:s=>r(s)?.internals.userNode,getNodes:s=>s===void 0?l(e).nodes:Xr(l(e).nodeLookup,s),getEdge:s=>l(e).edgeLookup.get(s),getEdges:s=>s===void 0?l(e).edges:Xr(l(e).edgeLookup,s),setZoom:(s,i)=>{const a=l(e).panZoom;return a?a.scaleTo(s,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>l(e).viewport.zoom,setViewport:async(s,i)=>{const a=l(e).viewport;return l(e).panZoom?(await l(e).panZoom.setViewport({x:s.x??a.x,y:s.y??a.y,zoom:s.zoom??a.zoom},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Lo(l(e).viewport),setCenter:async(s,i,a)=>l(e).setCenter(s,i,a),fitView:s=>l(e).fitView(s),fitBounds:async(s,i)=>{if(!l(e).panZoom)return Promise.resolve(!1);const a=Uo(s,l(e).width,l(e).height,l(e).minZoom,l(e).maxZoom,i?.padding??.1);return await l(e).panZoom.setViewport(a,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(s,i=!0,a)=>{const c=Ar(s),u=c?s:t(s);return u?(a||l(e).nodes).filter(d=>{const h=l(e).nodeLookup.get(d.id);if(!h||!c&&d.id===s.id)return!1;const f=Tt(h),g=en(f,u);return i&&g>0||g>=f.width*f.height||g>=u.width*u.height}):[]},isNodeIntersecting:(s,i,a=!0)=>{const u=Ar(s)?s:t(s);if(!u)return!1;const d=en(u,i);return a&&d>0||d>=u.width*u.height},deleteElements:async({nodes:s=[],edges:i=[]})=>{const{nodes:a,edges:c}=await ad({nodesToRemove:s,edgesToRemove:i,nodes:l(e).nodes,edges:l(e).edges,onBeforeDelete:l(e).onbeforedelete});return a&&(l(e).nodes=qe(()=>l(e).nodes).filter(u=>!a.some(({id:d})=>d===u.id))),c&&(l(e).edges=qe(()=>l(e).edges).filter(u=>!c.some(({id:d})=>d===u.id))),{deletedNodes:a,deletedEdges:c}},screenToFlowPosition:(s,i={snapToGrid:!0})=>{if(!l(e).domNode)return s;const a=i.snapToGrid?l(e).snapGrid:!1,{x:c,y:u,zoom:d}=l(e).viewport,{x:h,y:f}=l(e).domNode.getBoundingClientRect(),g={x:s.x-h,y:s.y-f};return dn(g,[c,u,d],a!==null,a||[1,1])},flowToScreenPosition:s=>{if(!l(e).domNode)return s;const{x:i,y:a,zoom:c}=l(e).viewport,{x:u,y:d}=l(e).domNode.getBoundingClientRect(),h=Ln(s,[i,a,c]);return{x:h.x+u,y:h.y+d}},toObject:()=>structuredClone({nodes:[...l(e).nodes],edges:[...l(e).edges],viewport:{...l(e).viewport}}),updateNode:n,updateNodeData:(s,i,a)=>{const c=l(e).nodeLookup.get(s)?.internals.userNode;if(!c)return;const u=typeof i=="function"?i(c):i;n(s,d=>({...d,data:a?.replace?u:{...d.data,...u}}))},updateEdge:o,getNodesBounds:s=>od(s,{nodeLookup:l(e).nodeLookup,nodeOrigin:l(e).nodeOrigin}),getHandleConnections:({type:s,id:i,nodeId:a})=>Array.from(l(e).connectionLookup.get(`${a}-${s}-${i??null}`)?.values()??[])}}function Xr(e,t){const n=[];for(const o of t){const r=e.get(o);if(r){const s="internals"in r?r.internals?.userNode:r;n.push(s)}}return n}function nh(e,t){re(t,!0);let n=F(t,"store",15),o=F(t,"selectionKey",3,"Shift"),r=F(t,"multiSelectionKey",19,()=>Vn()?"Meta":"Control"),s=F(t,"deleteKey",3,"Backspace"),i=F(t,"panActivationKey",3," "),a=F(t,"zoomActivationKey",19,()=>Vn()?"Meta":"Control"),{deleteElements:c}=th();function u(p){return p!==null&&typeof p=="object"}function d(p){return u(p)?p.modifier||[]:[]}function h(p){return p==null?"":u(p)?p.key:p}function f(p,k){return(Array.isArray(p)?p:[p]).map(z=>{const N=h(z);return{key:N,modifier:d(z),enabled:N!==null,callback:k}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function m(){const p=n().nodes.filter(N=>N.selected),k=n().edges.filter(N=>N.selected),{deletedNodes:y,deletedEdges:z}=await c({nodes:p,edges:k});(y.length>0||z.length>0)&&n().ondelete?.({nodes:y,edges:z})}He("blur",Ne,g),He("contextmenu",Ne,g),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(r(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(r(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(s(),p=>{!(p.originalEvent.ctrlKey||p.originalEvent.metaKey||p.originalEvent.shiftKey)&&!Zi(p.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),m())}),type:"keydown"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(s(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(i(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(i(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),be(Ne,(p,k)=>ze?.(p,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),ie()}var oh=pe('<path fill="none" class="svelte-flow__connection-path"></path>'),rh=pe('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function ih(e,t){re(t,!0);let n=x(()=>{if(!t.store.connection.inProgress)return"";const i={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case ot.Bezier:{const[a]=Wi(i);return a}case ot.Straight:{const[a]=Gi(i);return a}case ot.Step:case ot.SmoothStep:{const[a]=Qo({...i,borderRadius:t.type===ot.Step?0:void 0});return a}}});var o=ye(),r=se(o);{var s=i=>{var a=rh(),c=Y(a),u=Y(c);{var d=f=>{var g=ye(),m=se(g);Ro(m,()=>t.LineComponent,(p,k)=>{k(p,{})}),V(f,g)},h=f=>{var g=oh();ce(()=>{oe(g,"d",l(n)),Ke(g,t.style)}),V(f,g)};ae(u,f=>{t.LineComponent?f(d):f(h,!1)})}K(c),K(a),ce(f=>{oe(a,"width",t.store.width),oe(a,"height",t.store.height),Ke(a,t.containerStyle),at(c,0,f)},[()=>pt(["svelte-flow__connection",td(t.store.connection.isValid)])]),V(i,a)};ae(r,i=>{t.store.connection.inProgress&&i(s)})}V(e,o),ie()}var sh=ee("<div><!></div>");function ds(e,t){re(t,!0);let n=F(t,"position",3,"top-right"),o=mt(t,["$$slots","$$events","$$legacy","position","style","class","children"]),r=x(()=>`${n()}`.split("-"));var s=sh();lt(s,a=>({class:a,style:t.style,...o}),[()=>["svelte-flow__panel",t.class,...l(r)]]);var i=Y(s);Pe(i,()=>t.children??zt),K(s),V(e,s),ie()}var ah=ee('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function lh(e,t){re(t,!0);let n=F(t,"position",3,"bottom-right");var o=ye(),r=se(o);{var s=i=>{ds(i,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,c)=>{var u=ah();V(a,u)},$$slots:{default:!0}})};ae(r,i=>{t.proOptions?.hideAttribution||i(s)})}V(e,o),ie()}var ch=ee("<div><!></div>");function uh(e,t){re(t,!0);let n=F(t,"domNode",15),o=F(t,"clientWidth",15),r=F(t,"clientHeight",15),s=x(()=>t.rest.class),i=x(()=>Zs(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","style","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig"]));function a(d){d.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(d)}var c=ch();lt(c,d=>({class:["svelte-flow","svelte-flow__container",l(s),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...l(i),[We]:d}),[()=>({width:Fe(t.width),height:Fe(t.height)})],void 0,"svelte-12wlba6");var u=Y(c);Pe(u,()=>t.children??zt),K(c),an(c,d=>n(d),()=>n()),ar(c,"clientHeight",r),ar(c,"clientWidth",o),V(e,c),ie()}var dh=ee('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),fh=ee("<!> <!>",1),hh=ee("<!> <!> <!> <!> <!>",1);function gh(e,t){re(t,!0);let n=F(t,"paneClickDistance",3,1),o=F(t,"nodeClickDistance",3,1),r=F(t,"panOnScrollMode",19,()=>it.Free),s=F(t,"preventScrolling",3,!0),i=F(t,"zoomOnScroll",3,!0),a=F(t,"zoomOnDoubleClick",3,!0),c=F(t,"zoomOnPinch",3,!0),u=F(t,"panOnScroll",3,!1),d=F(t,"panOnDrag",3,!0),h=F(t,"selectionOnDrag",3,!0),f=F(t,"connectionLineType",19,()=>ot.Bezier),g=F(t,"nodes",31,()=>qt([])),m=F(t,"edges",31,()=>qt([])),p=F(t,"viewport",15,void 0),k=mt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),y=kf({props:k,width:t.width,height:t.height,get nodes(){return g()},set nodes(N){g(N)},get edges(){return m()},set edges(N){m(N)},get viewport(){return p()},set viewport(N){p(N)}});const z=Gt(Io);z&&z.setStore&&z.setStore(y),En(Io,{provider:!1,getStore(){return y}}),ht(()=>{const N={nodes:y.selectedNodes,edges:y.selectedEdges};qe(()=>t.onselectionchange)?.(N);for(const E of y.selectionChangeHandlers.values())E(N)}),Ho(()=>{y.reset()}),uh(e,{get colorMode(){return y.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return k},get domNode(){return y.domNode},set domNode(N){y.domNode=N},get clientWidth(){return y.width},set clientWidth(N){y.width=N},get clientHeight(){return y.height},set clientHeight(N){y.height=N},children:(N,E)=>{var M=hh(),S=se(M);nh(S,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return y},set store(R){y=R}});var A=B(S,2);Cf(A,{get panOnScrollMode(){return r()},get preventScrolling(){return s()},get zoomOnScroll(){return i()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return c()},get panOnScroll(){return u()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return y},set store(R){y=R},children:(R,b)=>{Af(R,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get selectionOnDrag(){return h()},get store(){return y},set store(C){y=C},children:(C,v)=>{var w=fh(),_=se(w);Mf(_,{get store(){return y},set store(I){y=I},children:(I,T)=>{var O=dh(),L=B(se(O),2);Gf(L,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return y},set store(Q){y=Q}});var U=B(L,4);ih(U,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return y},set store(Q){y=Q}});var G=B(U,2);Lf(G,{get nodeClickDistance(){return o()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return y},set store(Q){y=Q}});var q=B(G,2);$f(q,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return y},set store(Q){y=Q}}),rn(2),V(I,O)},$$slots:{default:!0}});var P=B(_,2);{let I=x(()=>!!(y.selectionRect&&y.selectionRectMode==="user")),T=x(()=>y.selectionRect?.width),O=x(()=>y.selectionRect?.height),L=x(()=>y.selectionRect?.x),U=x(()=>y.selectionRect?.y);us(P,{get isVisible(){return l(I)},get width(){return l(T)},get height(){return l(O)},get x(){return l(L)},get y(){return l(U)}})}V(C,w)},$$slots:{default:!0}})},$$slots:{default:!0}});var H=B(A,2);lh(H,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var X=B(H,2);If(X,{get store(){return y}});var J=B(X,2);Pe(J,()=>t.children??zt),V(N,M)},$$slots:{default:!0}}),ie()}var vh=ee("<button><!></button>");function pn(e,t){let n=mt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var o=vh();lt(o,s=>({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[We]:s}),[()=>({"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor})]);var r=Y(o);Pe(r,()=>t.children??zt),K(o),V(e,o)}var yh=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function mh(e){var t=yh();V(e,t)}var ph=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function wh(e){var t=ph();V(e,t)}var _h=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function xh(e){var t=_h();V(e,t)}var bh=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function kh(e){var t=bh();V(e,t)}var Sh=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function Eh(e){var t=Sh();V(e,t)}var Ch=ee("<!> <!>",1),Nh=ee("<!> <!> <!> <!> <!> <!>",1);function Ah(e,t){re(t,!0);let n=F(t,"position",3,"bottom-left"),o=F(t,"orientation",3,"vertical"),r=F(t,"showZoom",3,!0),s=F(t,"showFitView",3,!0),i=F(t,"showLock",3,!0),a=mt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),c=x(_t);const u={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let d=x(()=>l(c).nodesDraggable||l(c).nodesConnectable||l(c).elementsSelectable),h=x(()=>l(c).viewport.zoom<=l(c).minZoom),f=x(()=>l(c).viewport.zoom>=l(c).maxZoom),g=x(()=>l(c).ariaLabelConfig),m=x(()=>o()==="horizontal"?"horizontal":"vertical");const p=()=>{l(c).zoomIn()},k=()=>{l(c).zoomOut()},y=()=>{l(c).fitView(t.fitViewOptions)},z=()=>{let N=!l(d);l(c).nodesDraggable=N,l(c).nodesConnectable=N,l(c).elementsSelectable=N};{let N=x(()=>["svelte-flow__controls",l(m),t.class]);ds(e,St({get class(){return l(N)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return l(g)["controls.ariaLabel"]},get style(){return t.style}},()=>a,{children:(E,M)=>{var S=Nh(),A=se(S);{var H=T=>{var O=ye(),L=se(O);Pe(L,()=>t.before),V(T,O)};ae(A,T=>{t.before&&T(H)})}var X=B(A,2);{var J=T=>{var O=Ch(),L=se(O);pn(L,St({onclick:p,class:"svelte-flow__controls-zoomin",get title(){return l(g)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomIn.ariaLabel"]},get disabled(){return l(f)}},()=>u,{children:(G,q)=>{mh(G)},$$slots:{default:!0}}));var U=B(L,2);pn(U,St({onclick:k,class:"svelte-flow__controls-zoomout",get title(){return l(g)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomOut.ariaLabel"]},get disabled(){return l(h)}},()=>u,{children:(G,q)=>{wh(G)},$$slots:{default:!0}})),V(T,O)};ae(X,T=>{r()&&T(J)})}var R=B(X,2);{var b=T=>{pn(T,St({class:"svelte-flow__controls-fitview",onclick:y,get title(){return l(g)["controls.fitView.ariaLabel"]},get"aria-label"(){return l(g)["controls.fitView.ariaLabel"]}},()=>u,{children:(O,L)=>{xh(O)},$$slots:{default:!0}}))};ae(R,T=>{s()&&T(b)})}var C=B(R,2);{var v=T=>{pn(T,St({class:"svelte-flow__controls-interactive",onclick:z,get title(){return l(g)["controls.interactive.ariaLabel"]},get"aria-label"(){return l(g)["controls.interactive.ariaLabel"]}},()=>u,{children:(O,L)=>{var U=ye(),G=se(U);{var q=Z=>{Eh(Z)},Q=Z=>{kh(Z)};ae(G,Z=>{l(d)?Z(q):Z(Q,!1)})}V(O,U)},$$slots:{default:!0}}))};ae(C,T=>{i()&&T(v)})}var w=B(C,2);{var _=T=>{var O=ye(),L=se(O);Pe(L,()=>t.children),V(T,O)};ae(w,T=>{t.children&&T(_)})}var P=B(w,2);{var I=T=>{var O=ye(),L=se(O);Pe(L,()=>t.after),V(T,O)};ae(P,T=>{t.after&&T(I)})}V(E,S)},$$slots:{default:!0}}))}ie()}var st;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(st||(st={}));var Ph=pe("<circle></circle>");function Mh(e,t){var n=Ph();ce(()=>{oe(n,"cx",t.radius),oe(n,"cy",t.radius),oe(n,"r",t.radius),at(n,0,pt(["svelte-flow__background-pattern","dots",t.class]))}),V(e,n)}var Dh=pe("<path></path>");function Th(e,t){re(t,!0);var n=Dh();ce(()=>{oe(n,"stroke-width",t.lineWidth),oe(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),at(n,0,pt(["svelte-flow__background-pattern",t.variant,t.class]))}),V(e,n),ie()}const Ih={[st.Dots]:1,[st.Lines]:1,[st.Cross]:6};var zh=pe('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Oh(e,t){re(t,!0);let n=F(t,"variant",19,()=>st.Dots),o=F(t,"gap",3,20),r=F(t,"lineWidth",3,1),s=x(_t),i=x(()=>n()===st.Dots),a=x(()=>n()===st.Cross),c=x(()=>Array.isArray(o())?o():[o(),o()]),u=x(()=>`background-pattern-${l(s).flowId}-${t.id??""}`),d=x(()=>[l(c)[0]*l(s).viewport.zoom||1,l(c)[1]*l(s).viewport.zoom||1]),h=x(()=>(t.size??Ih[n()])*l(s).viewport.zoom),f=x(()=>l(a)?[l(h),l(h)]:l(d)),g=x(()=>l(i)?[l(h)/2,l(h)/2]:[l(f)[0]/2,l(f)[1]/2]);var m=zh();let p;var k=Y(m),y=Y(k);{var z=M=>{{let S=x(()=>l(h)/2);Mh(M,{get radius(){return l(S)},get class(){return t.patternClass}})}},N=M=>{Th(M,{get dimensions(){return l(f)},get variant(){return n()},get lineWidth(){return r()},get class(){return t.patternClass}})};ae(y,M=>{l(i)?M(z):M(N,!1)})}K(k);var E=B(k);K(m),ce(M=>{at(m,0,pt(["svelte-flow__background","svelte-flow__container",t.class])),p=Ke(m,"",p,M),oe(k,"id",l(u)),oe(k,"x",l(s).viewport.x%l(d)[0]),oe(k,"y",l(s).viewport.y%l(d)[1]),oe(k,"width",l(d)[0]),oe(k,"height",l(d)[1]),oe(k,"patternTransform",`translate(-${l(g)[0]},-${l(g)[1]})`),oe(E,"fill",`url(#${l(u)})`)},[()=>({"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor})]),V(e,m),ie()}var Hh=(e,t)=>{t({event:e})},Rh=ee("<option> </option>"),Lh=(e,t)=>{t({event:e})},Vh=ee("<option> </option>"),Bh=ee('<div class="flex flex-row space-x-4"><div>Enter Label:</div> <div><input type="text"/></div></div>'),Kh=ee('<div class="flex flex-row space-x-4"><div>Enter Variable Name:</div> <div><input type="text"/></div></div> <div class="flex flex-row space-x-4"><div>Enter Label Text:</div> <div><input type="text"/></div></div>',1),Fh=ee('<div class="flex flex-row space-x-4"><div>name:</div> <div><input type="text"/></div></div>'),Yh=ee('<div class="text-xl border-3 rounded-lg flex flex-col space-y-5"><div class="flex flex-row space-x-4"><div class="rounded-md bg-red-400 shrink px-2"><button>SAVE</button></div></div> <div class="flex flex-row space-x-4"><div>Type:</div> <select></select></div> <!> <!> <!></div>'),Zh=ee('<div class="border-3 m-3 rounded-lg flex-row space-x-4"><button><div class="rounded-md text-center px-1 py-0.5 bg-red-400 shrink">EDIT</div></button> <div class="text-xl p-1 text-center"> </div></div> <div class="text-5xl text-center"><button class="text-blue-800 hover:text-red-600">+</button></div>',1),Xh=ee('<div class="p-5 bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg h-[95%] overflow-y-scroll m-3"><button class="text-white bg-red-500 hover:bg-red-600 rounded-full w-8 h-8 flex items-center justify-center transition absolute translate-x-[-2vw] translate-y-[-3.5vh]">-</button> <div class="font-bold text-4xl text-center bg-gradient-to-b from-red-500 to-gray-400 text-white rounded-lg"><input type="text" class="font-bold text-4xl text-center"/></div> <div class="font-bold text-2xl text-center rounded-lg bg-gray-400 text-white mt-3"><label>Agent:</label> <select class="text-center"></select></div> <div class="pt-5 flex flex-col"><div class="text-5xl text-center"><button class="text-blue-800 hover:text-red-600">+</button></div> <!></div></div>');function Wh(e,t){re(t,!0);let n=["output-text","input-text","input-document","input-image"],o=x(()=>Ee.at(Xe.currentStepID)?.formItems);const r=({event:h,idx:f})=>{h.preventDefault(),l(o).splice(f+1,0,{type:"output",name:"Set Name",label:"Set Text",isBeingEdited:!0})},s=({event:h,idx:f})=>{h.preventDefault(),l(o)[f].isBeingEdited=!0},i=({event:h,idx:f})=>{h.preventDefault(),l(o)[f].isBeingEdited=!1},a=({event:h})=>{h.preventDefault(),Xe.active=!1};var c=ye(),u=se(c);{var d=h=>{var f=Xh(),g=Y(f);g.__click=[Hh,a];var m=B(g,2),p=Y(m);tt(p),K(m);var k=B(m,2),y=B(Y(k),2);rt(y,21,()=>ut,Ft,(S,A)=>{var H=ye(),X=se(H);{var J=R=>{var b=Rh(),C=Y(b,!0);K(b);var v={};ce(()=>{me(C,l(A).role),v!==(v=l(A).role)&&(b.value=(b.__value=l(A).role)??"")}),V(R,b)};ae(X,R=>{l(A).status!="deleted"&&R(J)})}V(S,H)}),K(y),K(k);var z=B(k,2),N=Y(z),E=Y(N);E.__click=[Lh,r],K(N);var M=B(N,2);rt(M,17,()=>l(o),Ft,(S,A,H)=>{var X=ye(),J=se(X);{var R=C=>{var v=Yh(),w=Y(v),_=Y(w),P=Y(_);P.__click=()=>i({event,idx:H}),K(_),K(w);var I=B(w,2),T=B(Y(I),2);rt(T,21,()=>n,Ft,(Z,W)=>{var $=Vh(),ne=Y($,!0);K($);var fe={};ce(()=>{me(ne,l(W)),fe!==(fe=l(W))&&($.value=($.__value=l(W))??"")}),V(Z,$)}),K(T),K(I);var O=B(I,2);{var L=Z=>{var W=Bh(),$=B(Y(W),2),ne=Y($);tt(ne),K($),K(W),nt(ne,()=>l(A).label,fe=>l(A).label=fe),V(Z,W)};ae(O,Z=>{l(A).type==="output-text"&&Z(L)})}var U=B(O,2);{var G=Z=>{var W=Kh(),$=se(W),ne=B(Y($),2),fe=Y(ne);tt(fe),K(ne),K($);var te=B($,2),le=B(Y(te),2),de=Y(le);tt(de),K(le),K(te),nt(fe,()=>l(A).name,he=>l(A).name=he),nt(de,()=>l(A).label,he=>l(A).label=he),V(Z,W)};ae(U,Z=>{l(A).type==="input-text"&&Z(G)})}var q=B(U,2);{var Q=Z=>{var W=Fh(),$=B(Y(W),2),ne=Y($);tt(ne),K($),K(W),nt(ne,()=>l(A).name,fe=>l(A).name=fe),V(Z,W)};ae(q,Z=>{(l(A).type=="input-image"||l(A).type==="input-document")&&Z(Q)})}K(v),Nn(T,()=>l(A).type,Z=>l(A).type=Z),V(C,v)},b=C=>{var v=Zh(),w=se(v),_=Y(w);_.__click=()=>s({event,idx:H});var P=B(_,2),I=Y(P,!0);K(P),K(w);var T=B(w,2),O=Y(T);O.__click=L=>{r({event:L,idx:H})},K(T),ce(()=>me(I,l(A).label)),V(C,v)};ae(J,C=>{l(A).isBeingEdited?C(R):C(b,!1)})}V(S,X)}),K(z),K(f),nt(p,()=>Ee[Xe.currentStepID].label,S=>Ee[Xe.currentStepID].label=S),Nn(y,()=>Ee[Xe.currentStepID].agent,S=>Ee[Xe.currentStepID].agent=S),V(h,f)};ae(u,h=>{Xe.active&&h(d)})}V(e,c),ie()}sn(["click"]);var qh=ee('<!> <div class="maxw-[5vw] px-3 text-center"><div> </div> <div> </div> <button class="nodrag"><svg width="15px" height="15px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="Complete"><g id="edit"><g><path d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><polygon fill="none" points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon></g></g></g></svg></button></div> <!>',1);function Gh(e,t){re(t,!0);const n=({event:f})=>{Xe.currentStepID=t.data.id,Xe.active=!0};var o=qh(),r=se(o);Qe(r,{type:"target",get position(){return j.Left}});var s=B(r,2),i=Y(s),a=Y(i,!0);K(i);var c=B(i,2),u=Y(c,!0);K(c);var d=B(c,2);K(s);var h=B(s,2);Qe(h,{type:"source",get position(){return j.Right}}),ce(()=>{me(a,t.data.agent),me(u,t.data.label)}),He("click",d,n),V(e,o),ie()}var Uh=ee('<!> <div class="maxw-[5vw] px-3 text-center"><div> </div> <div> </div> <div> </div> <button class="nodrag"><svg width="15px" height="15px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="Complete"><g id="edit"><g><path d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><polygon fill="none" points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon></g></g></g></svg></button></div> <!> <!>',1);function Qh(e,t){re(t,!0);var n=Uh(),o=se(n);Qe(o,{type:"target",get position(){return j.Left}});var r=B(o,2),s=Y(r),i=Y(s,!0);K(s);var a=B(s,2),c=Y(a,!0);K(a);var u=B(a,2),d=Y(u,!0);K(u),rn(2),K(r);var h=B(r,2);Qe(h,{id:"pos",type:"source",class:"!bg-green-500",get position(){return j.Top}});var f=B(h,2);Qe(f,{id:"neg",type:"source",class:"!bg-red-500",get position(){return j.Bottom}}),ce(()=>{me(i,t.data.agent),me(c,t.data.label),me(d,t.data.condition)}),V(e,n),ie()}var Jh=ee("<!> <!>",1),jh=ee('<li class="px-4 py-2 hover:bg-red-500 hover:text-white cursor-pointer">Delete Node</li>'),$h=ee('<ul class="context-menu absolute bg-white border rounded shadow-md w-40 py-1 svelte-tu7f7e"><li class="px-4 py-2 hover:bg-gray-200 cursor-pointer">Add Activity</li> <li class="px-4 py-2 hover:bg-gray-200 cursor-pointer">Add Control</li> <!></ul> <div class="fixed inset-0"></div>',1),eg=ee("<option> </option>"),tg=ee('<div class="mb-4"><label class="block font-medium mb-1">Condition:</label> <input type="text" class="w-full border rounded px-2 py-1"/></div>'),ng=ee('<div class="fixed inset-0 flex items-center justify-center modal-bg p-4 svelte-tu7f7e"><div class="bg-white rounded shadow-lg p-6 w-96 max-w-full"><h2 class="text-xl font-semibold mb-4">Create New Node</h2> <div class="mb-4"><label class="block font-medium mb-1">Node Type:</label> <select class="w-full border rounded px-2 py-1"><option>Activity Node</option><option>Control Node</option></select></div> <div class="mb-4"><label class="block font-medium mb-1">Name:</label> <input type="text" class="w-full border rounded px-2 py-1"/></div> <div class="mb-4"><label class="block font-medium mb-1">Agent:</label> <select class="w-full border rounded px-2 py-1"></select></div> <!> <div class="flex justify-end space-x-3"><button class="px-4 py-2 rounded bg-gray-300 hover:bg-gray-400">Cancel</button> <button class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Create</button></div></div></div>'),og=ee('<div class="relative w-full h-screen"><!> <!> <!></div>');function rg(e,t){re(t,!1);const n={processStep:Gh,controllStep:Qh},o={id:"start",type:"input",data:Ee[0],position:{x:50,y:200},sourcePosition:j.Right},r={id:"end",type:"output",data:Ee[1],position:{x:650,y:200},targetPosition:j.Left};let s=Ae([o,r,{id:"1",data:Ee[2],type:"processStep",position:{x:400,y:200}}]),i=Ae([]),a=Ae(0),c=Ae(0),u=Ae(null),d=Ae(!1),h=Ae(!1),f=Ae("input"),g=Ae(""),m=Ae(""),p=Ae("");function k(){return"node_"+Math.random().toString(36).substr(2,9)}const y=({event:w})=>{w.preventDefault(),D(d,!0),D(u,null),D(a,w.clientX),D(c,w.clientY),console.log("click graph")},z=({event:w,node:_})=>{w.preventDefault(),D(d,!0),D(u,_.id),D(a,w.clientX),D(c,w.clientY),console.log("click node")};function N(){D(h,!0),D(d,!1),D(g,""),D(m,""),D(p,""),D(f,"input")}function E(){D(h,!0),D(d,!1),D(g,""),D(m,""),D(p,""),D(f,"control")}function M(){if(l(u)){if(l(u)==="start"||l(u)==="end"){alert("Cannot delete start or end nodes."),D(d,!1);return}D(s,l(s).filter(w=>w.id!==l(u))),D(i,l(i).filter(w=>w.source!==l(u)&&w.target!==l(u))),D(d,!1)}}function S(){if(!l(g).trim()||!l(m).trim()){alert("Name and Agent are required.");return}const w=k();let _="";l(f)==="input"?(_="processStep",Ee.push({id:Ee.length,label:l(g).trim(),agent:l(m).trim(),type:"input",formItems:[]})):(_="controllStep",Ee.push({id:Ee.length,label:l(g).trim(),agent:l(m).trim(),condition:l(p).trim(),type:"control",formItems:[]}));const P={x:l(a)-400,y:l(c)-300};if(D(s,[...l(s),{id:w,type:_,data:Ee.at(-1),position:P,sourcePosition:j.Right,targetPosition:j.Left}]),l(u)){const I=l(s).find(T=>T.id===l(u));I&&I.data.type==="input"&&D(i,l(i).filter(T=>T.source!==I.id)),l(u)!=="end"&&D(i,[...l(i),{id:`e_${l(u)}_${w}`,source:l(u),target:w}])}D(h,!1)}function A(){D(d,!1)}function H(){D(h,!1)}Wr();var X=og(),J=Y(X);gh(J,{get nodeTypes(){return n},fitView:!0,onnodecontextmenu:z,onpanecontextmenu:y,class:"bg-gray-100",defaultEdgeOptions:{animated:"true"},get nodes(){return l(s)},set nodes(w){D(s,w)},get edges(){return l(i)},set edges(w){D(i,w)},children:(w,_)=>{var P=Jh(),I=se(P);Oh(I,{});var T=B(I,2);Ah(T,{}),V(w,P)},$$slots:{default:!0},$$legacy:!0});var R=B(J,2);{var b=w=>{var _=$h(),P=se(_),I=Y(P),T=B(I,2),O=B(T,2);{var L=G=>{var q=jh();He("click",q,M),V(G,q)};ae(O,G=>{l(u)&&l(u)!=="start"&&l(u)!=="end"&&G(L)})}K(P);var U=B(P,2);ce(()=>Ke(P,`top: ${l(c)??""}px; left: ${l(a)??""}px;`)),He("click",I,N),He("click",T,E),He("click",P,ca(function(G){ua.call(this,t,G)})),He("click",U,A),V(w,_)};ae(R,w=>{l(d)&&w(b)})}var C=B(R,2);{var v=w=>{var _=ng(),P=Y(_),I=B(Y(P),2),T=B(Y(I),2);ce(()=>{l(f),or(()=>{})});var O=Y(T);O.value=O.__value="input";var L=B(O);L.value=L.__value="control",K(T),K(I);var U=B(I,2),G=B(Y(U),2);tt(G),K(U);var q=B(U,2),Q=B(Y(q),2);ce(()=>{l(m),or(()=>{})}),rt(Q,5,()=>ut,Ft,(te,le)=>{var de=ye(),he=se(de);{var je=ct=>{var Ie=eg(),ue=Y(Ie,!0);K(Ie);var ve={};ce(()=>{me(ue,l(le).role),ve!==(ve=l(le).role)&&(Ie.value=(Ie.__value=l(le).role)??"")}),V(ct,Ie)};ae(he,ct=>{l(le).status!="deleted"&&ct(je)})}V(te,de)}),K(Q),K(q);var Z=B(q,2);{var W=te=>{var le=tg(),de=B(Y(le),2);tt(de),K(le),nt(de,()=>l(p),he=>D(p,he)),V(te,le)};ae(Z,te=>{l(f)==="control"&&te(W)})}var $=B(Z,2),ne=Y($),fe=B(ne,2);K($),K(P),K(_),Nn(T,()=>l(f),te=>D(f,te)),nt(G,()=>l(g),te=>D(g,te)),Nn(Q,()=>l(m),te=>D(m,te)),He("click",ne,H),He("click",fe,S),V(w,_)};ae(C,w=>{l(h)&&w(v)})}K(X),V(e,X),ie()}var ig=ee('<div class="absolute z-10 opacity-95 mt-5"><!></div> <div class="absolute z-10 opacity-95 mt-5 w-[30%] ml-[70%] h-[100%]"><!></div> <!>',1);function dg(e,t){re(t,!1);const n=!0;var o=ig(),r=se(o),s=Y(r);ma(s,{}),K(r);var i=B(r,2),a=Y(i);Wh(a,{}),K(i);var c=B(i,2);return rg(c,{}),V(e,o),aa(t,"prerender",n),ie({prerender:n})}export{dg as component};
