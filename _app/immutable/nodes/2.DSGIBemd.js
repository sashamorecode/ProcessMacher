import"../chunks/DsnmJJEf.js";import{i as Wr}from"../chunks/DyedvWJA.js";import{ae as Kn,aC as qr,aD as fs,aE as hs,h as l,aF as wo,M as Oo,e as Ge,aG as er,N as Gr,C as Ur,v as Ho,A as no,w as _e,ah as gs,x as vs,R as ys,y as ms,H as ps,z as tr,B as Ft,K as Lt,ai as ws,am as _s,D as qt,G as xs,F as bt,aH as nr,a6 as Ae,aq as Qr,aI as Yn,I as Jr,J as bs,aJ as Fn,aK as ks,aL as oo,aM as Gt,ak as Ss,aN as Es,ap as Cs,aO as Ns,X as Ps,aP as jr,aQ as As,L as rn,i as Ms,aR as Ds,aS as Ts,aT as Is,af as $r,aU as zs,aV as Os,aW as Hs,aX as Rs,aY as Ls,aZ as Vs,a_ as Bs,O as Ks,T as Ut,p as re,l as ee,a7 as ge,q as B,a as V,m as ie,V as D,n as F,o as K,c as ye,f as ae,t as ue,ay as Qt,u as Ys,a9 as _,s as Me,a$ as It,b0 as zt,b1 as Xn,b2 as ei,d as ht,b3 as pe,aa as Fs,aA as En,b4 as we,b5 as Pe,b6 as Xs,b7 as or}from"../chunks/9Mg6vh82.js";import{l as ti,i as Zs,c as Ws,d as Ot,a as qs,n as Gs,b as Us,e as Qs,s as me,f as _o,g as Ro,j as Re}from"../chunks/BK2XbIpB.js";import{i as le,p as Y,r as mt,b as sn,c as Lo,s as kt}from"../chunks/BDiy184L.js";const Js=[];function Vo(e,t=!1){return wn(e,new Map,"",Js)}function wn(e,t,n,o,r=null){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Kn(e)){var i=Array(e.length);t.set(e,i),r!==null&&t.set(r,i);for(var a=0;a<e.length;a+=1){var u=e[a];a in e&&(i[a]=wn(u,t,n,o))}return i}if(qr(e)===fs){i={},t.set(e,i),r!==null&&t.set(r,i);for(var d in e)i[d]=wn(e[d],t,n,o);return i}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return wn(e.toJSON(),t,n,o,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function js(e){let t=0,n=wo(0),o;return()=>{hs()&&(l(n),Oo(()=>(t===0&&(o=Ge(()=>e(()=>er(n)))),t+=1,()=>{Gr(()=>{t-=1,t===0&&(o?.(),o=void 0,er(n))})})))}}function Xt(e,t){return t}function $s(e,t,n){for(var o=e.items,r=[],s=t.length,i=0;i<s;i++)Es(t[i].e,r,!0);var a=s>0&&r.length===0&&n!==null;if(a){var u=n.parentNode;Cs(u),u.append(n),o.clear(),He(e,t[0].prev,t[s-1].next)}Ns(r,()=>{for(var d=0;d<s;d++){var c=t[d];a||(o.delete(c.k),He(e,c.prev,c.next)),Gt(c.e,!a)}})}function it(e,t,n,o,r,s=null){var i=e,a={flags:t,items:new Map,first:null},u=(t&jr)!==0;if(u){var d=e;i=_e?no(gs(d)):d.appendChild(Ur())}_e&&vs();var c=null,h=!1,f=new Map,g=ys(()=>{var m=n();return Kn(m)?m:m==null?[]:Qr(m)}),p,w;function k(){ea(w,p,a,f,i,r,t,o,n),s!==null&&(p.length===0?c?Jr(c):c=qt(()=>s(i)):c!==null&&bs(c,()=>{c=null}))}Ho(()=>{w??=Ps,p=l(g);var m=p.length;if(h&&m===0)return;h=m===0;let z=!1;if(_e){var N=ms(i)===ps;N!==(m===0)&&(i=tr(),no(i),Ft(!1),z=!0)}if(_e){for(var S=null,M,E=0;E<m;E++){if(Lt.nodeType===ws&&Lt.data===_s){i=Lt,z=!0,Ft(!1);break}var P=p[E],H=o(P,E);M=xo(Lt,a,S,null,P,H,E,r,t,n),a.items.set(H,M),S=M}m>0&&no(tr())}if(_e)m===0&&s&&(c=qt(()=>s(i)));else if(xs()){var X=new Set,J=bt;for(E=0;E<m;E+=1){P=p[E],H=o(P,E);var L=a.items.get(H)??f.get(H);L?(t&(Fn|Yn))!==0&&ni(L,P,E,t):(M=xo(null,a,null,null,P,H,E,r,t,n,!0),f.set(H,M)),X.add(H)}for(const[x,C]of a.items)X.has(x)||J.skipped_effects.add(C.e);J.add_callback(k)}else k();z&&Ft(!0),l(g)}),_e&&(i=Lt)}function ea(e,t,n,o,r,s,i,a,u){var d=(i&As)!==0,c=(i&(Fn|Yn))!==0,h=t.length,f=n.items,g=n.first,p=g,w,k=null,m,z=[],N=[],S,M,E,P;if(d)for(P=0;P<h;P+=1)S=t[P],M=a(S,P),E=f.get(M),E!==void 0&&(E.a?.measure(),(m??=new Set).add(E));for(P=0;P<h;P+=1){if(S=t[P],M=a(S,P),E=f.get(M),E===void 0){var H=o.get(M);if(H!==void 0){o.delete(M),f.set(M,H);var X=k?k.next:p;He(n,k,H),He(n,H,X),ro(H,X,r),k=H}else{var J=p?p.e.nodes_start:r;k=xo(J,n,k,k===null?n.first:k.next,S,M,P,s,i,u)}f.set(M,k),z=[],N=[],p=k.next;continue}if(c&&ni(E,S,P,i),(E.e.f&oo)!==0&&(Jr(E.e),d&&(E.a?.unfix(),(m??=new Set).delete(E))),E!==p){if(w!==void 0&&w.has(E)){if(z.length<N.length){var L=N[0],x;k=L.prev;var C=z[0],v=z[z.length-1];for(x=0;x<z.length;x+=1)ro(z[x],L,r);for(x=0;x<N.length;x+=1)w.delete(N[x]);He(n,C.prev,v.next),He(n,k,C),He(n,v,L),p=L,k=v,P-=1,z=[],N=[]}else w.delete(E),ro(E,p,r),He(n,E.prev,E.next),He(n,E,k===null?n.first:k.next),He(n,k,E),k=E;continue}for(z=[],N=[];p!==null&&p.k!==M;)(p.e.f&oo)===0&&(w??=new Set).add(p),N.push(p),p=p.next;if(p===null)continue;E=p}z.push(E),k=E,p=E.next}if(p!==null||w!==void 0){for(var b=w===void 0?[]:Qr(w);p!==null;)(p.e.f&oo)===0&&b.push(p),p=p.next;var y=b.length;if(y>0){var A=(i&jr)!==0&&h===0?r:null;if(d){for(P=0;P<y;P+=1)b[P].a?.measure();for(P=0;P<y;P+=1)b[P].a?.fix()}$s(n,b,A)}}d&&Gr(()=>{if(m!==void 0)for(E of m)E.a?.apply()}),e.first=n.first&&n.first.e,e.last=k&&k.e;for(var I of o.values())Gt(I.e);o.clear()}function ni(e,t,n,o){(o&Fn)!==0&&nr(e.v,t),(o&Yn)!==0?nr(e.i,n):e.i=n}function xo(e,t,n,o,r,s,i,a,u,d,c){var h=(u&Fn)!==0,f=(u&ks)===0,g=h?f?Ae(r,!1,!1):wo(r):r,p=(u&Yn)===0?i:wo(i),w={i:p,v:g,k:s,a:null,e:null,prev:n,next:o};try{if(e===null){var k=document.createDocumentFragment();k.append(e=Ur())}return w.e=qt(()=>a(e,g,p,d),_e),w.e.prev=n&&n.e,w.e.next=o&&o.e,n===null?c||(t.first=w):(n.next=w,n.e.next=w.e),o!==null&&(o.prev=w,o.e.prev=w.e),w}finally{}}function ro(e,t,n){for(var o=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==o;){var i=Ss(s);r.before(s),s=i}}function He(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ke(e,t,n){rn(()=>{var o=Ge(()=>t(e,n?.())||{});if(n&&o?.update){var r=!1,s={};Oo(()=>{var i=n();Ms(i),r&&Ds(s,i)&&(s=i,o.update(i))}),r=!0}if(o?.destroy)return()=>o.destroy()})}function ta(e,t){var n=void 0,o;Ho(()=>{n!==(n=t())&&(o&&(Gt(o),o=null),n&&(o=qt(()=>{rn(()=>n(e))})))})}function oi(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=oi(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function na(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=oi(e))&&(o&&(o+=" "),o+=t);return o}function pt(e){return typeof e=="object"?na(e):e??""}const rr=[...` 	
\r\f \v\uFEFF`];function oa(e,t,n){var o=e==null?"":""+e;if(t&&(o=o?o+" "+t:t),n){for(var r in n)if(n[r])o=o?o+" "+r:r;else if(o.length)for(var s=r.length,i=0;(i=o.indexOf(r,i))>=0;){var a=i+s;(i===0||rr.includes(o[i-1]))&&(a===o.length||rr.includes(o[a]))?o=(i===0?"":o.substring(0,i))+o.substring(a+1):i=a}}return o===""?null:o}function ir(e,t=!1){var n=t?" !important;":";",o="";for(var r in e){var s=e[r];s!=null&&s!==""&&(o+=" "+r+": "+s+n)}return o}function io(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ra(e,t){if(t){var n="",o,r;if(Array.isArray(t)?(o=t[0],r=t[1]):o=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,i=0,a=!1,u=[];o&&u.push(...Object.keys(o).map(io)),r&&u.push(...Object.keys(r).map(io));var d=0,c=-1;const w=e.length;for(var h=0;h<w;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):s?s===f&&(s=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?s=f:f==="("?i++:f===")"&&i--,!a&&s===!1&&i===0){if(f===":"&&c===-1)c=h;else if(f===";"||h===w-1){if(c!==-1){var g=io(e.substring(d,c).trim());if(!u.includes(g)){f!==";"&&h++;var p=e.substring(d,h).trim();n+=" "+p+";"}}d=h+1,c=-1}}}}return o&&(n+=ir(o)),r&&(n+=ir(r,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function lt(e,t,n,o,r,s){var i=e.__className;if(_e||i!==n||i===void 0){var a=oa(n,o,s);(!_e||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a)),e.__className=n}else if(s&&r!==s)for(var u in s){var d=!!s[u];(r==null||d!==!!r[u])&&e.classList.toggle(u,d)}return s}function so(e,t={},n,o){for(var r in n){var s=n[r];t[r]!==s&&(n[r]==null?e.style.removeProperty(r):e.style.setProperty(r,s,o))}}function Ye(e,t,n,o){var r=e.__style;if(_e||r!==t){var s=ra(t,o);(!_e||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}else o&&(Array.isArray(o)?(so(e,n?.[0],o[0]),so(e,n?.[1],o[1],"important")):so(e,n,o));return o}function Cn(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Kn(t))return Ts();for(var o of e.options)o.selected=t.includes(Zt(o));return}for(o of e.options){var r=Zt(o);if(Is(r,t)){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ri(e){var t=new MutationObserver(()=>{Cn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),$r(()=>{t.disconnect()})}function Nn(e,t,n=t){var o=!0;ti(e,"change",r=>{var s=r?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(s),Zt);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");i=a&&Zt(a)}n(i)}),rn(()=>{var r=t();if(Cn(e,r,o),o&&r===void 0){var s=e.querySelector(":checked");s!==null&&(r=Zt(s),n(r))}e.__value=r,o=!1}),ri(e)}function Zt(e){return"__value"in e?e.__value:e.value}const tt=Symbol("class"),qe=Symbol("style"),ii=Symbol("is custom element"),si=Symbol("is html");function nt(e){if(_e){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;oe(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var r=e.checked;oe(e,"checked",null),e.checked=r}}};e.__on_r=n,Vs(n),Qs()}}function ia(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function oe(e,t,n,o){var r=ai(e);_e&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="loading"&&(e[Rs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&li(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function sa(e,t,n,o,r=!1){var s=ai(e),i=s[ii],a=!s[si];let u=_e&&i;u&&Ft(!1);var d=t||{},c=e.tagName==="OPTION";for(var h in t)h in n||(n[h]=null);n.class?n.class=pt(n.class):(o||n[tt])&&(n.class=null),n[qe]&&(n.style??=null);var f=li(e);for(const N in n){let S=n[N];if(c&&N==="value"&&S==null){e.value=e.__value="",d[N]=S;continue}if(N==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";lt(e,g,S,o,t?.[tt],n[tt]),d[N]=S,d[tt]=n[tt];continue}if(N==="style"){Ye(e,S,t?.[qe],n[qe]),d[N]=S,d[qe]=n[qe];continue}var p=d[N];if(!(S===p&&!(S===void 0&&e.hasAttribute(N)))){d[N]=S;var w=N[0]+N[1];if(w!=="$$")if(w==="on"){const M={},E="$$"+N;let P=N.slice(2);var k=Us(P);if(Zs(P)&&(P=P.slice(0,-7),M.capture=!0),!k&&p){if(S!=null)continue;e.removeEventListener(P,d[E],M),d[E]=null}if(S!=null)if(k)e[`__${P}`]=S,Ot([P]);else{let H=function(X){d[N].call(this,X)};d[E]=Ws(P,e,H,M)}else k&&(e[`__${P}`]=void 0)}else if(N==="style")oe(e,N,S);else if(N==="autofocus")qs(e,!!S);else if(!i&&(N==="__value"||N==="value"&&S!=null))e.value=e.__value=S;else if(N==="selected"&&c)ia(e,S);else{var m=N;a||(m=Gs(m));var z=m==="defaultValue"||m==="defaultChecked";if(S==null&&!i&&!z)if(s[N]=null,m==="value"||m==="checked"){let M=e;const E=t===void 0;if(m==="value"){let P=M.defaultValue;M.removeAttribute(m),M.defaultValue=P,M.value=M.__value=E?P:null}else{let P=M.defaultChecked;M.removeAttribute(m),M.defaultChecked=P,M.checked=E?P:!1}}else e.removeAttribute(N);else z||f.includes(m)&&(i||typeof S!="string")?e[m]=S:typeof S!="function"&&oe(e,m,S)}}}return u&&Ft(!0),d}function ct(e,t,n=[],o=[],r,s=!1){zs(n,o,i=>{var a=void 0,u={},d=e.nodeName==="SELECT",c=!1;if(Ho(()=>{var f=t(...i.map(l)),g=sa(e,a,f,r,s);c&&d&&"value"in f&&Cn(e,f.value);for(let w of Object.getOwnPropertySymbols(u))f[w]||Gt(u[w]);for(let w of Object.getOwnPropertySymbols(f)){var p=f[w];w.description===Os&&(!a||p!==a[w])&&(u[w]&&Gt(u[w]),u[w]=qt(()=>ta(e,()=>p))),g[w]=p}a=g}),d){var h=e;rn(()=>{Cn(h,a.value,!0),ri(h)})}c=!0})}function ai(e){return e.__attributes??={[ii]:e.nodeName.includes("-"),[si]:e.namespaceURI===Hs}}var sr=new Map;function li(e){var t=sr.get(e.nodeName);if(t)return t;sr.set(e.nodeName,t=[]);for(var n,o=e,r=Element.prototype;r!==o;){n=Ls(o);for(var s in n)n[s].set&&t.push(s);o=qr(o)}return t}function ot(e,t,n=t){var o=Bs(),r=new WeakSet;ti(e,"input",s=>{var i=s?e.defaultValue:e.value;if(i=ao(e)?lo(i):i,n(i),bt!==null&&r.add(bt),o&&i!==(i=t())){var a=e.selectionStart,u=e.selectionEnd;e.value=i??"",u!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(u,e.value.length))}}),(_e&&e.defaultValue!==e.value||Ge(t)==null&&e.value)&&(n(ao(e)?lo(e.value):e.value),bt!==null&&r.add(bt)),Oo(()=>{var s=t();e===document.activeElement&&r.has(bt)||ao(e)&&s===lo(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ao(e){var t=e.type;return t==="number"||t==="range"}function lo(e){return e===""?null:+e}function aa(e,t,n){var o=Ks(e,t);o&&o.set&&(e[t]=n,$r(()=>{e[t]=null}))}class Bo{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var o=this.#e.get(t)||new Set;return o.add(n),this.#e.set(t,o),this.#o().observe(t,this.#n),()=>{var r=this.#e.get(t);r.delete(n),r.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#o(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){Bo.entries.set(n.target,n);for(var o of this.#e.get(n.target)||[])o(n)}}))}}var la=new Bo({box:"border-box"});function ar(e,t,n){var o=la.observe(e,()=>n(e[t]));rn(()=>(Ge(()=>n(e[t])),o))}function ca(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function ua(e,t){var n=e.$$events?.[t.type],o=Kn(n)?n.slice():n==null?[]:[n];for(var r of o)r.call(this,t)}const ut=Ut([{role:"user",status:"active"},{role:"admin",status:"active"}]),De=Ut({active:!1,currentStepID:0}),Ce=Ut([{id:0,label:"Start",agent:"system",type:"start",condition:"never",formItems:[]},{id:1,label:"end",agent:"system",type:"end",formItems:[]},{id:2,label:"Start",agent:"system",type:"start",formItems:[]}]);function da(e,t){console.log("open"),D(t,!0)}function fa(e,t){D(t,!1)}var ha=ee('<div class="flex items-center justify-between bg-gray-50 p-3 rounded-md shadow-sm border border-gray-200"><span class="text-gray-700 font-medium mr-5"> </span> <button class="text-white bg-red-500 hover:bg-red-600 rounded-full w-8 h-8 flex items-center justify-center transition" aria-label="Remove Agent">−</button></div>'),ga=(e,t)=>{e.key==="Enter"&&t()},va=ee('<div id="new-agent-form" class="space-y-3 mt-4 bg-gray-50 p-4 rounded-md border border-gray-200"><input type="text" placeholder="Enter new role" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"/> <div class="flex justify-evenly space-x-2"><button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition">Submit</button> <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md transition">Cancel</button></div></div>'),ya=ee('<div class="p-6 mx-5 bg-blue-400 rounded-lg shadow-md space-y-4"><h2 class="text-xl font-semibold text-gray-800">agentList</h2> <div class="grid grid-cols-1 gap-4"></div> <button class="mt-4 text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md transition font-medium">+ Add Agent</button> <!></div>');function ma(e,t){re(t,!0);let n=ge(!1),o=ge("");function r(){let h=!1;ut.map(f=>(f.role===l(o)&&(h=!0,f.status="active"),f)),h||ut.push({role:l(o),status:"active"}),D(n,!1),D(o,""),console.log(ut,l(o))}function s(h){ut[Vo(h).i].status="deleted"}var i=ya(),a=B(F(i),2);it(a,21,()=>ut,Xt,(h,f,g)=>{var p=ye(),w=ae(p);{var k=m=>{var z=ha(),N=F(z),S=F(N,!0);K(N);var M=B(N,2);M.__click=()=>s({i:g}),K(z),ue(()=>me(S,l(f).role)),V(m,z)};le(w,m=>{l(f).status!=="deleted"&&m(k)})}V(h,p)}),K(a);var u=B(a,2);u.__click=[da,n];var d=B(u,2);{var c=h=>{var f=va(),g=F(f);nt(g),g.__keydown=[ga,r];var p=B(g,2),w=F(p);w.__click=r;var k=B(w,2);k.__click=[fa,n],K(p),K(f),ot(g,()=>l(o),m=>D(o,m)),V(h,f)};le(d,h=>{l(n)&&h(c)})}K(i),V(e,i),ie()}Ot(["click","keydown"]);var pa={value:()=>{}};function Zn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new _n(n)}function _n(e){this._=e}function wa(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}_n.prototype=Zn.prototype={constructor:_n,on:function(e,t){var n=this._,o=wa(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=_a(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=lr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=lr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _n(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function _a(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function lr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=pa,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var bo="http://www.w3.org/1999/xhtml";const cr={svg:"http://www.w3.org/2000/svg",xhtml:bo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cr.hasOwnProperty(t)?{space:cr[t],local:e}:e}function xa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bo&&t.documentElement.namespaceURI===bo?t.createElement(e):t.createElementNS(n,e)}}function ba(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ci(e){var t=Wn(e);return(t.local?ba:xa)(t)}function ka(){}function Ko(e){return e==null?ka:function(){return this.querySelector(e)}}function Sa(e){typeof e!="function"&&(e=Ko(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),u,d,c=0;c<i;++c)(u=s[c])&&(d=e.call(u,u.__data__,c,s))&&("__data__"in u&&(d.__data__=u.__data__),a[c]=d);return new Ne(o,this._parents)}function Ea(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ca(){return[]}function ui(e){return e==null?Ca:function(){return this.querySelectorAll(e)}}function Na(e){return function(){return Ea(e.apply(this,arguments))}}function Pa(e){typeof e=="function"?e=Na(e):e=ui(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,u,d=0;d<a;++d)(u=i[d])&&(o.push(e.call(u,u.__data__,d,i)),r.push(u));return new Ne(o,r)}function di(e){return function(){return this.matches(e)}}function fi(e){return function(t){return t.matches(e)}}var Aa=Array.prototype.find;function Ma(e){return function(){return Aa.call(this.children,e)}}function Da(){return this.firstElementChild}function Ta(e){return this.select(e==null?Da:Ma(typeof e=="function"?e:fi(e)))}var Ia=Array.prototype.filter;function za(){return Array.from(this.children)}function Oa(e){return function(){return Ia.call(this.children,e)}}function Ha(e){return this.selectAll(e==null?za:Oa(typeof e=="function"?e:fi(e)))}function Ra(e){typeof e!="function"&&(e=di(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],u,d=0;d<i;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&a.push(u);return new Ne(o,this._parents)}function hi(e){return new Array(e.length)}function La(){return new Ne(this._enter||this._groups.map(hi),this._parents)}function Pn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pn.prototype={constructor:Pn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Va(e){return function(){return e}}function Ba(e,t,n,o,r,s){for(var i=0,a,u=t.length,d=s.length;i<d;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new Pn(e,s[i]);for(;i<u;++i)(a=t[i])&&(r[i]=a)}function Ka(e,t,n,o,r,s,i){var a,u,d=new Map,c=t.length,h=s.length,f=new Array(c),g;for(a=0;a<c;++a)(u=t[a])&&(f[a]=g=i.call(u,u.__data__,a,t)+"",d.has(g)?r[a]=u:d.set(g,u));for(a=0;a<h;++a)g=i.call(e,s[a],a,s)+"",(u=d.get(g))?(o[a]=u,u.__data__=s[a],d.delete(g)):n[a]=new Pn(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&d.get(f[a])===u&&(r[a]=u)}function Ya(e){return e.__data__}function Fa(e,t){if(!arguments.length)return Array.from(this,Ya);var n=t?Ka:Ba,o=this._parents,r=this._groups;typeof e!="function"&&(e=Va(e));for(var s=r.length,i=new Array(s),a=new Array(s),u=new Array(s),d=0;d<s;++d){var c=o[d],h=r[d],f=h.length,g=Xa(e.call(c,c&&c.__data__,d,o)),p=g.length,w=a[d]=new Array(p),k=i[d]=new Array(p),m=u[d]=new Array(f);n(c,h,w,k,m,g,t);for(var z=0,N=0,S,M;z<p;++z)if(S=w[z]){for(z>=N&&(N=z+1);!(M=k[N])&&++N<p;);S._next=M||null}}return i=new Ne(i,o),i._enter=a,i._exit=u,i}function Xa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Za(){return new Ne(this._exit||this._groups.map(hi),this._parents)}function Wa(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function qa(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),u=0;u<i;++u)for(var d=n[u],c=o[u],h=d.length,f=a[u]=new Array(h),g,p=0;p<h;++p)(g=d[p]||c[p])&&(f[p]=g);for(;u<r;++u)a[u]=n[u];return new Ne(a,this._parents)}function Ga(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Ua(e){e||(e=Qa);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,u=r[s]=new Array(a),d,c=0;c<a;++c)(d=i[c])&&(u[c]=d);u.sort(t)}return new Ne(r,this._parents).order()}function Qa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ja(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ja(){return Array.from(this)}function $a(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function el(){let e=0;for(const t of this)++e;return e}function tl(){return!this.node()}function nl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function ol(e){return function(){this.removeAttribute(e)}}function rl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function il(e,t){return function(){this.setAttribute(e,t)}}function sl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function al(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ll(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cl(e,t){var n=Wn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?rl:ol:typeof t=="function"?n.local?ll:al:n.local?sl:il)(n,t))}function gi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ul(e){return function(){this.style.removeProperty(e)}}function dl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function hl(e,t,n){return arguments.length>1?this.each((t==null?ul:typeof t=="function"?fl:dl)(e,t,n??"")):Nt(this.node(),e)}function Nt(e,t){return e.style.getPropertyValue(t)||gi(e).getComputedStyle(e,null).getPropertyValue(t)}function gl(e){return function(){delete this[e]}}function vl(e,t){return function(){this[e]=t}}function yl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ml(e,t){return arguments.length>1?this.each((t==null?gl:typeof t=="function"?yl:vl)(e,t)):this.node()[e]}function vi(e){return e.trim().split(/^|\s+/)}function Yo(e){return e.classList||new yi(e)}function yi(e){this._node=e,this._names=vi(e.getAttribute("class")||"")}yi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mi(e,t){for(var n=Yo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function pi(e,t){for(var n=Yo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function pl(e){return function(){mi(this,e)}}function wl(e){return function(){pi(this,e)}}function _l(e,t){return function(){(t.apply(this,arguments)?mi:pi)(this,e)}}function xl(e,t){var n=vi(e+"");if(arguments.length<2){for(var o=Yo(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?_l:t?pl:wl)(n,t))}function bl(){this.textContent=""}function kl(e){return function(){this.textContent=e}}function Sl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function El(e){return arguments.length?this.each(e==null?bl:(typeof e=="function"?Sl:kl)(e)):this.node().textContent}function Cl(){this.innerHTML=""}function Nl(e){return function(){this.innerHTML=e}}function Pl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Al(e){return arguments.length?this.each(e==null?Cl:(typeof e=="function"?Pl:Nl)(e)):this.node().innerHTML}function Ml(){this.nextSibling&&this.parentNode.appendChild(this)}function Dl(){return this.each(Ml)}function Tl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Il(){return this.each(Tl)}function zl(e){var t=typeof e=="function"?e:ci(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ol(){return null}function Hl(e,t){var n=typeof e=="function"?e:ci(e),o=t==null?Ol:typeof t=="function"?t:Ko(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Rl(){var e=this.parentNode;e&&e.removeChild(this)}function Ll(){return this.each(Rl)}function Vl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kl(e){return this.select(e?Bl:Vl)}function Yl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Fl(e){return function(t){e.call(this,t,this.__data__)}}function Xl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Zl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function Wl(e,t,n){return function(){var o=this.__on,r,s=Fl(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function ql(e,t,n){var o=Xl(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,d=a.length,c;u<d;++u)for(r=0,c=a[u];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?Wl:Zl,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function wi(e,t,n){var o=gi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Gl(e,t){return function(){return wi(this,e,t)}}function Ul(e,t){return function(){return wi(this,e,t.apply(this,arguments))}}function Ql(e,t){return this.each((typeof t=="function"?Ul:Gl)(e,t))}function*Jl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var _i=[null];function Ne(e,t){this._groups=e,this._parents=t}function an(){return new Ne([[document.documentElement]],_i)}function jl(){return this}Ne.prototype=an.prototype={constructor:Ne,select:Sa,selectAll:Pa,selectChild:Ta,selectChildren:Ha,filter:Ra,data:Fa,enter:La,exit:Za,join:Wa,merge:qa,selection:jl,order:Ga,sort:Ua,call:Ja,nodes:ja,node:$a,size:el,empty:tl,each:nl,attr:cl,style:hl,property:ml,classed:xl,text:El,html:Al,raise:Dl,lower:Il,append:zl,insert:Hl,remove:Ll,clone:Kl,datum:Yl,on:ql,dispatch:Ql,[Symbol.iterator]:Jl};function Te(e){return typeof e=="string"?new Ne([[document.querySelector(e)]],[document.documentElement]):new Ne([[e]],_i)}function $l(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Le(e,t){if(e=$l(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const ec={passive:!1},Jt={capture:!0,passive:!1};function co(e){e.stopImmediatePropagation()}function Et(e){e.preventDefault(),e.stopImmediatePropagation()}function xi(e){var t=e.document.documentElement,n=Te(e).on("dragstart.drag",Et,Jt);"onselectstart"in t?n.on("selectstart.drag",Et,Jt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function bi(e,t){var n=e.document.documentElement,o=Te(e).on("dragstart.drag",null);t&&(o.on("click.drag",Et,Jt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fn=e=>()=>e;function ko(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:u,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}ko.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function tc(e){return!e.ctrlKey&&!e.button}function nc(){return this.parentNode}function oc(e,t){return t??{x:e.x,y:e.y}}function rc(){return navigator.maxTouchPoints||"ontouchstart"in this}function ic(){var e=tc,t=nc,n=oc,o=rc,r={},s=Zn("start","drag","end"),i=0,a,u,d,c,h=0;function f(S){S.on("mousedown.drag",g).filter(o).on("touchstart.drag",k).on("touchmove.drag",m,ec).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(S,M){if(!(c||!e.call(this,S,M))){var E=N(this,t.call(this,S,M),S,M,"mouse");E&&(Te(S.view).on("mousemove.drag",p,Jt).on("mouseup.drag",w,Jt),xi(S.view),co(S),d=!1,a=S.clientX,u=S.clientY,E("start",S))}}function p(S){if(Et(S),!d){var M=S.clientX-a,E=S.clientY-u;d=M*M+E*E>h}r.mouse("drag",S)}function w(S){Te(S.view).on("mousemove.drag mouseup.drag",null),bi(S.view,d),Et(S),r.mouse("end",S)}function k(S,M){if(e.call(this,S,M)){var E=S.changedTouches,P=t.call(this,S,M),H=E.length,X,J;for(X=0;X<H;++X)(J=N(this,P,S,M,E[X].identifier,E[X]))&&(co(S),J("start",S,E[X]))}}function m(S){var M=S.changedTouches,E=M.length,P,H;for(P=0;P<E;++P)(H=r[M[P].identifier])&&(Et(S),H("drag",S,M[P]))}function z(S){var M=S.changedTouches,E=M.length,P,H;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),P=0;P<E;++P)(H=r[M[P].identifier])&&(co(S),H("end",S,M[P]))}function N(S,M,E,P,H,X){var J=s.copy(),L=Le(X||E,M),x,C,v;if((v=n.call(S,new ko("beforestart",{sourceEvent:E,target:f,identifier:H,active:i,x:L[0],y:L[1],dx:0,dy:0,dispatch:J}),P))!=null)return x=v.x-L[0]||0,C=v.y-L[1]||0,function b(y,A,I){var T=L,O;switch(y){case"start":r[H]=b,O=i++;break;case"end":delete r[H],--i;case"drag":L=Le(I||A,M),O=i;break}J.call(y,S,new ko(y,{sourceEvent:A,subject:v,target:f,identifier:H,active:O,x:L[0]+x,y:L[1]+C,dx:L[0]-T[0],dy:L[1]-T[1],dispatch:J}),P)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:fn(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:fn(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:fn(S),f):n},f.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:fn(!!S),f):o},f.on=function(){var S=s.on.apply(s,arguments);return S===s?f:S},f.clickDistance=function(S){return arguments.length?(h=(S=+S)*S,f):Math.sqrt(h)},f}function Fo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ki(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ln(){}var jt=.7,An=1/jt,Ct="\\s*([+-]?\\d+)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sc=/^#([0-9a-f]{3,8})$/,ac=new RegExp(`^rgb\\(${Ct},${Ct},${Ct}\\)$`),lc=new RegExp(`^rgb\\(${Ke},${Ke},${Ke}\\)$`),cc=new RegExp(`^rgba\\(${Ct},${Ct},${Ct},${$t}\\)$`),uc=new RegExp(`^rgba\\(${Ke},${Ke},${Ke},${$t}\\)$`),dc=new RegExp(`^hsl\\(${$t},${Ke},${Ke}\\)$`),fc=new RegExp(`^hsla\\(${$t},${Ke},${Ke},${$t}\\)$`),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fo(ln,gt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dr,formatHex:dr,formatHex8:hc,formatHsl:gc,formatRgb:fr,toString:fr});function dr(){return this.rgb().formatHex()}function hc(){return this.rgb().formatHex8()}function gc(){return Si(this).formatHsl()}function fr(){return this.rgb().formatRgb()}function gt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hr(t):n===3?new Se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ac.exec(e))?new Se(t[1],t[2],t[3],1):(t=lc.exec(e))?new Se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cc.exec(e))?hn(t[1],t[2],t[3],t[4]):(t=uc.exec(e))?hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dc.exec(e))?yr(t[1],t[2]/100,t[3]/100,1):(t=fc.exec(e))?yr(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?hr(ur[e]):e==="transparent"?new Se(NaN,NaN,NaN,0):null}function hr(e){return new Se(e>>16&255,e>>8&255,e&255,1)}function hn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Se(e,t,n,o)}function vc(e){return e instanceof ln||(e=gt(e)),e?(e=e.rgb(),new Se(e.r,e.g,e.b,e.opacity)):new Se}function So(e,t,n,o){return arguments.length===1?vc(e):new Se(e,t,n,o??1)}function Se(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Fo(Se,So,ki(ln,{brighter(e){return e=e==null?An:Math.pow(An,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jt:Math.pow(jt,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Se(ft(this.r),ft(this.g),ft(this.b),Mn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gr,formatHex:gr,formatHex8:yc,formatRgb:vr,toString:vr}));function gr(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}`}function yc(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}${dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function vr(){const e=Mn(this.opacity);return`${e===1?"rgb(":"rgba("}${ft(this.r)}, ${ft(this.g)}, ${ft(this.b)}${e===1?")":`, ${e})`}`}function Mn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dt(e){return e=ft(e),(e<16?"0":"")+e.toString(16)}function yr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ie(e,t,n,o)}function Si(e){if(e instanceof Ie)return new Ie(e.h,e.s,e.l,e.opacity);if(e instanceof ln||(e=gt(e)),!e)return new Ie;if(e instanceof Ie)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,a=s-r,u=(s+r)/2;return a?(t===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-t)/a+2:i=(t-n)/a+4,a/=u<.5?s+r:2-s-r,i*=60):a=u>0&&u<1?0:i,new Ie(i,a,u,e.opacity)}function mc(e,t,n,o){return arguments.length===1?Si(e):new Ie(e,t,n,o??1)}function Ie(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Fo(Ie,mc,ki(ln,{brighter(e){return e=e==null?An:Math.pow(An,e),new Ie(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jt:Math.pow(jt,e),new Ie(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Se(uo(e>=240?e-240:e+120,r,o),uo(e,r,o),uo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Ie(mr(this.h),gn(this.s),gn(this.l),Mn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mn(this.opacity);return`${e===1?"hsl(":"hsla("}${mr(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mr(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function uo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xo=e=>()=>e;function pc(e,t){return function(n){return e+n*t}}function wc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function _c(e){return(e=+e)==1?Ei:function(t,n){return n-t?wc(t,n,e):Xo(isNaN(t)?n:t)}}function Ei(e,t){var n=t-e;return n?pc(e,n):Xo(isNaN(e)?t:e)}const Dn=function e(t){var n=_c(t);function o(r,s){var i=n((r=So(r)).r,(s=So(s)).r),a=n(r.g,s.g),u=n(r.b,s.b),d=Ei(r.opacity,s.opacity);return function(c){return r.r=i(c),r.g=a(c),r.b=u(c),r.opacity=d(c),r+""}}return o.gamma=e,o}(1);function xc(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(s){for(r=0;r<n;++r)o[r]=e[r]*(1-s)+t[r]*s;return o}}function bc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kc(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),s=new Array(n),i;for(i=0;i<o;++i)r[i]=Wt(e[i],t[i]);for(;i<n;++i)s[i]=t[i];return function(a){for(i=0;i<o;++i)s[i]=r[i](a);return s}}function Sc(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Ve(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ec(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Wt(e[r],t[r]):o[r]=t[r];return function(s){for(r in n)o[r]=n[r](s);return o}}var Eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fo=new RegExp(Eo.source,"g");function Cc(e){return function(){return e}}function Nc(e){return function(t){return e(t)+""}}function Ci(e,t){var n=Eo.lastIndex=fo.lastIndex=0,o,r,s,i=-1,a=[],u=[];for(e=e+"",t=t+"";(o=Eo.exec(e))&&(r=fo.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,u.push({i,x:Ve(o,r)})),n=fo.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?u[0]?Nc(u[0].x):Cc(t):(t=u.length,function(d){for(var c=0,h;c<t;++c)a[(h=u[c]).i]=h.x(d);return a.join("")})}function Wt(e,t){var n=typeof t,o;return t==null||n==="boolean"?Xo(t):(n==="number"?Ve:n==="string"?(o=gt(t))?(t=o,Dn):Ci:t instanceof gt?Dn:t instanceof Date?Sc:bc(t)?xc:Array.isArray(t)?kc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ec:Ve)(e,t)}var pr=180/Math.PI,Co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ni(e,t,n,o,r,s){var i,a,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,u/=a),e*o<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*pr,skewX:Math.atan(u)*pr,scaleX:i,scaleY:a}}var vn;function Pc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Co:Ni(t.a,t.b,t.c,t.d,t.e,t.f)}function Ac(e){return e==null||(vn||(vn=document.createElementNS("http://www.w3.org/2000/svg","g")),vn.setAttribute("transform",e),!(e=vn.transform.baseVal.consolidate()))?Co:(e=e.matrix,Ni(e.a,e.b,e.c,e.d,e.e,e.f))}function Pi(e,t,n,o){function r(d){return d.length?d.pop()+" ":""}function s(d,c,h,f,g,p){if(d!==h||c!==f){var w=g.push("translate(",null,t,null,n);p.push({i:w-4,x:Ve(d,h)},{i:w-2,x:Ve(c,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function i(d,c,h,f){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),f.push({i:h.push(r(h)+"rotate(",null,o)-2,x:Ve(d,c)})):c&&h.push(r(h)+"rotate("+c+o)}function a(d,c,h,f){d!==c?f.push({i:h.push(r(h)+"skewX(",null,o)-2,x:Ve(d,c)}):c&&h.push(r(h)+"skewX("+c+o)}function u(d,c,h,f,g,p){if(d!==h||c!==f){var w=g.push(r(g)+"scale(",null,",",null,")");p.push({i:w-4,x:Ve(d,h)},{i:w-2,x:Ve(c,f)})}else(h!==1||f!==1)&&g.push(r(g)+"scale("+h+","+f+")")}return function(d,c){var h=[],f=[];return d=e(d),c=e(c),s(d.translateX,d.translateY,c.translateX,c.translateY,h,f),i(d.rotate,c.rotate,h,f),a(d.skewX,c.skewX,h,f),u(d.scaleX,d.scaleY,c.scaleX,c.scaleY,h,f),d=c=null,function(g){for(var p=-1,w=f.length,k;++p<w;)h[(k=f[p]).i]=k.x(g);return h.join("")}}}var Mc=Pi(Pc,"px, ","px)","deg)"),Dc=Pi(Ac,", ",")",")"),Tc=1e-12;function wr(e){return((e=Math.exp(e))+1/e)/2}function Ic(e){return((e=Math.exp(e))-1/e)/2}function zc(e){return((e=Math.exp(2*e))-1)/(e+1)}const xn=function e(t,n,o){function r(s,i){var a=s[0],u=s[1],d=s[2],c=i[0],h=i[1],f=i[2],g=c-a,p=h-u,w=g*g+p*p,k,m;if(w<Tc)m=Math.log(f/d)/t,k=function(P){return[a+P*g,u+P*p,d*Math.exp(t*P*m)]};else{var z=Math.sqrt(w),N=(f*f-d*d+o*w)/(2*d*n*z),S=(f*f-d*d-o*w)/(2*f*n*z),M=Math.log(Math.sqrt(N*N+1)-N),E=Math.log(Math.sqrt(S*S+1)-S);m=(E-M)/t,k=function(P){var H=P*m,X=wr(M),J=d/(n*z)*(X*zc(t*H+M)-Ic(M));return[a+J*g,u+J*p,d*X/wr(t*H+M)]}}return k.duration=m*1e3*t/Math.SQRT2,k}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,u=a*a;return e(i,a,u)},r}(Math.SQRT2,2,4);var Pt=0,Kt=0,Vt=0,Ai=1e3,Tn,Yt,In=0,vt=0,qn=0,en=typeof performance=="object"&&performance.now?performance:Date,Mi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zo(){return vt||(Mi(Oc),vt=en.now()+qn)}function Oc(){vt=0}function zn(){this._call=this._time=this._next=null}zn.prototype=Di.prototype={constructor:zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zo():+n)+(t==null?0:+t),!this._next&&Yt!==this&&(Yt?Yt._next=this:Tn=this,Yt=this),this._call=e,this._time=n,No()},stop:function(){this._call&&(this._call=null,this._time=1/0,No())}};function Di(e,t,n){var o=new zn;return o.restart(e,t,n),o}function Hc(){Zo(),++Pt;for(var e=Tn,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pt}function _r(){vt=(In=en.now())+qn,Pt=Kt=0;try{Hc()}finally{Pt=0,Lc(),vt=0}}function Rc(){var e=en.now(),t=e-In;t>Ai&&(qn-=t,In=e)}function Lc(){for(var e,t=Tn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Tn=n);Yt=e,No(o)}function No(e){if(!Pt){Kt&&(Kt=clearTimeout(Kt));var t=e-vt;t>24?(e<1/0&&(Kt=setTimeout(_r,e-en.now()-qn)),Vt&&(Vt=clearInterval(Vt))):(Vt||(In=en.now(),Vt=setInterval(Rc,Ai)),Pt=1,Mi(_r))}}function xr(e,t,n){var o=new zn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Vc=Zn("start","end","cancel","interrupt"),Bc=[],Ti=0,br=1,Po=2,bn=3,kr=4,Ao=5,kn=6;function Gn(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Kc(e,n,{name:t,index:o,group:r,on:Vc,tween:Bc,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ti})}function Wo(e,t){var n=ze(e,t);if(n.state>Ti)throw new Error("too late; already scheduled");return n}function Xe(e,t){var n=ze(e,t);if(n.state>bn)throw new Error("too late; already running");return n}function ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Kc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Di(s,0,n.time);function s(d){n.state=br,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var c,h,f,g;if(n.state!==br)return u();for(c in o)if(g=o[c],g.name===n.name){if(g.state===bn)return xr(i);g.state===kr?(g.state=kn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[c]):+c<t&&(g.state=kn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[c])}if(xr(function(){n.state===bn&&(n.state=kr,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=Po,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Po){for(n.state=bn,r=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=g);r.length=h+1}}function a(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=Ao,1),h=-1,f=r.length;++h<f;)r[h].call(e,c);n.state===Ao&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=kn,n.timer.stop(),delete o[t];for(var d in o)return;delete e.__transition}}function Sn(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>Po&&o.state<Ao,o.state=kn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function Yc(e){return this.each(function(){Sn(this,e)})}function Fc(e,t){var n,o;return function(){var r=Xe(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Xc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Xe(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},u=0,d=r.length;u<d;++u)if(r[u].name===t){r[u]=a;break}u===d&&r.push(a)}s.tween=r}}function Zc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ze(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?Fc:Xc)(n,e,t))}function qo(e,t,n){var o=e._id;return e.each(function(){var r=Xe(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return ze(r,o).value[t]}}function Ii(e,t){var n;return(typeof t=="number"?Ve:t instanceof gt?Dn:(n=gt(t))?(t=n,Dn):Ci)(e,t)}function Wc(e){return function(){this.removeAttribute(e)}}function qc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gc(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function Uc(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function Qc(e,t,n){var o,r,s;return function(){var i,a=n(this),u;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),u=a+"",i===u?null:i===o&&u===r?s:(r=u,s=t(o=i,a)))}}function Jc(e,t,n){var o,r,s;return function(){var i,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),u=a+"",i===u?null:i===o&&u===r?s:(r=u,s=t(o=i,a)))}}function jc(e,t){var n=Wn(e),o=n==="transform"?Dc:Ii;return this.attrTween(e,typeof t=="function"?(n.local?Jc:Qc)(n,o,qo(this,"attr."+e,t)):t==null?(n.local?qc:Wc)(n):(n.local?Uc:Gc)(n,o,t))}function $c(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function eu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tu(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&eu(e,s)),n}return r._value=t,r}function nu(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&$c(e,s)),n}return r._value=t,r}function ou(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Wn(e);return this.tween(n,(o.local?tu:nu)(o,t))}function ru(e,t){return function(){Wo(this,e).delay=+t.apply(this,arguments)}}function iu(e,t){return t=+t,function(){Wo(this,e).delay=t}}function su(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ru:iu)(t,e)):ze(this.node(),t).delay}function au(e,t){return function(){Xe(this,e).duration=+t.apply(this,arguments)}}function lu(e,t){return t=+t,function(){Xe(this,e).duration=t}}function cu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?au:lu)(t,e)):ze(this.node(),t).duration}function uu(e,t){if(typeof t!="function")throw new Error;return function(){Xe(this,e).ease=t}}function du(e){var t=this._id;return arguments.length?this.each(uu(t,e)):ze(this.node(),t).ease}function fu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Xe(this,e).ease=n}}function hu(e){if(typeof e!="function")throw new Error;return this.each(fu(this._id,e))}function gu(e){typeof e!="function"&&(e=di(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],u,d=0;d<i;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&a.push(u);return new je(o,this._parents,this._name,this._id)}function vu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var u=t[a],d=n[a],c=u.length,h=i[a]=new Array(c),f,g=0;g<c;++g)(f=u[g]||d[g])&&(h[g]=f);for(;a<o;++a)i[a]=t[a];return new je(i,this._parents,this._name,this._id)}function yu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mu(e,t,n){var o,r,s=yu(t)?Wo:Xe;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function pu(e,t){var n=this._id;return arguments.length<2?ze(this.node(),n).on.on(e):this.each(mu(n,e,t))}function wu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _u(){return this.on("end.remove",wu(this._id))}function xu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ko(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],u=a.length,d=s[i]=new Array(u),c,h,f=0;f<u;++f)(c=a[f])&&(h=e.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),d[f]=h,Gn(d[f],t,n,f,d,ze(c,n)));return new je(s,this._parents,t,n)}function bu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ui(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var u=o[a],d=u.length,c,h=0;h<d;++h)if(c=u[h]){for(var f=e.call(c,c.__data__,h,u),g,p=ze(c,n),w=0,k=f.length;w<k;++w)(g=f[w])&&Gn(g,t,n,w,f,p);s.push(f),i.push(c)}return new je(s,i,t,n)}var ku=an.prototype.constructor;function Su(){return new ku(this._groups,this._parents)}function Eu(e,t){var n,o,r;return function(){var s=Nt(this,e),i=(this.style.removeProperty(e),Nt(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function zi(e){return function(){this.style.removeProperty(e)}}function Cu(e,t,n){var o,r=n+"",s;return function(){var i=Nt(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function Nu(e,t,n){var o,r,s;return function(){var i=Nt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Nt(this,e))),i===u?null:i===o&&u===r?s:(r=u,s=t(o=i,a))}}function Pu(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var u=Xe(this,e),d=u.on,c=u.value[s]==null?a||(a=zi(t)):void 0;(d!==n||r!==c)&&(o=(n=d).copy()).on(i,r=c),u.on=o}}function Au(e,t,n){var o=(e+="")=="transform"?Mc:Ii;return t==null?this.styleTween(e,Eu(e,o)).on("end.style."+e,zi(e)):typeof t=="function"?this.styleTween(e,Nu(e,o,qo(this,"style."+e,t))).each(Pu(this._id,e)):this.styleTween(e,Cu(e,o,t),n).on("end.style."+e,null)}function Mu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Du(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&Mu(e,i,n)),o}return s._value=t,s}function Tu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Du(e,t,n??""))}function Iu(e){return function(){this.textContent=e}}function zu(e){return function(){var t=e(this);this.textContent=t??""}}function Ou(e){return this.tween("text",typeof e=="function"?zu(qo(this,"text",e)):Iu(e==null?"":e+""))}function Hu(e){return function(t){this.textContent=e.call(this,t)}}function Ru(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Hu(r)),t}return o._value=e,o}function Lu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ru(e))}function Vu(){for(var e=this._name,t=this._id,n=Oi(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,u,d=0;d<a;++d)if(u=i[d]){var c=ze(u,t);Gn(u,e,n,d,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new je(o,this._parents,e,n)}function Bu(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},u={value:function(){--r===0&&s()}};n.each(function(){var d=Xe(this,o),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),d.on=t}),r===0&&s()})}var Ku=0;function je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Oi(){return++Ku}var We=an.prototype;je.prototype={constructor:je,select:xu,selectAll:bu,selectChild:We.selectChild,selectChildren:We.selectChildren,filter:gu,merge:vu,selection:Su,transition:Vu,call:We.call,nodes:We.nodes,node:We.node,size:We.size,empty:We.empty,each:We.each,on:pu,attr:jc,attrTween:ou,style:Au,styleTween:Tu,text:Ou,textTween:Lu,remove:_u,tween:Zc,delay:su,duration:cu,ease:du,easeVarying:hu,end:Bu,[Symbol.iterator]:We[Symbol.iterator]};function Yu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fu={time:null,delay:0,duration:250,ease:Yu};function Xu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zu(e){var t,n;e instanceof je?(t=e._id,e=e._name):(t=Oi(),(n=Fu).time=Zo(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,u,d=0;d<a;++d)(u=i[d])&&Gn(u,e,t,d,i,n||Xu(u,t));return new je(o,this._parents,e,t)}an.prototype.interrupt=Yc;an.prototype.transition=Zu;const yn=e=>()=>e;function Wu(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Ue(e,t,n){this.k=e,this.x=t,this.y=n}Ue.prototype={constructor:Ue,scale:function(e){return e===1?this:new Ue(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ue(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Un=new Ue(1,0,0);Hi.prototype=Ue.prototype;function Hi(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Un;return e.__zoom}function ho(e){e.stopImmediatePropagation()}function Bt(e){e.preventDefault(),e.stopImmediatePropagation()}function qu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Gu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Sr(){return this.__zoom||Un}function Uu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Qu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ju(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function ju(){var e=qu,t=Gu,n=Ju,o=Uu,r=Qu,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,u=xn,d=Zn("start","zoom","end"),c,h,f,g=500,p=150,w=0,k=10;function m(v){v.property("__zoom",Sr).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",J).filter(r).on("touchstart.zoom",L).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(v,b,y,A){var I=v.selection?v.selection():v;I.property("__zoom",Sr),v!==I?M(v,b,y,A):I.interrupt().each(function(){E(this,arguments).event(A).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},m.scaleBy=function(v,b,y,A){m.scaleTo(v,function(){var I=this.__zoom.k,T=typeof b=="function"?b.apply(this,arguments):b;return I*T},y,A)},m.scaleTo=function(v,b,y,A){m.transform(v,function(){var I=t.apply(this,arguments),T=this.__zoom,O=y==null?S(I):typeof y=="function"?y.apply(this,arguments):y,R=T.invert(O),U=typeof b=="function"?b.apply(this,arguments):b;return n(N(z(T,U),O,R),I,i)},y,A)},m.translateBy=function(v,b,y,A){m.transform(v,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof y=="function"?y.apply(this,arguments):y),t.apply(this,arguments),i)},null,A)},m.translateTo=function(v,b,y,A,I){m.transform(v,function(){var T=t.apply(this,arguments),O=this.__zoom,R=A==null?S(T):typeof A=="function"?A.apply(this,arguments):A;return n(Un.translate(R[0],R[1]).scale(O.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof y=="function"?-y.apply(this,arguments):-y),T,i)},A,I)};function z(v,b){return b=Math.max(s[0],Math.min(s[1],b)),b===v.k?v:new Ue(b,v.x,v.y)}function N(v,b,y){var A=b[0]-y[0]*v.k,I=b[1]-y[1]*v.k;return A===v.x&&I===v.y?v:new Ue(v.k,A,I)}function S(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function M(v,b,y,A){v.on("start.zoom",function(){E(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(A).end()}).tween("zoom",function(){var I=this,T=arguments,O=E(I,T).event(A),R=t.apply(I,T),U=y==null?S(R):typeof y=="function"?y.apply(I,T):y,q=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),W=I.__zoom,G=typeof b=="function"?b.apply(I,T):b,Q=u(W.invert(U).concat(q/W.k),G.invert(U).concat(q/G.k));return function(Z){if(Z===1)Z=G;else{var $=Q(Z),te=q/$[2];Z=new Ue(te,U[0]-$[0]*te,U[1]-$[1]*te)}O.zoom(null,Z)}})}function E(v,b,y){return!y&&v.__zooming||new P(v,b)}function P(v,b){this.that=v,this.args=b,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,b),this.taps=0}P.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,b){return this.mouse&&v!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var b=Te(this.that).datum();d.call(v,this.that,new Wu(v,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:d}),b)}};function H(v,...b){if(!e.apply(this,arguments))return;var y=E(this,b).event(v),A=this.__zoom,I=Math.max(s[0],Math.min(s[1],A.k*Math.pow(2,o.apply(this,arguments)))),T=Le(v);if(y.wheel)(y.mouse[0][0]!==T[0]||y.mouse[0][1]!==T[1])&&(y.mouse[1]=A.invert(y.mouse[0]=T)),clearTimeout(y.wheel);else{if(A.k===I)return;y.mouse=[T,A.invert(T)],Sn(this),y.start()}Bt(v),y.wheel=setTimeout(O,p),y.zoom("mouse",n(N(z(A,I),y.mouse[0],y.mouse[1]),y.extent,i));function O(){y.wheel=null,y.end()}}function X(v,...b){if(f||!e.apply(this,arguments))return;var y=v.currentTarget,A=E(this,b,!0).event(v),I=Te(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",q,!0),T=Le(v,y),O=v.clientX,R=v.clientY;xi(v.view),ho(v),A.mouse=[T,this.__zoom.invert(T)],Sn(this),A.start();function U(W){if(Bt(W),!A.moved){var G=W.clientX-O,Q=W.clientY-R;A.moved=G*G+Q*Q>w}A.event(W).zoom("mouse",n(N(A.that.__zoom,A.mouse[0]=Le(W,y),A.mouse[1]),A.extent,i))}function q(W){I.on("mousemove.zoom mouseup.zoom",null),bi(W.view,A.moved),Bt(W),A.event(W).end()}}function J(v,...b){if(e.apply(this,arguments)){var y=this.__zoom,A=Le(v.changedTouches?v.changedTouches[0]:v,this),I=y.invert(A),T=y.k*(v.shiftKey?.5:2),O=n(N(z(y,T),A,I),t.apply(this,b),i);Bt(v),a>0?Te(this).transition().duration(a).call(M,O,A,v):Te(this).call(m.transform,O,A,v)}}function L(v,...b){if(e.apply(this,arguments)){var y=v.touches,A=y.length,I=E(this,b,v.changedTouches.length===A).event(v),T,O,R,U;for(ho(v),O=0;O<A;++O)R=y[O],U=Le(R,this),U=[U,this.__zoom.invert(U),R.identifier],I.touch0?!I.touch1&&I.touch0[2]!==U[2]&&(I.touch1=U,I.taps=0):(I.touch0=U,T=!0,I.taps=1+!!c);c&&(c=clearTimeout(c)),T&&(I.taps<2&&(h=U[0],c=setTimeout(function(){c=null},g)),Sn(this),I.start())}}function x(v,...b){if(this.__zooming){var y=E(this,b).event(v),A=v.changedTouches,I=A.length,T,O,R,U;for(Bt(v),T=0;T<I;++T)O=A[T],R=Le(O,this),y.touch0&&y.touch0[2]===O.identifier?y.touch0[0]=R:y.touch1&&y.touch1[2]===O.identifier&&(y.touch1[0]=R);if(O=y.that.__zoom,y.touch1){var q=y.touch0[0],W=y.touch0[1],G=y.touch1[0],Q=y.touch1[1],Z=(Z=G[0]-q[0])*Z+(Z=G[1]-q[1])*Z,$=($=Q[0]-W[0])*$+($=Q[1]-W[1])*$;O=z(O,Math.sqrt(Z/$)),R=[(q[0]+G[0])/2,(q[1]+G[1])/2],U=[(W[0]+Q[0])/2,(W[1]+Q[1])/2]}else if(y.touch0)R=y.touch0[0],U=y.touch0[1];else return;y.zoom("touch",n(N(O,R,U),y.extent,i))}}function C(v,...b){if(this.__zooming){var y=E(this,b).event(v),A=v.changedTouches,I=A.length,T,O;for(ho(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),T=0;T<I;++T)O=A[T],y.touch0&&y.touch0[2]===O.identifier?delete y.touch0:y.touch1&&y.touch1[2]===O.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(O=Le(O,this),Math.hypot(h[0]-O[0],h[1]-O[1])<k)){var R=Te(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return m.wheelDelta=function(v){return arguments.length?(o=typeof v=="function"?v:yn(+v),m):o},m.filter=function(v){return arguments.length?(e=typeof v=="function"?v:yn(!!v),m):e},m.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:yn(!!v),m):r},m.extent=function(v){return arguments.length?(t=typeof v=="function"?v:yn([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),m):t},m.scaleExtent=function(v){return arguments.length?(s[0]=+v[0],s[1]=+v[1],m):[s[0],s[1]]},m.translateExtent=function(v){return arguments.length?(i[0][0]=+v[0][0],i[1][0]=+v[1][0],i[0][1]=+v[0][1],i[1][1]=+v[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(v){return arguments.length?(n=v,m):n},m.duration=function(v){return arguments.length?(a=+v,m):a},m.interpolate=function(v){return arguments.length?(u=v,m):u},m.on=function(){var v=d.on.apply(d,arguments);return v===d?m:v},m.clickDistance=function(v){return arguments.length?(w=(v=+v)*v,m):Math.sqrt(w)},m.tapDistance=function(v){return arguments.length?(k=+v,m):k},m}const tn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Mo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ri=["Enter"," ","Escape"],$u={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var At;(function(e){e.Strict="strict",e.Loose="loose"})(At||(At={}));var st;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(st||(st={}));var On;(function(e){e.Partial="partial",e.Full="full"})(On||(On={}));const Do={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var rt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(rt||(rt={}));var Hn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Hn||(Hn={}));var j;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(j||(j={}));const Er={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top};function ed(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Cr(e,t,n){if(!n)return;const o=[];e.forEach((r,s)=>{t?.has(s)||o.push(r)}),o.length&&n(o)}function td(e){return e===null?null:e?"valid":"invalid"}const Li=e=>"id"in e&&"source"in e&&"target"in e,nd=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Go=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),cn=(e,t=[0,0])=>{const{width:n,height:o}=wt(e),r=e.origin??t,s=n*r[0],i=o*r[1];return{x:e.position.x-s,y:e.position.y-i}},od=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const s=typeof r=="string";let i=!t.nodeLookup&&!s?r:void 0;t.nodeLookup&&(i=s?t.nodeLookup.get(r):Go(r)?r:t.nodeLookup.get(r.id));const a=i?Rn(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Jn(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jn(n)},Qn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=Rn(o);n=Jn(n,r)}}),jn(n)},Uo=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1)=>{const a={...un(t,[n,o,r]),width:t.width/r,height:t.height/r},u=[];for(const d of e.values()){const{measured:c,selectable:h=!0,hidden:f=!1}=d;if(i&&!h||f)continue;const g=c.width??d.width??d.initialWidth??null,p=c.height??d.height??d.initialHeight??null,w=nn(a,Dt(d)),k=(g??0)*(p??0),m=s&&w>0;(!d.internals.handleBounds||m||w>=k||d.dragging)&&u.push(d)}return u},rd=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function id(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function sd({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:s},i){if(e.size===0)return Promise.resolve(!0);const a=id(e,i),u=Qn(a),d=Qo(u,t,n,i?.minZoom??r,i?.maxZoom??s,i?.padding??.1);return await o.setViewport(d,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function Vi({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:s}){const i=n.get(e),a=i.parentId?n.get(i.parentId):void 0,{x:u,y:d}=a?a.internals.positionAbsolute:{x:0,y:0},c=i.origin??o;let h=i.extent||r;if(i.extent==="parent"&&!i.expandParent)if(!a)s?.("005",tn.error005());else{const g=a.measured.width,p=a.measured.height;g&&p&&(h=[[u,d],[u+g,d+p]])}else a&&Tt(i.extent)&&(h=[[i.extent[0][0]+u,i.extent[0][1]+d],[i.extent[1][0]+u,i.extent[1][1]+d]]);const f=Tt(h)?yt(t,h,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&s?.("015",tn.error015()),{position:{x:f.x-u+(i.measured.width??0)*c[0],y:f.y-d+(i.measured.height??0)*c[1]},positionAbsolute:f}}async function ad({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const s=new Set(e.map(f=>f.id)),i=[];for(const f of n){if(f.deletable===!1)continue;const g=s.has(f.id),p=!g&&f.parentId&&i.find(w=>w.id===f.parentId);(g||p)&&i.push(f)}const a=new Set(t.map(f=>f.id)),u=o.filter(f=>f.deletable!==!1),c=rd(i,u);for(const f of u)a.has(f.id)&&!c.find(p=>p.id===f.id)&&c.push(f);if(!r)return{edges:c,nodes:i};const h=await r({nodes:i,edges:c});return typeof h=="boolean"?h?{edges:c,nodes:i}:{edges:[],nodes:[]}:h}const Mt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),yt=(e={x:0,y:0},t,n)=>({x:Mt(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Mt(e.y,t[0][1],t[1][1]-(n?.height??0))});function Bi(e,t,n){const{width:o,height:r}=wt(n),{x:s,y:i}=n.internals.positionAbsolute;return yt(e,[[s,i],[s+o,i+r]],t)}const Nr=(e,t,n)=>e<t?Mt(Math.abs(e-t),1,t)/t:e>n?-Mt(Math.abs(e-n),1,t)/t:0,Ki=(e,t,n=15,o=40)=>{const r=Nr(e.x,o,t.width-o)*n,s=Nr(e.y,o,t.height-o)*n;return[r,s]},Jn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),To=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),jn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Dt=(e,t=[0,0])=>{const{x:n,y:o}=Go(e)?e.internals.positionAbsolute:cn(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Rn=(e,t=[0,0])=>{const{x:n,y:o}=Go(e)?e.internals.positionAbsolute:cn(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},ld=(e,t)=>jn(Jn(To(e),To(t))),nn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Pr=e=>Qe(e.width)&&Qe(e.height)&&Qe(e.x)&&Qe(e.y),Qe=e=>!isNaN(e)&&isFinite(e),cd=(e,t)=>{},$n=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),un=({x:e,y:t},[n,o,r],s=!1,i=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return s?$n(a,i):a},Ln=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function xt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function ud(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=xt(e,n),r=xt(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=xt(e.top??e.y??0,n),r=xt(e.bottom??e.y??0,n),s=xt(e.left??e.x??0,t),i=xt(e.right??e.x??0,t);return{top:o,right:i,bottom:r,left:s,x:s+i,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function dd(e,t,n,o,r,s){const{x:i,y:a}=Ln(e,[t,n,o]),{x:u,y:d}=Ln({x:e.x+e.width,y:e.y+e.height},[t,n,o]),c=r-u,h=s-d;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(h)}}const Qo=(e,t,n,o,r,s)=>{const i=ud(s,t,n),a=(t-i.x)/e.width,u=(n-i.y)/e.height,d=Math.min(a,u),c=Mt(d,o,r),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*c,p=n/2-f*c,w=dd(e,g,p,c,t,n),k={left:Math.min(w.left-i.left,0),top:Math.min(w.top-i.top,0),right:Math.min(w.right-i.right,0),bottom:Math.min(w.bottom-i.bottom,0)};return{x:g-k.left+k.right,y:p-k.top+k.bottom,zoom:c}},Vn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Tt(e){return e!==void 0&&e!=="parent"}function wt(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function fd(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function hd(e,t={width:0,height:0},n,o,r){const s={...e},i=o.get(n);if(i){const a=i.origin||r;s.x+=i.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=i.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function gd(e){return{...$u,...e||{}}}function go(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:s,y:i}=Be(e),a=un({x:s-(r?.left??0),y:i-(r?.top??0)},o),{x:u,y:d}=n?$n(a,t):a;return{xSnapped:u,ySnapped:d,...a}}const Yi=e=>({width:e.offsetWidth,height:e.offsetHeight}),Fi=e=>e?.getRootNode?.()||window?.document,vd=["INPUT","SELECT","TEXTAREA"];function Xi(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:vd.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Zi=e=>"clientX"in e,Be=(e,t)=>{const n=Zi(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Ar=(e,t,n,o,r)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:r,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Yi(i)}})};function yd({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const u=e*.125+r*.375+i*.375+n*.125,d=t*.125+s*.375+a*.375+o*.125,c=Math.abs(u-e),h=Math.abs(d-t);return[u,d,c,h]}function mn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Mr({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){switch(e){case j.Left:return[t-mn(t-o,s),n];case j.Right:return[t+mn(o-t,s),n];case j.Top:return[t,n-mn(n-r,s)];case j.Bottom:return[t,n+mn(r-n,s)]}}function Wi({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:s=j.Top,curvature:i=.25}){const[a,u]=Mr({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[d,c]=Mr({pos:s,x1:o,y1:r,x2:e,y2:t,c:i}),[h,f,g,p]=yd({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:u,targetControlX:d,targetControlY:c});return[`M${e},${t} C${a},${u} ${d},${c} ${o},${r}`,h,f,g,p]}function qi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[s,a,r,i]}function md({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:r=!1}){if(o!==void 0)return o;const s=r&&n?1e3:0,i=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+i}function pd({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const s=Jn(Rn(e),Rn(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return nn(i,jn(s))>0}const wd=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,_d=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),xd=(e,t)=>{if(!e.source||!e.target)return t;let n;return Li(e)?n={...e}:n={...e,id:wd(e)},_d(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Gi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,s,i,a]=qi({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,s,i,a]}const Dr={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}},bd=({source:e,sourcePosition:t=j.Bottom,target:n})=>t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Tr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kd({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:r,offset:s,stepPosition:i}){const a=Dr[t],u=Dr[o],d={x:e.x+a.x*s,y:e.y+a.y*s},c={x:n.x+u.x*s,y:n.y+u.y*s},h=bd({source:d,sourcePosition:t,target:c}),f=h.x!==0?"x":"y",g=h[f];let p=[],w,k;const m={x:0,y:0},z={x:0,y:0},[,,N,S]=qi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*u[f]===-1){f==="x"?(w=r.x??d.x+(c.x-d.x)*i,k=r.y??(d.y+c.y)/2):(w=r.x??(d.x+c.x)/2,k=r.y??d.y+(c.y-d.y)*i);const E=[{x:w,y:d.y},{x:w,y:c.y}],P=[{x:d.x,y:k},{x:c.x,y:k}];a[f]===g?p=f==="x"?E:P:p=f==="x"?P:E}else{const E=[{x:d.x,y:c.y}],P=[{x:c.x,y:d.y}];if(f==="x"?p=a.x===g?P:E:p=a.y===g?E:P,t===o){const x=Math.abs(e[f]-n[f]);if(x<=s){const C=Math.min(s-1,s-x);a[f]===g?m[f]=(d[f]>e[f]?-1:1)*C:z[f]=(c[f]>n[f]?-1:1)*C}}if(t!==o){const x=f==="x"?"y":"x",C=a[f]===u[x],v=d[x]>c[x],b=d[x]<c[x];(a[f]===1&&(!C&&v||C&&b)||a[f]!==1&&(!C&&b||C&&v))&&(p=f==="x"?E:P)}const H={x:d.x+m.x,y:d.y+m.y},X={x:c.x+z.x,y:c.y+z.y},J=Math.max(Math.abs(H.x-p[0].x),Math.abs(X.x-p[0].x)),L=Math.max(Math.abs(H.y-p[0].y),Math.abs(X.y-p[0].y));J>=L?(w=(H.x+X.x)/2,k=p[0].y):(w=p[0].x,k=(H.y+X.y)/2)}return[[e,{x:d.x+m.x,y:d.y+m.y},...p,{x:c.x+z.x,y:c.y+z.y},n],w,k,N,S]}function Sd(e,t,n,o){const r=Math.min(Tr(e,t)/2,Tr(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const d=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+r*d},${i}Q ${s},${i} ${s},${i+r*c}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${i+r*u}Q ${s},${i} ${s+r*a},${i}`}function eo({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:r,targetPosition:s=j.Top,borderRadius:i=5,centerX:a,centerY:u,offset:d=20,stepPosition:c=.5}){const[h,f,g,p,w]=kd({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:u},offset:d,stepPosition:c});return[h.reduce((m,z,N)=>{let S="";return N>0&&N<h.length-1?S=Sd(h[N-1],z,h[N+1],i):S=`${N===0?"M":"L"}${z.x} ${z.y}`,m+=S,m},""),f,g,p,w]}function Ir(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ed(e){const{sourceNode:t,targetNode:n}=e;if(!Ir(t)||!Ir(n))return null;const o=t.internals.handleBounds||zr(t.handles),r=n.internals.handleBounds||zr(n.handles),s=Or(o?.source??[],e.sourceHandle),i=Or(e.connectionMode===At.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!s||!i)return e.onError?.("008",tn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=s?.position||j.Bottom,u=i?.position||j.Top,d=on(t,s,a),c=on(n,i,u);return{sourceX:d.x,sourceY:d.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:u}}function zr(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function on(e,t,n=j.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:i,height:a}=t??wt(e);if(o)return{x:r+i/2,y:s+a/2};switch(t?.position??n){case j.Top:return{x:r+i/2,y:s};case j.Right:return{x:r+i,y:s+a/2};case j.Bottom:return{x:r+i/2,y:s+a};case j.Left:return{x:r,y:s+a/2}}}function Or(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Io(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Cd(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const s=new Set;return e.reduce((i,a)=>([a.markerStart||o,a.markerEnd||r].forEach(u=>{if(u&&typeof u=="object"){const d=Io(u,t);s.has(d)||(i.push({id:d,color:u.color||n,...u}),s.add(d))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const Jo={nodeOrigin:[0,0],nodeExtent:Mo,elevateNodesOnSelect:!0,defaults:{}},Nd={...Jo,checkEquality:!0};function jo(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Pd(e,t,n){const o=jo(Jo,n);for(const r of e.values())if(r.parentId)$o(r,e,t,o);else{const s=cn(r,o.nodeOrigin),i=Tt(r.extent)?r.extent:o.nodeExtent,a=yt(s,i,wt(r));r.internals.positionAbsolute=a}}function Ad(e,t,n,o){const r=jo(Nd,o);let s=e.length>0;const i=new Map(t),a=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=i.get(u.id);if(r.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const c=cn(u,r.nodeOrigin),h=Tt(u.extent)?u.extent:r.nodeExtent,f=yt(c,h,wt(u));d={...r.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:f,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:Ui(u,a),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&$o(d,t,n,o)}return s}function Md(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function $o(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:i}=jo(Jo,o),a=e.parentId,u=t.get(a);if(!u){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Md(e,n);const d=r?1e3:0,{x:c,y:h,z:f}=Dd(e,u,s,i,d),{positionAbsolute:g}=e.internals,p=c!==g.x||h!==g.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:c,y:h}:g,z:f}})}function Ui(e,t){return(Qe(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Dd(e,t,n,o,r){const{x:s,y:i}=t.internals.positionAbsolute,a=wt(e),u=cn(e,n),d=Tt(e.extent)?yt(u,e.extent,a):u;let c=yt({x:s+d.x,y:i+d.y},o,a);e.extent==="parent"&&(c=Bi(c,a,t));const h=Ui(e,r),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>=h?f+1:h}}function Td(e,t,n,o=[0,0]){const r=[],s=new Map;for(const i of e){const a=t.get(i.parentId);if(!a)continue;const u=s.get(i.parentId)?.expandedRect??Dt(a),d=ld(u,i.rect);s.set(i.parentId,{expandedRect:d,parent:a})}return s.size>0&&s.forEach(({expandedRect:i,parent:a},u)=>{const d=a.internals.positionAbsolute,c=wt(a),h=a.origin??o,f=i.x<d.x?Math.round(Math.abs(d.x-i.x)):0,g=i.y<d.y?Math.round(Math.abs(d.y-i.y)):0,p=Math.max(c.width,Math.round(i.width)),w=Math.max(c.height,Math.round(i.height)),k=(p-c.width)*h[0],m=(w-c.height)*h[1];(f>0||g>0||k||m)&&(r.push({id:u,type:"position",position:{x:a.position.x-f+k,y:a.position.y-g+m}}),n.get(u)?.forEach(z=>{e.some(N=>N.id===z.id)||r.push({id:z.id,type:"position",position:{x:z.position.x+f,y:z.position.y+g}})})),(c.width<i.width||c.height<i.height||f||g)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:p+(f?h[0]*f-k:0),height:w+(g?h[1]*g-m:0)}})}),r}function Id(e,t,n,o,r,s){const i=o?.querySelector(".xyflow__viewport");let a=!1;if(!i)return{changes:[],updatedInternals:a};const u=[],d=window.getComputedStyle(i),{m22:c}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const p=Yi(f.nodeElement),w=g.measured.width!==p.width||g.measured.height!==p.height;if(!!(p.width&&p.height&&(w||!g.internals.handleBounds||f.force))){const m=f.nodeElement.getBoundingClientRect(),z=Tt(g.extent)?g.extent:s;let{positionAbsolute:N}=g.internals;g.parentId&&g.extent==="parent"?N=Bi(N,p,t.get(g.parentId)):z&&(N=yt(N,z,p));const S={...g,measured:p,internals:{...g.internals,positionAbsolute:N,handleBounds:{source:Ar("source",f.nodeElement,m,c,g.id),target:Ar("target",f.nodeElement,m,c,g.id)}}};t.set(g.id,S),g.parentId&&$o(S,t,n,{nodeOrigin:r}),a=!0,w&&(u.push({id:g.id,type:"dimensions",dimensions:p}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:Dt(S,r)}))}}if(h.length>0){const f=Td(h,t,n,r);u.push(...f)}return{changes:u,updatedInternals:a}}async function zd({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,s]],o),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function Hr(e,t,n,o,r,s){let i=r;const a=o.get(i)||new Map;o.set(i,a.set(n,t)),i=`${r}-${e}`;const u=o.get(i)||new Map;if(o.set(i,u.set(n,t)),s){i=`${r}-${e}-${s}`;const d=o.get(i)||new Map;o.set(i,d.set(n,t))}}function Od(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:s,sourceHandle:i=null,targetHandle:a=null}=o,u={edgeId:o.id,source:r,target:s,sourceHandle:i,targetHandle:a},d=`${r}-${i}--${s}-${a}`,c=`${s}-${a}--${r}-${i}`;Hr("source",u,c,e,r,i),Hr("target",u,d,e,s,a),t.set(o.id,o)}}function Qi(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Qi(n,t):!1}function Rr(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function Hd(e,t,n,o){const r=new Map;for(const[s,i]of e)if((i.selected||i.id===o)&&(!i.parentId||!Qi(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const a=e.get(s);a&&r.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function vo({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[i,a]of t){const u=n.get(i)?.internals.userNode;u&&r.push({...u,position:a.position,dragging:o})}if(!e)return[r[0],r];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:o}:r[0],r]}function Rd({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let s={x:null,y:null},i=0,a=new Map,u=!1,d={x:0,y:0},c=null,h=!1,f=null,g=!1,p=!1;function w({noDragClassName:m,handleSelector:z,domNode:N,isSelectable:S,nodeId:M,nodeClickDistance:E=0}){f=Te(N);function P({x:L,y:x},C){const{nodeLookup:v,nodeExtent:b,snapGrid:y,snapToGrid:A,nodeOrigin:I,onNodeDrag:T,onSelectionDrag:O,onError:R,updateNodePositions:U}=t();s={x:L,y:x};let q=!1,W={x:0,y:0,x2:0,y2:0};if(a.size>1&&b){const G=Qn(a);W=To(G)}for(const[G,Q]of a){if(!v.has(G))continue;let Z={x:L-Q.distance.x,y:x-Q.distance.y};A&&(Z=$n(Z,y));let $=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];if(a.size>1&&b&&!Q.extent){const{positionAbsolute:ne}=Q.internals,se=ne.x-W.x+b[0][0],de=ne.x+Q.measured.width-W.x2+b[1][0],he=ne.y-W.y+b[0][1],xe=ne.y+Q.measured.height-W.y2+b[1][1];$=[[se,he],[de,xe]]}const{position:te,positionAbsolute:fe}=Vi({nodeId:G,nextPosition:Z,nodeLookup:v,nodeExtent:$,nodeOrigin:I,onError:R});q=q||Q.position.x!==te.x||Q.position.y!==te.y,Q.position=te,Q.internals.positionAbsolute=fe}if(p=p||q,!!q&&(U(a,!0),C&&(o||T||!M&&O))){const[G,Q]=vo({nodeId:M,dragItems:a,nodeLookup:v});o?.(C,a,G,Q),T?.(C,G,Q),M||O?.(C,Q)}}async function H(){if(!c)return;const{transform:L,panBy:x,autoPanSpeed:C,autoPanOnNodeDrag:v}=t();if(!v){u=!1,cancelAnimationFrame(i);return}const[b,y]=Ki(d,c,C);(b!==0||y!==0)&&(s.x=(s.x??0)-b/L[2],s.y=(s.y??0)-y/L[2],await x({x:b,y})&&P(s,null)),i=requestAnimationFrame(H)}function X(L){const{nodeLookup:x,multiSelectionActive:C,nodesDraggable:v,transform:b,snapGrid:y,snapToGrid:A,selectNodesOnDrag:I,onNodeDragStart:T,onSelectionDragStart:O,unselectNodesAndEdges:R}=t();h=!0,(!I||!S)&&!C&&M&&(x.get(M)?.selected||R()),S&&I&&M&&e?.(M);const U=go(L.sourceEvent,{transform:b,snapGrid:y,snapToGrid:A,containerBounds:c});if(s=U,a=Hd(x,v,U,M),a.size>0&&(n||T||!M&&O)){const[q,W]=vo({nodeId:M,dragItems:a,nodeLookup:x});n?.(L.sourceEvent,a,q,W),T?.(L.sourceEvent,q,W),M||O?.(L.sourceEvent,W)}}const J=ic().clickDistance(E).on("start",L=>{const{domNode:x,nodeDragThreshold:C,transform:v,snapGrid:b,snapToGrid:y}=t();c=x?.getBoundingClientRect()||null,g=!1,p=!1,C===0&&X(L),s=go(L.sourceEvent,{transform:v,snapGrid:b,snapToGrid:y,containerBounds:c}),d=Be(L.sourceEvent,c)}).on("drag",L=>{const{autoPanOnNodeDrag:x,transform:C,snapGrid:v,snapToGrid:b,nodeDragThreshold:y,nodeLookup:A}=t(),I=go(L.sourceEvent,{transform:C,snapGrid:v,snapToGrid:b,containerBounds:c});if((L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||M&&!A.has(M))&&(g=!0),!g){if(!u&&x&&h&&(u=!0,H()),!h){const T=I.xSnapped-(s.x??0),O=I.ySnapped-(s.y??0);Math.sqrt(T*T+O*O)>y&&X(L)}(s.x!==I.xSnapped||s.y!==I.ySnapped)&&a&&h&&(d=Be(L.sourceEvent,c),P(I,L.sourceEvent))}}).on("end",L=>{if(!(!h||g)&&(u=!1,h=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:x,updateNodePositions:C,onNodeDragStop:v,onSelectionDragStop:b}=t();if(p&&(C(a,!1),p=!1),r||v||!M&&b){const[y,A]=vo({nodeId:M,dragItems:a,nodeLookup:x,dragging:!1});r?.(L.sourceEvent,a,y,A),v?.(L.sourceEvent,y,A),M||b?.(L.sourceEvent,A)}}}).filter(L=>{const x=L.target;return!L.button&&(!m||!Rr(x,`.${m}`,N))&&(!z||Rr(x,z,N))});f.call(J)}function k(){f?.on(".drag",null)}return{update:w,destroy:k}}function Ld(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())nn(r,Dt(s))>0&&o.push(s);return o}const Vd=250;function Bd(e,t,n,o){let r=[],s=1/0;const i=Ld(e,n,t+Vd);for(const a of i){const u=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const d of u){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:c,y:h}=on(a,d,d.position,!0),f=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(h-e.y,2));f>t||(f<s?(r=[{...d,x:c,y:h}],s=f):f===s&&r.push({...d,x:c,y:h}))}}if(!r.length)return null;if(r.length>1){const a=o.type==="source"?"target":"source";return r.find(u=>u.type===a)??r[0]}return r[0]}function Ji(e,t,n,o,r,s=!1){const i=o.get(e);if(!i)return null;const a=r==="strict"?i.internals.handleBounds?.[t]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],u=(n?a?.find(d=>d.id===n):a?.[0])??null;return u&&s?{...u,...on(i,u,u.position,!0)}:u}function ji(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Kd(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const $i=()=>!0;function Yd(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:s,isTarget:i,domNode:a,nodeLookup:u,lib:d,autoPanOnConnect:c,flowId:h,panBy:f,cancelConnection:g,onConnectStart:p,onConnect:w,onConnectEnd:k,isValidConnection:m=$i,onReconnectEnd:z,updateConnection:N,getTransform:S,getFromHandle:M,autoPanSpeed:E,dragThreshold:P=1}){const H=Fi(e.target);let X=0,J;const{x:L,y:x}=Be(e),C=H?.elementFromPoint(L,x),v=ji(s,C),b=a?.getBoundingClientRect();let y=!1;if(!b||!v)return;const A=Ji(r,v,o,u,t);if(!A)return;let I=Be(e,b),T=!1,O=null,R=!1,U=null;function q(){if(!c||!b)return;const[ne,se]=Ki(I,b,E);f({x:ne,y:se}),X=requestAnimationFrame(q)}const W={...A,nodeId:r,type:v,position:A.position},G=u.get(r);let Z={inProgress:!0,isValid:null,from:on(G,W,j.Left,!0),fromHandle:W,fromPosition:W.position,fromNode:G,to:I,toHandle:null,toPosition:Er[W.position],toNode:null};function $(){y=!0,N(Z),p?.(e,{nodeId:r,handleId:o,handleType:v})}P===0&&$();function te(ne){if(!y){const{x:xe,y:Ht}=Be(ne),$e=xe-L,ce=Ht-x;if(!($e*$e+ce*ce>P*P))return;$()}if(!M()||!W){fe(ne);return}const se=S();I=Be(ne,b),J=Bd(un(I,se,!1,[1,1]),n,u,W),T||(q(),T=!0);const de=es(ne,{handle:J,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:i?"target":"source",isValidConnection:m,doc:H,lib:d,flowId:h,nodeLookup:u});U=de.handleDomNode,O=de.connection,R=Kd(!!J,de.isValid);const he={...Z,isValid:R,to:de.toHandle&&R?Ln({x:de.toHandle.x,y:de.toHandle.y},se):I,toHandle:de.toHandle,toPosition:R&&de.toHandle?de.toHandle.position:Er[W.position],toNode:de.toHandle?u.get(de.toHandle.nodeId):null};R&&J&&Z.toHandle&&he.toHandle&&Z.toHandle.type===he.toHandle.type&&Z.toHandle.nodeId===he.toHandle.nodeId&&Z.toHandle.id===he.toHandle.id&&Z.to.x===he.to.x&&Z.to.y===he.to.y||(N(he),Z=he)}function fe(ne){if(y){(J||U)&&O&&R&&w?.(O);const{inProgress:se,...de}=Z,he={...de,toPosition:Z.toHandle?Z.toPosition:null};k?.(ne,he),s&&z?.(ne,he)}g(),cancelAnimationFrame(X),T=!1,R=!1,O=null,U=null,H.removeEventListener("mousemove",te),H.removeEventListener("mouseup",fe),H.removeEventListener("touchmove",te),H.removeEventListener("touchend",fe)}H.addEventListener("mousemove",te),H.addEventListener("mouseup",fe),H.addEventListener("touchmove",te),H.addEventListener("touchend",fe)}function es(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:s,doc:i,lib:a,flowId:u,isValidConnection:d=$i,nodeLookup:c}){const h=s==="target",f=t?i.querySelector(`.${a}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:p}=Be(e),w=i.elementFromPoint(g,p),k=w?.classList.contains(`${a}-flow__handle`)?w:f,m={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const z=ji(void 0,k),N=k.getAttribute("data-nodeid"),S=k.getAttribute("data-handleid"),M=k.classList.contains("connectable"),E=k.classList.contains("connectableend");if(!N||!z)return m;const P={source:h?N:o,sourceHandle:h?S:r,target:h?o:N,targetHandle:h?r:S};m.connection=P;const X=M&&E&&(n===At.Strict?h&&z==="source"||!h&&z==="target":N!==o||S!==r);m.isValid=X&&d(P),m.toHandle=Ji(N,z,S,c,n,!0)}return m}const Lr={onPointerDown:Yd,isValid:es},Fd=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,to=e=>({x:e.x,y:e.y,zoom:e.k}),yo=({x:e,y:t,zoom:n})=>Un.translate(e,t).scale(n),St=(e,t)=>e.target.closest(`.${t}`),ts=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xd=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,mo=(e,t=0,n=Xd,o=()=>{})=>{const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},ns=e=>{const t=e.ctrlKey&&Vn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Zd({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:d}){return c=>{if(St(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(c.ctrlKey&&i){const k=Le(c),m=ns(c),z=h*Math.pow(2,m);o.scaleTo(n,z,k,c);return}const f=c.deltaMode===1?20:1;let g=r===st.Vertical?0:c.deltaX*f,p=r===st.Horizontal?0:c.deltaY*f;!Vn()&&c.shiftKey&&r!==st.Vertical&&(g=c.deltaY*f,p=0),o.translateBy(n,-(g/h)*s,-(p/h)*s,{internal:!0});const w=to(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(c,w)),e.isPanScrolling&&(u?.(c,w),e.panScrollTimeout=setTimeout(()=>{d?.(c,w),e.isPanScrolling=!1},150))}}function Wd({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const s=o.type==="wheel",i=!t&&s&&!o.ctrlKey,a=St(o,e);if(o.ctrlKey&&s&&a&&o.preventDefault(),i||a)return null;o.preventDefault(),n.call(this,o,r)}}function qd({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=to(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,o.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(o.sourceEvent,r)}}function Gd({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return s=>{e.usedRightMouseButton=!!(n&&ts(t,e.mouseButton??0)),s.sourceEvent?.sync||o([s.transform.x,s.transform.y,s.transform.k]),r&&!s.sourceEvent?.internal&&r?.(s.sourceEvent,to(s.transform))}}function Ud({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:s}){return i=>{if(!i.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&ts(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Fd(e.prevViewport,i.transform))){const a=to(i.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r?.(i.sourceEvent,a)},n?150:0)}}}function Qd({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:a,noPanClassName:u,lib:d}){return c=>{const h=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(St(c,`${d}-flow__node`)||St(c,`${d}-flow__edge`)))return!0;if(!o&&!h&&!r&&!s&&!n||i||St(c,a)&&c.type==="wheel"||St(c,u)&&(c.type!=="wheel"||r&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&c.touches?.length>1)return c.preventDefault(),!1;if(!h&&!r&&!f&&c.type==="wheel"||!o&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(o)&&!o.includes(c.button)&&c.type==="mousedown")return!1;const g=Array.isArray(o)&&o.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&g}}function Jd({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:s,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:u,onDraggingChange:d}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=ju().clickDistance(!Qe(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),g=Te(e).call(f);N({x:s.x,y:s.y,zoom:Mt(s.zoom,t,n)},[[0,0],[h.width,h.height]],r);const p=g.on("wheel.zoom"),w=g.on("dblclick.zoom");f.wheelDelta(ns);function k(x,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Wt:xn).transform(mo(g,C?.duration,C?.ease,()=>v(!0)),x)}):Promise.resolve(!1)}function m({noWheelClassName:x,noPanClassName:C,onPaneContextMenu:v,userSelectionActive:b,panOnScroll:y,panOnDrag:A,panOnScrollMode:I,panOnScrollSpeed:T,preventScrolling:O,zoomOnPinch:R,zoomOnScroll:U,zoomOnDoubleClick:q,zoomActivationKeyPressed:W,lib:G,onTransformChange:Q}){b&&!c.isZoomingOrPanning&&z();const $=y&&!W&&!b?Zd({zoomPanValues:c,noWheelClassName:x,d3Selection:g,d3Zoom:f,panOnScrollMode:I,panOnScrollSpeed:T,zoomOnPinch:R,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:u}):Wd({noWheelClassName:x,preventScrolling:O,d3ZoomHandler:p});if(g.on("wheel.zoom",$,{passive:!1}),!b){const fe=qd({zoomPanValues:c,onDraggingChange:d,onPanZoomStart:a});f.on("start",fe);const ne=Gd({zoomPanValues:c,panOnDrag:A,onPaneContextMenu:!!v,onPanZoom:i,onTransformChange:Q});f.on("zoom",ne);const se=Ud({zoomPanValues:c,panOnDrag:A,panOnScroll:y,onPaneContextMenu:v,onPanZoomEnd:u,onDraggingChange:d});f.on("end",se)}const te=Qd({zoomActivationKeyPressed:W,panOnDrag:A,zoomOnScroll:U,panOnScroll:y,zoomOnDoubleClick:q,zoomOnPinch:R,userSelectionActive:b,noPanClassName:C,noWheelClassName:x,lib:G});f.filter(te),q?g.on("dblclick.zoom",w):g.on("dblclick.zoom",null)}function z(){f.on("zoom",null)}async function N(x,C,v){const b=yo(x),y=f?.constrain()(b,C,v);return y&&await k(y),new Promise(A=>A(y))}async function S(x,C){const v=yo(x);return await k(v,C),new Promise(b=>b(v))}function M(x){if(g){const C=yo(x),v=g.property("__zoom");(v.k!==x.zoom||v.x!==x.x||v.y!==x.y)&&f?.transform(g,C,null,{sync:!0})}}function E(){const x=g?Hi(g.node()):{x:0,y:0,k:1};return{x:x.x,y:x.y,zoom:x.k}}function P(x,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Wt:xn).scaleTo(mo(g,C?.duration,C?.ease,()=>v(!0)),x)}):Promise.resolve(!1)}function H(x,C){return g?new Promise(v=>{f?.interpolate(C?.interpolate==="linear"?Wt:xn).scaleBy(mo(g,C?.duration,C?.ease,()=>v(!0)),x)}):Promise.resolve(!1)}function X(x){f?.scaleExtent(x)}function J(x){f?.translateExtent(x)}function L(x){const C=!Qe(x)||x<0?0:x;f?.clickDistance(C)}return{update:m,destroy:z,setViewport:S,setViewportConstrained:N,getViewport:E,scaleTo:P,scaleBy:H,setScaleExtent:X,setTranslateExtent:J,syncViewport:M,setClickDistance:L}}var Vr;(function(e){e.Line="line",e.Handle="handle"})(Vr||(Vr={}));var jd=ee("<div><!></div>");function Je(e,t){re(t,!0);let n=Y(t,"id",3,null),o=Y(t,"type",3,"source"),r=Y(t,"position",19,()=>j.Top),s=Y(t,"isConnectableStart",3,!0),i=Y(t,"isConnectableEnd",3,!0),a=mt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=Qt("svelteflow__node_id"),d=Qt("svelteflow__node_connectable");let c=_(()=>o()==="target"),h=_(()=>t.isConnectable!==void 0?t.isConnectable:d.value),f=_t(),g=_(()=>f.ariaLabelConfig),p=null;Ys(()=>{if(t.onconnect||t.ondisconnect){f.edges;let x=f.connectionLookup.get(`${u}-${o()}${n()?`-${n()}`:""}`);if(p&&!ed(x,p)){const C=x??new Map;Cr(p,C,t.ondisconnect),Cr(C,p,t.onconnect)}p=new Map(x)}});let w=_(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:x,toHandle:C,isValid:v}=f.connection,b=x&&x.nodeId===u&&x.type===o()&&x.id===n(),y=C&&C.nodeId===u&&C.type===o()&&C.id===n(),A=f.connectionMode===At.Strict?x?.type!==o():u!==x?.nodeId||n()!==x?.id;return[!0,b,y,A,y&&v]}),k=_(()=>zt(l(w),5)),m=_(()=>l(k)[0]),z=_(()=>l(k)[1]),N=_(()=>l(k)[2]),S=_(()=>l(k)[3]),M=_(()=>l(k)[4]);function E(x){const C=f.onbeforeconnect?.(x)??x;C&&(f.addEdge(C),f.onconnect?.(x))}function P(x){const C=Zi(x);(C&&x.button===0||!C)&&Lr.onPointerDown(x,{handleId:n(),nodeId:u,isTarget:l(c),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:E,onConnectStart:(v,b)=>{f.onconnectstart?.(v,{nodeId:b.nodeId,handleId:b.handleId,handleType:b.handleType})},onConnectEnd:(v,b)=>{f.onconnectend?.(v,b)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold})}function H(x){if(!u||!f.clickConnectStartHandle&&!s())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(x,{nodeId:u,handleId:n(),handleType:o()}),f.clickConnectStartHandle={nodeId:u,type:o(),id:n()};return}const C=Fi(x.target),v=t.isValidConnection??f.isValidConnection,{connectionMode:b,clickConnectStartHandle:y,flowId:A,nodeLookup:I}=f,{connection:T,isValid:O}=Lr.isValid(x,{handle:{nodeId:u,id:n(),type:o()},connectionMode:b,fromNodeId:y.nodeId,fromHandleId:y.id??null,fromType:y.type,isValidConnection:v,flowId:A,doc:C,lib:"svelte",nodeLookup:I});O&&T&&E(T);const R=structuredClone(Vo(f.connection));delete R.inProgress,R.toPosition=R.toHandle?R.toHandle.position:null,f.onclickconnectend?.(x,R),f.clickConnectStartHandle=null}var X=jd(),J=()=>{};ct(X,x=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":r(),"data-id":`${f.flowId??""}-${u??""}-${n()??"null"??""}-${o()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${r()}`,f.noDragClass,f.noPanClass,r(),t.class],onmousedown:P,ontouchstart:P,onclick:f.clickConnect?H:void 0,onkeypress:J,style:t.style,role:"button","aria-label":l(g)["handle.ariaLabel"],tabindex:"-1",...a,[tt]:x}),[()=>({valid:l(M),connectingto:l(N),connectingfrom:l(z),source:!l(c),target:l(c),connectablestart:s(),connectableend:i(),connectable:l(h),connectionindicator:l(h)&&(!l(m)||l(S))&&(l(m)||f.clickConnectStartHandle?i():s())})]);var L=F(X);Me(L,()=>t.children??It),K(X),V(e,X),ie()}var $d=ee("<!> <!>",1);function os(e,t){re(t,!0);let n=Y(t,"targetPosition",19,()=>j.Top),o=Y(t,"sourcePosition",19,()=>j.Bottom);var r=$d(),s=ae(r);Je(s,{type:"target",get position(){return n()}});var i=B(s),a=B(i);Je(a,{type:"source",get position(){return o()}}),ue(()=>me(i,` ${t.data?.label??""} `)),V(e,r),ie()}var ef=ee(" <!>",1);function tf(e,t){re(t,!0);let n=Y(t,"data",19,()=>({label:"Node"})),o=Y(t,"sourcePosition",19,()=>j.Bottom);Xn();var r=ef(),s=ae(r),i=B(s);Je(i,{type:"source",get position(){return o()}}),ue(()=>me(s,`${n()?.label??""} `)),V(e,r),ie()}var nf=ee(" <!>",1);function of(e,t){re(t,!0);let n=Y(t,"data",19,()=>({label:"Node"})),o=Y(t,"targetPosition",19,()=>j.Top);Xn();var r=nf(),s=ae(r),i=B(s);Je(i,{type:"target",get position(){return o()}}),ue(()=>me(s,`${n()?.label??""} `)),V(e,r),ie()}function rf(e,t){}function po(e,t,n){if(!n||!t)return;const o=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);o&&o.appendChild(e)}function sf(e,t){const n=_(_t),o=_(()=>l(n).domNode);let r;return l(o)?po(e,l(o),t):r=ei(()=>{ht(()=>{po(e,l(o),t),r?.()})}),{async update(s){po(e,l(o),s)},destroy(){e.parentNode&&e.parentNode.removeChild(e),r?.()}}}function af(){let e=ge(typeof window>"u");if(l(e)){const t=ei(()=>{ht(()=>{D(e,!1),t?.()})})}return{get value(){return l(e)}}}const Br=e=>nd(e),lf=e=>Li(e);function Fe(e){return e===void 0?void 0:`${e}px`}const Bn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var cf=ee("<div><!></div>");function uf(e,t){re(t,!0);let n=Y(t,"x",3,0),o=Y(t,"y",3,0),r=Y(t,"selectEdgeOnClick",3,!1),s=Y(t,"transparent",3,!1),i=mt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=_t(),u=Qt("svelteflow__edge_id");let d=_(()=>a.visible.edges.get(u)?.zIndex);var c=cf(),h=()=>{r()&&u&&a.handleEdgeSelection(u)};ct(c,g=>({class:["svelte-flow__edge-label",{transparent:s()},t.class],tabindex:"-1",onclick:h,...i,[qe]:g}),[()=>({display:af().value?"none":void 0,cursor:r()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${o()??""}px)`,"pointer-events":"all",width:Fe(t.width),height:Fe(t.height),"z-index":l(d)})],void 0,"svelte-w2n27y");var f=F(c);Me(f,()=>t.children??It),K(c),ke(c,(g,p)=>sf?.(g,p),()=>"edge-labels"),V(e,c),ie()}var df=pe("<path></path>"),ff=pe('<path fill="none"></path><!><!>',1);function dn(e,t){let n=Y(t,"interactionWidth",3,20),o=mt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var r=ff(),s=ae(r),i=B(s);{var a=c=>{var h=df();ct(h,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...o})),V(c,h)};le(i,c=>{n()>0&&c(a)})}var u=B(i);{var d=c=>{uf(c,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{Xn();var g=Fs();ue(()=>me(g,t.label)),V(h,g)},$$slots:{default:!0}})};le(u,c=>{t.label&&c(d)})}ue(()=>{oe(s,"id",t.id),oe(s,"d",t.path),lt(s,0,pt(["svelte-flow__edge-path",t.class])),oe(s,"marker-start",t.markerStart),oe(s,"marker-end",t.markerEnd),Ye(s,t.style)}),V(e,r)}function rs(e,t){re(t,!0);let n=_(()=>Wi({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.pathOptions?.curvature})),o=_(()=>zt(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get id(){return t.id},get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function hf(e,t){re(t,!0);let n=_(()=>eo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),o=_(()=>zt(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function gf(e,t){re(t,!0);let n=_(()=>Gi({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),o=_(()=>zt(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}function vf(e,t){re(t,!0);let n=_(()=>eo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),o=_(()=>zt(l(n),3)),r=_(()=>l(o)[0]),s=_(()=>l(o)[1]),i=_(()=>l(o)[2]);dn(e,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ie()}class yf{#e;#t;constructor(t,n){this.#e=t,this.#t=js(n)}get current(){return this.#t(),this.#e()}}const mf=/\(.+\)/,pf=new Set(["all","print","screen","and","or","not","only"]);class wf extends yf{constructor(t,n){let o=mf.test(t)||t.split(/[\s,]+/).some(s=>pf.has(s.trim()))?t:`(${t})`;const r=window.matchMedia(o);super(()=>r.matches,s=>_o(r,"change",s))}}function _f(e,t,n,o){const r=new Map;return Uo(e,{x:0,y:0,width:n,height:o},t,!0).forEach(s=>{r.set(s.id,s)}),r}function Kr(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:o,previousEdges:r,connectionMode:s,onerror:i,onlyRenderVisible:a,elevateEdgesOnSelect:u}=e,d=new Map;for(const c of t){const h=o.get(c.source),f=o.get(c.target);if(!h||!f)continue;if(a){const{visibleNodes:w,transform:k,width:m,height:z}=e;if(pd({sourceNode:h,targetNode:f,width:m,height:z,transform:k}))w.set(h.id,h),w.set(f.id,f);else continue}const g=r.get(c.id);if(g&&c===g.edge&&h==g.sourceNode&&f==g.targetNode){d.set(c.id,g);continue}const p=Ed({id:c.id,sourceNode:h,targetNode:f,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:s,onError:i});p&&d.set(c.id,{...n,...c,...p,zIndex:md({selected:c.selected,zIndex:c.zIndex??n.zIndex,sourceNode:h,targetNode:f,elevateOnSelect:u}),sourceNode:h,targetNode:f,edge:c})}return d}const is={input:tf,output:of,default:os,group:rf},ss={straight:gf,smoothstep:hf,default:rs,step:vf};function xf(e,t,n,o,r,s){if(t&&!n&&o&&r){const i=Qn(s,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Qo(i,o,r,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function bf(e){class t{#e=_(()=>e.props.id??"1");get flowId(){return l(this.#e)}set flowId(o){D(this.#e,o)}#t=ge(null);get domNode(){return l(this.#t)}set domNode(o){D(this.#t,o)}#n=ge(null);get panZoom(){return l(this.#n)}set panZoom(o){D(this.#n,o)}#o=ge(e.width??0);get width(){return l(this.#o)}set width(o){D(this.#o,o)}#r=ge(e.height??0);get height(){return l(this.#r)}set height(o){D(this.#r,o)}#i=_(()=>{const o=Ad(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&o&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),o});get nodesInitialized(){return l(this.#i)}set nodesInitialized(o){D(this.#i,o)}#s=_(()=>this.panZoom!==null);get viewportInitialized(){return l(this.#s)}set viewportInitialized(o){D(this.#s,o)}#a=_(()=>(Od(this.connectionLookup,this.edgeLookup,e.edges),e.edges));get _edges(){return l(this.#a)}set _edges(o){D(this.#a,o)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(o){e.nodes=o}get edges(){return this._edges}set edges(o){e.edges=o}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#l=_(()=>{const o=this._prevSelectedNodeIds.size,r=new Set,s=this.nodes.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedNodeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=s),this._prevSelectedNodeIds=r,this._prevSelectedNodes});get selectedNodes(){return l(this.#l)}set selectedNodes(o){D(this.#l,o)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#c=_(()=>{const o=this._prevSelectedEdgeIds.size,r=new Set,s=this.edges.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedEdgeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=s),this._prevSelectedEdgeIds=r,this._prevSelectedEdges});get selectedEdges(){return l(this.#c)}set selectedEdges(o){D(this.#c,o)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=_(()=>{const{nodes:o,_edges:r,_prevVisibleEdges:s,nodeLookup:i,connectionMode:a,onerror:u,onlyRenderVisibleElements:d,defaultEdgeOptions:c}=this;let h,f;const g={edges:r,defaultEdgeOptions:c,previousEdges:s,nodeLookup:i,connectionMode:a,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:u};if(d){const{viewport:p,width:w,height:k}=this,m=[p.x,p.y,p.zoom];h=_f(i,m,w,k),f=Kr({...g,onlyRenderVisible:!0,visibleNodes:h,transform:m,width:w,height:k})}else h=this.nodeLookup,f=Kr(g);return{nodes:h,edges:f}});get visible(){return l(this.#u)}set visible(o){D(this.#u,o)}#d=_(()=>e.props.nodesDraggable??!0);get nodesDraggable(){return l(this.#d)}set nodesDraggable(o){D(this.#d,o)}#f=_(()=>e.props.nodesConnectable??!0);get nodesConnectable(){return l(this.#f)}set nodesConnectable(o){D(this.#f,o)}#h=_(()=>e.props.elementsSelectable??!0);get elementsSelectable(){return l(this.#h)}set elementsSelectable(o){D(this.#h,o)}#g=_(()=>e.props.nodesFocusable??!0);get nodesFocusable(){return l(this.#g)}set nodesFocusable(o){D(this.#g,o)}#v=_(()=>e.props.edgesFocusable??!0);get edgesFocusable(){return l(this.#v)}set edgesFocusable(o){D(this.#v,o)}#y=_(()=>e.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return l(this.#y)}set disableKeyboardA11y(o){D(this.#y,o)}#m=_(()=>e.props.minZoom??.5);get minZoom(){return l(this.#m)}set minZoom(o){D(this.#m,o)}#p=_(()=>e.props.maxZoom??2);get maxZoom(){return l(this.#p)}set maxZoom(o){D(this.#p,o)}#w=_(()=>e.props.nodeOrigin??[0,0]);get nodeOrigin(){return l(this.#w)}set nodeOrigin(o){D(this.#w,o)}#_=_(()=>e.props.nodeExtent??Mo);get nodeExtent(){return l(this.#_)}set nodeExtent(o){D(this.#_,o)}#x=_(()=>e.props.translateExtent??Mo);get translateExtent(){return l(this.#x)}set translateExtent(o){D(this.#x,o)}#b=_(()=>e.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return l(this.#b)}set defaultEdgeOptions(o){D(this.#b,o)}#k=_(()=>e.props.nodeDragThreshold??1);get nodeDragThreshold(){return l(this.#k)}set nodeDragThreshold(o){D(this.#k,o)}#S=_(()=>e.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return l(this.#S)}set autoPanOnNodeDrag(o){D(this.#S,o)}#E=_(()=>e.props.autoPanOnConnect??!0);get autoPanOnConnect(){return l(this.#E)}set autoPanOnConnect(o){D(this.#E,o)}#C=_(()=>e.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return l(this.#C)}set autoPanOnNodeFocus(o){D(this.#C,o)}#N=_(()=>e.props.connectionDragThreshold??1);get connectionDragThreshold(){return l(this.#N)}set connectionDragThreshold(o){D(this.#N,o)}fitViewQueued=e.props.fitView??!1;fitViewOptions=e.props.fitViewOptions;fitViewResolver=null;#P=_(()=>e.props.snapGrid??null);get snapGrid(){return l(this.#P)}set snapGrid(o){D(this.#P,o)}#A=ge(!1);get dragging(){return l(this.#A)}set dragging(o){D(this.#A,o)}#M=ge(null);get selectionRect(){return l(this.#M)}set selectionRect(o){D(this.#M,o)}#D=ge(!1);get selectionKeyPressed(){return l(this.#D)}set selectionKeyPressed(o){D(this.#D,o)}#T=ge(!1);get multiselectionKeyPressed(){return l(this.#T)}set multiselectionKeyPressed(o){D(this.#T,o)}#I=ge(!1);get deleteKeyPressed(){return l(this.#I)}set deleteKeyPressed(o){D(this.#I,o)}#z=ge(!1);get panActivationKeyPressed(){return l(this.#z)}set panActivationKeyPressed(o){D(this.#z,o)}#O=ge(!1);get zoomActivationKeyPressed(){return l(this.#O)}set zoomActivationKeyPressed(o){D(this.#O,o)}#H=ge(null);get selectionRectMode(){return l(this.#H)}set selectionRectMode(o){D(this.#H,o)}#R=ge("");get ariaLiveMessage(){return l(this.#R)}set ariaLiveMessage(o){D(this.#R,o)}#L=_(()=>e.props.selectionMode??On.Partial);get selectionMode(){return l(this.#L)}set selectionMode(o){D(this.#L,o)}#V=_(()=>({...is,...e.props.nodeTypes}));get nodeTypes(){return l(this.#V)}set nodeTypes(o){D(this.#V,o)}#B=_(()=>({...ss,...e.props.edgeTypes}));get edgeTypes(){return l(this.#B)}set edgeTypes(o){D(this.#B,o)}#K=_(()=>e.props.noPanClass??"nopan");get noPanClass(){return l(this.#K)}set noPanClass(o){D(this.#K,o)}#Y=_(()=>e.props.noDragClass??"nodrag");get noDragClass(){return l(this.#Y)}set noDragClass(o){D(this.#Y,o)}#F=_(()=>e.props.noWheelClass??"nowheel");get noWheelClass(){return l(this.#F)}set noWheelClass(o){D(this.#F,o)}#X=_(()=>gd(e.props.ariaLabelConfig));get ariaLabelConfig(){return l(this.#X)}set ariaLabelConfig(o){D(this.#X,o)}#Z=ge(xf(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return l(this.#Z)}set _viewport(o){D(this.#Z,o)}get viewport(){return e.viewport??this._viewport}set viewport(o){e.viewport&&(e.viewport=o),this._viewport=o}#W=ge(Do);get _connection(){return l(this.#W)}set _connection(o){D(this.#W,o)}#q=_(()=>this._connection.inProgress?{...this._connection,to:un(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return l(this.#q)}set connection(o){D(this.#q,o)}#G=_(()=>e.props.connectionMode??At.Strict);get connectionMode(){return l(this.#G)}set connectionMode(o){D(this.#G,o)}#U=_(()=>e.props.connectionRadius??20);get connectionRadius(){return l(this.#U)}set connectionRadius(o){D(this.#U,o)}#Q=_(()=>e.props.isValidConnection??(()=>!0));get isValidConnection(){return l(this.#Q)}set isValidConnection(o){D(this.#Q,o)}#J=_(()=>e.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return l(this.#J)}set selectNodesOnDrag(o){D(this.#J,o)}#j=_(()=>e.props.defaultMarkerColor??"#b1b1b7");get defaultMarkerColor(){return l(this.#j)}set defaultMarkerColor(o){D(this.#j,o)}#$=_(()=>Cd(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return l(this.#$)}set markers(o){D(this.#$,o)}#ee=_(()=>e.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return l(this.#ee)}set onlyRenderVisibleElements(o){D(this.#ee,o)}#te=_(()=>e.props.onflowerror??cd);get onerror(){return l(this.#te)}set onerror(o){D(this.#te,o)}#ne=_(()=>e.props.ondelete);get ondelete(){return l(this.#ne)}set ondelete(o){D(this.#ne,o)}#oe=_(()=>e.props.onbeforedelete);get onbeforedelete(){return l(this.#oe)}set onbeforedelete(o){D(this.#oe,o)}#re=_(()=>e.props.onbeforeconnect);get onbeforeconnect(){return l(this.#re)}set onbeforeconnect(o){D(this.#re,o)}#ie=_(()=>e.props.onconnect);get onconnect(){return l(this.#ie)}set onconnect(o){D(this.#ie,o)}#se=_(()=>e.props.onconnectstart);get onconnectstart(){return l(this.#se)}set onconnectstart(o){D(this.#se,o)}#ae=_(()=>e.props.onconnectend);get onconnectend(){return l(this.#ae)}set onconnectend(o){D(this.#ae,o)}#le=_(()=>e.props.onbeforereconnect);get onbeforereconnect(){return l(this.#le)}set onbeforereconnect(o){D(this.#le,o)}#ce=_(()=>e.props.onreconnect);get onreconnect(){return l(this.#ce)}set onreconnect(o){D(this.#ce,o)}#ue=_(()=>e.props.onreconnectstart);get onreconnectstart(){return l(this.#ue)}set onreconnectstart(o){D(this.#ue,o)}#de=_(()=>e.props.onreconnectend);get onreconnectend(){return l(this.#de)}set onreconnectend(o){D(this.#de,o)}#fe=_(()=>e.props.clickConnect??!0);get clickConnect(){return l(this.#fe)}set clickConnect(o){D(this.#fe,o)}#he=_(()=>e.props.onclickconnectstart);get onclickconnectstart(){return l(this.#he)}set onclickconnectstart(o){D(this.#he,o)}#ge=_(()=>e.props.onclickconnectend);get onclickconnectend(){return l(this.#ge)}set onclickconnectend(o){D(this.#ge,o)}#ve=ge(null);get clickConnectStartHandle(){return l(this.#ve)}set clickConnectStartHandle(o){D(this.#ve,o)}#ye=_(()=>e.props.onselectiondrag);get onselectiondrag(){return l(this.#ye)}set onselectiondrag(o){D(this.#ye,o)}#me=_(()=>e.props.onselectiondragstart);get onselectiondragstart(){return l(this.#me)}set onselectiondragstart(o){D(this.#me,o)}#pe=_(()=>e.props.onselectiondragstop);get onselectiondragstop(){return l(this.#pe)}set onselectiondragstop(o){D(this.#pe,o)}resolveFitView=async()=>{this.panZoom&&(await sd({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new wf("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark");#we=_(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light");get colorMode(){return l(this.#we)}set colorMode(o){D(this.#we,o)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Do,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new t}function _t(){const e=Qt(zo);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const zo=Symbol();function kf(e){const t=bf(e);function n(x){t.nodeTypes={...is,...x}}function o(x){t.edgeTypes={...ss,...x}}function r(x){t.edges=xd(x,t.edges)}const s=(x,C=!1)=>{t.nodes=t.nodes.map(v=>{const b=x.get(v.id);return b?{...v,position:b.position,dragging:C}:v})};function i(x){const{changes:C,updatedInternals:v}=Id(x,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!v)return;Pd(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const b=new Map;for(const y of C){const A=t.nodeLookup.get(y.id)?.internals.userNode;if(!A)continue;const I={...A};switch(y.type){case"dimensions":{const T={...I.measured,...y.dimensions};y.setAttributes&&(I.width=y.dimensions?.width??I.width,I.height=y.dimensions?.height??I.height),I.measured=T;break}case"position":I.position=y.position??I.position;break}b.set(y.id,I)}t.nodes=t.nodes.map(y=>b.get(y.id)??y)}function a(x){const C=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=x,t.fitViewResolver=C,t.nodes=[...t.nodes],C.promise}async function u(x,C,v){const b=typeof v?.zoom<"u"?v.zoom:t.maxZoom,y=t.panZoom;return y?(await y.setViewport({x:t.width/2-x*b,y:t.height/2-C*b,zoom:b},{duration:v?.duration,ease:v?.ease,interpolate:v?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function d(x,C){const v=t.panZoom;return v?v.scaleBy(x,C):Promise.resolve(!1)}function c(x){return d(1.2,x)}function h(x){return d(1/1.2,x)}function f(x){const C=t.panZoom;C&&(C.setScaleExtent([x,t.maxZoom]),t.minZoom=x)}function g(x){const C=t.panZoom;C&&(C.setScaleExtent([t.minZoom,x]),t.maxZoom=x)}function p(x){const C=t.panZoom;C&&(C.setTranslateExtent(x),t.translateExtent=x)}function w(x){t.panZoom?.setClickDistance(x)}function k(x,C=null){let v=!1;const b=x.map(y=>(C?C.has(y.id):!0)&&y.selected?(v=!0,{...y,selected:!1}):y);return[v,b]}function m(x){const C=x?.nodes?new Set(x.nodes.map(T=>T.id)):null,[v,b]=k(t.nodes,C);v&&(t.nodes=b);const y=x?.edges?new Set(x.edges.map(T=>T.id)):null,[A,I]=k(t.edges,y);A&&(t.edges=I)}function z(x){const C=t.multiselectionKeyPressed;t.nodes=t.nodes.map(v=>{const b=x.includes(v.id),y=C&&v.selected||b;if(v.selected!==y){const A=t.nodeLookup.get(v.id);return A&&(A.selected=y),v.selected=y,{...v}}return v}),C||m({nodes:[]})}function N(x){const C=t.multiselectionKeyPressed;t.edges=t.edges.map(v=>{const b=x.includes(v.id),y=C&&v.selected||b;return v.selected!==y?{...v,selected:y}:v}),C||m({edges:[]})}function S(x,C,v){const b=t.nodeLookup.get(x);if(!b){console.warn("012",tn.error012(x));return}t.selectionRect=null,t.selectionRectMode=null,b.selected?(C||b.selected&&t.multiselectionKeyPressed)&&(m({nodes:[b],edges:[]}),requestAnimationFrame(()=>v?.blur())):z([x])}function M(x){const C=t.edgeLookup.get(x);if(!C){console.warn("012",tn.error012(x));return}(C.selectable||t.elementsSelectable&&typeof C.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,C.selected?C.selected&&t.multiselectionKeyPressed&&m({nodes:[],edges:[C]}):N([x]))}function E(x,C){const{nodeExtent:v,snapGrid:b,nodeOrigin:y,nodeLookup:A,nodesDraggable:I,onerror:T}=t,O=new Map,R=b?.[0]??5,U=b?.[1]??5,q=x.x*R*C,W=x.y*U*C;for(const G of A.values()){if(!(G.selected&&(G.draggable||I&&typeof G.draggable>"u")))continue;let Z={x:G.internals.positionAbsolute.x+q,y:G.internals.positionAbsolute.y+W};b&&(Z=$n(Z,b));const{position:$,positionAbsolute:te}=Vi({nodeId:G.id,nextPosition:Z,nodeLookup:A,nodeExtent:v,nodeOrigin:y,onError:T});G.position=$,G.internals.positionAbsolute=te,O.set(G.id,G)}s(O)}function P(x){return zd({delta:x,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const H=x=>{t._connection={...x}};function X(){t._connection=Do}function J(){t.resetStoreValues(),m()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:o,addEdge:r,updateNodePositions:s,updateNodeInternals:i,zoomIn:c,zoomOut:h,fitView:a,setCenter:u,setMinZoom:f,setMaxZoom:g,setTranslateExtent:p,setPaneClickDistance:w,unselectNodesAndEdges:m,addSelectedNodes:z,addSelectedEdges:N,handleNodeSelection:S,handleEdgeSelection:M,moveSelectedNodes:E,panBy:P,updateConnection:H,cancelConnection:X,reset:J})}function Sf(e,t){const{minZoom:n,maxZoom:o,initialViewport:r,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:a,translateExtent:u,paneClickDistance:d,setPanZoomInstance:c,onDraggingChange:h,onTransformChange:f}=t,g=Jd({domNode:e,minZoom:n,maxZoom:o,translateExtent:u,viewport:r,paneClickDistance:d,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:h}),p=g.getViewport();return(r.x!==p.x||r.y!==p.y||r.zoom!==p.zoom)&&f([p.x,p.y,p.zoom]),c(g),g.update(t),{update(w){g.update(w)}}}var Ef=ee('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Cf(e,t){re(t,!0);let n=Y(t,"store",15),o=Y(t,"panOnScrollMode",19,()=>st.Free),r=Y(t,"preventScrolling",3,!0),s=Y(t,"zoomOnScroll",3,!0),i=Y(t,"zoomOnDoubleClick",3,!0),a=Y(t,"zoomOnPinch",3,!0),u=Y(t,"panOnDrag",3,!0),d=Y(t,"panOnScroll",3,!1),c=Y(t,"paneClickDistance",3,1),h=_(()=>n().panActivationKeyPressed||u()),f=_(()=>n().panActivationKeyPressed||d());const{viewport:g}=n();let p=!1;ht(()=>{!p&&n().viewportInitialized&&(t.oninit?.(),p=!0)});var w=Ef(),k=F(w);Me(k,()=>t.children),K(w),ke(w,(m,z)=>Sf?.(m,z),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:g,onDraggingChange:m=>{n(n().dragging=m,!0)},setPanZoomInstance:m=>{n(n().panZoom=m,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:s(),zoomOnDoubleClick:i(),zoomOnPinch:a(),panOnScroll:l(f),panOnDrag:l(h),panOnScrollSpeed:.5,panOnScrollMode:o()||st.Free,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof r()=="boolean"?r():!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:c(),onTransformChange:m=>{n(n().viewport={x:m[0],y:m[1],zoom:m[2]},!0)}})),V(e,w),ie()}function Yr(e,t){return n=>{n.target===t&&e?.(n)}}function Fr(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Xr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Nf=ee("<div><!></div>");function Pf(e,t){re(t,!0);let n=Y(t,"store",15),o=Y(t,"panOnDrag",3,!0),r,s=null,i=new Set,a=new Set,u=_(()=>n().panActivationKeyPressed||o()),d=_(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&l(u)!==!0),c=_(()=>n().elementsSelectable&&(l(d)||n().selectionRectMode==="user")),h=!1;function f(E){if(h||n().connection.inProgress){h=!1;return}t.onpaneclick?.({event:E}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(E){if(s=r?.getBoundingClientRect(),!n().elementsSelectable||!l(d)||E.button!==0||E.target!==r||!s)return;E.target?.setPointerCapture?.(E.pointerId);const{x:P,y:H}=Be(E,s);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:P,startY:H,x:P,y:H},!0),t.onselectionstart?.(E)}function p(E){if(!l(d)||!s||!n().selectionRect)return;h=!0;const P=Be(E,s),{startX:H=0,startY:X=0}=n().selectionRect,J={...n().selectionRect,x:P.x<H?P.x:H,y:P.y<X?P.y:X,width:Math.abs(P.x-H),height:Math.abs(P.y-X)},L=i,x=a;i=new Set(Uo(n().nodeLookup,J,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===On.Partial,!0).map(v=>v.id));const C=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const v of i){const b=n().connectionLookup.get(v);if(b)for(const{edgeId:y}of b.values()){const A=n().edgeLookup.get(y);A&&(A.selectable??C)&&a.add(y)}}Xr(L,i)||n(n().nodes=n().nodes.map(Fr(i)),!0),Xr(x,a)||n(n().edges=n().edges.map(Fr(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=J,!0)}function w(E){E.button===0&&(E.target?.releasePointerCapture?.(E.pointerId),!l(d)&&n().selectionRectMode==="user"&&E.target===r&&f?.(E),n(n().selectionRect=null,!0),i.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(h=!1),t.onselectionend?.(E))}const k=E=>{if(Array.isArray(l(u))&&l(u).includes(2)){E.preventDefault();return}t.onpanecontextmenu?.({event:E})};var m=Nf();let z;var N=_(()=>l(c)?void 0:Yr(f,r));m.__click=function(...E){l(N)?.apply(this,E)},m.__pointerdown=function(...E){(l(c)?g:void 0)?.apply(this,E)},m.__pointermove=function(...E){(l(c)?p:void 0)?.apply(this,E)},m.__pointerup=function(...E){(l(c)?w:void 0)?.apply(this,E)};var S=_(()=>Yr(k,r));m.__contextmenu=function(...E){l(S)?.apply(this,E)};var M=F(m);Me(M,()=>t.children),K(m),sn(m,E=>r=E,()=>r),ue(E=>z=lt(m,1,"svelte-flow__pane svelte-flow__container",null,z,E),[()=>({draggable:o()===!0||Array.isArray(o())&&o().includes(0),dragging:n().dragging,selection:l(d)})]),V(e,m),ie()}Ot(["click","pointerdown","pointermove","pointerup","contextmenu"]);var Af=ee('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Mf(e,t){re(t,!0);var n=Af();let o;var r=F(n);Me(r,()=>t.children),K(n),ue(s=>o=Ye(n,"",o,s),[()=>({transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})]),V(e,n),ie()}function as(e,t){const{store:n,onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i}=t,a=Rd({onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i,getStoreItems:()=>{const{snapGrid:d,viewport:c}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:d||[0,0],snapToGrid:!!d,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(d,c){if(c.disabled){a.destroy();return}a.update({domNode:d,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return u(e,t),{update(d){u(e,d)},destroy(){a.destroy()}}}var Df=ee('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-62ze0y"> </div>'),Tf=ee('<div class="a11y-hidden svelte-62ze0y"> </div> <div class="a11y-hidden svelte-62ze0y"> </div> <!>',1);function If(e,t){re(t,!0);var n=Tf(),o=ae(n),r=F(o,!0);K(o);var s=B(o,2),i=F(s,!0);K(s);var a=B(s,2);{var u=d=>{var c=Df(),h=F(c,!0);K(c),ue(()=>{oe(c,"id",`${zf}-${t.store.flowId}`),me(h,t.store.ariaLiveMessage)}),V(d,c)};le(a,d=>{t.store.disableKeyboardA11y||d(u)})}ue(()=>{oe(o,"id",`${ls}-${t.store.flowId}`),me(r,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),oe(s,"id",`${cs}-${t.store.flowId}`),me(i,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),V(e,n),ie()}const ls="svelte-flow__node-desc",cs="svelte-flow__edge-desc",zf="svelte-flow__aria-live";var Of=ee("<div><!></div>");function Hf(e,t){re(t,!0);let n=Y(t,"store",15),o=_(()=>we(t.node.data,()=>({}),!0)),r=_(()=>we(t.node.selected,!1)),s=_(()=>t.node.draggable),i=_(()=>t.node.selectable),a=_(()=>we(t.node.deletable,!0)),u=_(()=>t.node.connectable),d=_(()=>t.node.focusable),c=_(()=>we(t.node.hidden,!1)),h=_(()=>we(t.node.dragging,!1)),f=_(()=>we(t.node.style,"")),g=_(()=>t.node.class),p=_(()=>we(t.node.type,"default")),w=_(()=>t.node.parentId),k=_(()=>t.node.sourcePosition),m=_(()=>t.node.targetPosition),z=_(()=>we(t.node.measured,()=>({width:0,height:0}),!0).width),N=_(()=>we(t.node.measured,()=>({width:0,height:0}),!0).height),S=_(()=>t.node.initialWidth),M=_(()=>t.node.initialHeight),E=_(()=>t.node.width),P=_(()=>t.node.height),H=_(()=>t.node.dragHandle),X=_(()=>we(t.node.internals.z,0)),J=_(()=>t.node.internals.positionAbsolute.x),L=_(()=>t.node.internals.positionAbsolute.y),x=_(()=>t.node.internals.userNode),{id:C}=t.node,v=_(()=>l(s)??n().nodesDraggable),b=_(()=>l(i)??n().elementsSelectable),y=_(()=>l(u)??n().nodesConnectable),A=_(()=>fd(t.node)),I=_(()=>!!t.node.internals.handleBounds),T=_(()=>l(A)&&l(I)),O=_(()=>l(d)??n().nodesFocusable);function R(ce){return n().parentLookup.has(ce)}let U=_(()=>R(C)),q=ge(null),W=null,G=l(p),Q=l(k),Z=l(m),$=_(()=>n().nodeTypes[l(p)]??os),te=_(()=>n().ariaLabelConfig);En("svelteflow__node_connectable",{get value(){return l(y)}}),En("svelteflow__node_id",C);let ne=_(()=>{const ce=l(z)===void 0?l(E)??l(S):l(E),ve=l(N)===void 0?l(P)??l(M):l(P);if(!(ce===void 0&&ve===void 0&&l(f)===void 0))return`${l(f)};${ce?`width:${Fe(ce)};`:""}${ve?`height:${Fe(ve)};`:""}`});ht(()=>{(l(p)!==G||l(k)!==Q||l(m)!==Z)&&l(q)!==null&&requestAnimationFrame(()=>{l(q)!==null&&n().updateNodeInternals(new Map([[C,{id:C,nodeElement:l(q),force:!0}]]))}),G=l(p),Q=l(k),Z=l(m)}),ht(()=>{t.resizeObserver&&(!l(T)||l(q)!==W)&&(W&&t.resizeObserver.unobserve(W),l(q)&&t.resizeObserver.observe(l(q)),W=l(q))}),Ro(()=>{W&&t.resizeObserver?.unobserve(W)});function se(ce){l(b)&&(!n().selectNodesOnDrag||!l(v)||n().nodeDragThreshold>0)&&n().handleNodeSelection(C),t.onnodeclick?.({node:l(x),event:ce})}function de(ce){if(!(Xi(ce)||n().disableKeyboardA11y))if(Ri.includes(ce.key)&&l(b)){const ve=ce.key==="Escape";n().handleNodeSelection(C,ve,l(q))}else l(v)&&t.node.selected&&Object.prototype.hasOwnProperty.call(Bn,ce.key)&&(ce.preventDefault(),n(n().ariaLiveMessage=l(te)["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(Bn[ce.key],ce.shiftKey?4:1))}const he=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!l(q)?.matches(":focus-visible"))return;const{width:ce,height:ve,viewport:Ze}=n();Uo(new Map([[C,t.node]]),{x:0,y:0,width:ce,height:ve},[Ze.x,Ze.y,Ze.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:Ze.zoom})};var xe=ye(),Ht=ae(xe);{var $e=ce=>{var ve=Of();ct(ve,(be,et)=>({"data-id":C,class:["svelte-flow__node",`svelte-flow__node-${l(p)}`,l(g)],style:l(ne),onclick:se,onpointerenter:t.onnodepointerenter?Ee=>t.onnodepointerenter({node:l(x),event:Ee}):void 0,onpointerleave:t.onnodepointerleave?Ee=>t.onnodepointerleave({node:l(x),event:Ee}):void 0,onpointermove:t.onnodepointermove?Ee=>t.onnodepointermove({node:l(x),event:Ee}):void 0,oncontextmenu:t.onnodecontextmenu?Ee=>t.onnodecontextmenu({node:l(x),event:Ee}):void 0,onkeydown:l(O)?de:void 0,onfocus:l(O)?he:void 0,tabIndex:l(O)?0:void 0,role:t.node.ariaRole??(l(O)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${ls}-${n().flowId}`,...t.node.domAttributes,[tt]:be,[qe]:et}),[()=>({dragging:l(h),selected:l(r),draggable:l(v),connectable:l(y),selectable:l(b),nopan:l(v),parent:l(U)}),()=>({"z-index":l(X),transform:`translate(${l(J)??""}px, ${l(L)??""}px)`,visibility:l(A)?"visible":"hidden"})]);var Ze=F(ve);Lo(Ze,()=>l($),(be,et)=>{et(be,{get data(){return l(o)},get id(){return C},get selected(){return l(r)},get selectable(){return l(b)},get deletable(){return l(a)},get sourcePosition(){return l(k)},get targetPosition(){return l(m)},get zIndex(){return l(X)},get dragging(){return l(h)},get draggable(){return l(v)},get dragHandle(){return l(H)},get parentId(){return l(w)},get type(){return l(p)},get isConnectable(){return l(y)},get positionAbsoluteX(){return l(J)},get positionAbsoluteY(){return l(L)},get width(){return l(E)},get height(){return l(P)}})}),K(ve),ke(ve,(be,et)=>as?.(be,et),()=>({nodeId:C,isSelectable:l(b),disabled:!l(v),handleSelector:l(H),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(be,et,Ee,Rt)=>{t.onnodedrag?.({event:be,targetNode:Ee,nodes:Rt})},onDragStart:(be,et,Ee,Rt)=>{t.onnodedragstart?.({event:be,targetNode:Ee,nodes:Rt})},onDragStop:(be,et,Ee,Rt)=>{t.onnodedragstop?.({event:be,targetNode:Ee,nodes:Rt})},store:n()})),sn(ve,be=>D(q,be),()=>l(q)),V(ce,ve)};le(Ht,ce=>{l(c)||ce($e)})}V(e,xe),ie()}var Rf=ee('<div class="svelte-flow__nodes"></div>');function Lf(e,t){re(t,!0);let n=Y(t,"store",15);const o=typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const i=new Map;s.forEach(a=>{const u=a.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:a.target,force:!0})}),n().updateNodeInternals(i)});Ro(()=>{o?.disconnect()});var r=Rf();it(r,21,()=>n().visible.nodes.values(),s=>s.id,(s,i)=>{Hf(s,{get node(){return l(i)},get resizeObserver(){return o},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),K(r),V(e,r),ie()}var Vf=pe('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Bf(e,t){re(t,!0);let n=_(()=>t.edge.source),o=_(()=>t.edge.target),r=_(()=>t.edge.sourceX),s=_(()=>t.edge.sourceY),i=_(()=>t.edge.targetX),a=_(()=>t.edge.targetY),u=_(()=>t.edge.sourcePosition),d=_(()=>t.edge.targetPosition),c=_(()=>we(t.edge.animated,!1)),h=_(()=>we(t.edge.selected,!1)),f=_(()=>t.edge.label),g=_(()=>t.edge.labelStyle),p=_(()=>we(t.edge.data,()=>({}),!0)),w=_(()=>t.edge.style),k=_(()=>t.edge.interactionWidth),m=_(()=>we(t.edge.type,"default")),z=_(()=>t.edge.sourceHandle),N=_(()=>t.edge.targetHandle),S=_(()=>t.edge.markerStart),M=_(()=>t.edge.markerEnd),E=_(()=>t.edge.selectable),P=_(()=>t.edge.focusable),H=_(()=>we(t.edge.deletable,!0)),X=_(()=>t.edge.hidden),J=_(()=>t.edge.zIndex),L=_(()=>t.edge.class),x=_(()=>t.edge.ariaLabel),C=null;const{id:v}=t.edge;En("svelteflow__edge_id",v);let b=_(()=>l(E)??t.store.elementsSelectable),y=_(()=>l(P)??t.store.edgesFocusable),A=_(()=>t.store.edgeTypes[l(m)]??rs),I=_(()=>l(S)?`url('#${Io(l(S),t.store.flowId)}')`:void 0),T=_(()=>l(M)?`url('#${Io(l(M),t.store.flowId)}')`:void 0);function O(Q){const Z=t.store.edgeLookup.get(v);Z&&(l(b)&&t.store.handleEdgeSelection(v),t.onedgeclick?.({event:Q,edge:Z}))}function R(Q,Z){const $=t.store.edgeLookup.get(v);$&&Z({event:Q,edge:$})}function U(Q){if(!t.store.disableKeyboardA11y&&Ri.includes(Q.key)&&l(b)){const{unselectNodesAndEdges:Z,addSelectedEdges:$}=t.store;Q.key==="Escape"?(C?.blur(),Z({edges:[t.edge]})):$([v])}}var q=ye(),W=ae(q);{var G=Q=>{var Z=Vf();let $;var te=F(Z);ct(te,ne=>({class:["svelte-flow__edge",l(L)],"data-id":v,onclick:O,oncontextmenu:t.onedgecontextmenu?se=>{R(se,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?se=>{R(se,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?se=>{R(se,t.onedgepointerleave)}:void 0,"aria-label":l(x)===null?void 0:l(x)?l(x):`Edge from ${l(n)} to ${l(o)}`,"aria-describedby":l(y)?`${cs}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(l(y)?"group":"img"),"aria-roledescription":"edge",onkeydown:l(y)?U:void 0,tabindex:l(y)?0:void 0,...t.edge.domAttributes,[tt]:ne}),[()=>({animated:l(c),selected:l(h),selectable:l(b)})]);var fe=F(te);Lo(fe,()=>l(A),(ne,se)=>{se(ne,{get id(){return v},get source(){return l(n)},get target(){return l(o)},get sourceX(){return l(r)},get sourceY(){return l(s)},get targetX(){return l(i)},get targetY(){return l(a)},get sourcePosition(){return l(u)},get targetPosition(){return l(d)},get animated(){return l(c)},get selected(){return l(h)},get label(){return l(f)},get labelStyle(){return l(g)},get data(){return l(p)},get style(){return l(w)},get interactionWidth(){return l(k)},get selectable(){return l(b)},get deletable(){return l(H)},get type(){return l(m)},get sourceHandleId(){return l(z)},get targetHandleId(){return l(N)},get markerStart(){return l(I)},get markerEnd(){return l(T)}})}),K(te),sn(te,ne=>C=ne,()=>C),K(Z),ue(ne=>$=Ye(Z,"",$,ne),[()=>({"z-index":l(J)})]),V(Q,Z)};le(W,Q=>{l(X)||Q(G)})}V(e,q),ie()}var Kf=pe("<defs></defs>");function Yf(e,t){re(t,!1);const n=_t();Wr();var o=Kf();it(o,5,()=>n.markers,r=>r.id,(r,s)=>{Wf(r,kt(()=>l(s)))}),K(o),V(e,o),ie()}var Ff=pe('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Xf=pe('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Zf=pe('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Wf(e,t){re(t,!0);let n=Y(t,"width",3,12.5),o=Y(t,"height",3,12.5),r=Y(t,"markerUnits",3,"strokeWidth"),s=Y(t,"orient",3,"auto-start-reverse");var i=Zf(),a=F(i);{var u=c=>{var h=Ff();ue(()=>{oe(h,"stroke",t.color),oe(h,"stroke-width",t.strokeWidth)}),V(c,h)},d=c=>{var h=ye(),f=ae(h);{var g=p=>{var w=Xf();ue(()=>{oe(w,"stroke",t.color),oe(w,"stroke-width",t.strokeWidth),oe(w,"fill",t.color)}),V(p,w)};le(f,p=>{t.type===Hn.ArrowClosed&&p(g)},!0)}V(c,h)};le(a,c=>{t.type===Hn.Arrow?c(u):c(d,!1)})}K(i),ue(()=>{oe(i,"id",t.id),oe(i,"markerWidth",`${n()}`),oe(i,"markerHeight",`${o()}`),oe(i,"markerUnits",r()),oe(i,"orient",s())}),V(e,i),ie()}var qf=ee('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Gf(e,t){re(t,!0);let n=Y(t,"store",15);var o=qf(),r=F(o),s=F(r);Yf(s,{}),K(r);var i=B(r,2);it(i,17,()=>n().visible.edges.values(),a=>a.id,(a,u)=>{Bf(a,{get edge(){return l(u)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(d){n(d)}})}),K(o),V(e,o),ie()}var Uf=ee('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function us(e,t){re(t,!0);let n=Y(t,"x",3,0),o=Y(t,"y",3,0),r=Y(t,"width",3,0),s=Y(t,"height",3,0),i=Y(t,"isVisible",3,!0);var a=ye(),u=ae(a);{var d=c=>{var h=Uf();let f;ue(g=>f=Ye(h,"",f,g),[()=>({width:typeof r()=="string"?r():Fe(r()),height:typeof s()=="string"?s():Fe(s()),transform:`translate(${n()}px, ${o()}px)`})]),V(c,h)};le(u,c=>{i()&&c(d)})}V(e,a),ie()}function Qf(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectioncontextmenu?.({nodes:n,event:e})}function Jf(e,t){const n=t.store.nodes.filter(o=>o.selected);t.onselectionclick?.({nodes:n,event:e})}var jf=ee("<div><!></div>");function $f(e,t){re(t,!0);let n=ge(void 0);ht(()=>{t.store.disableKeyboardA11y||l(n)?.focus({preventScroll:!0})});let o=_(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,Qn(t.store.nodeLookup,{filter:u=>!!u.selected})):null);function r(u){Object.prototype.hasOwnProperty.call(Bn,u.key)&&(u.preventDefault(),t.store.moveSelectedNodes(Bn[u.key],u.shiftKey?4:1))}var s=ye(),i=ae(s);{var a=u=>{var d=jf();d.__contextmenu=[Qf,t],d.__click=[Jf,t],d.__keydown=function(...f){(t.store.disableKeyboardA11y?void 0:r)?.apply(this,f)};let c;var h=F(d);us(h,{width:"100%",height:"100%",x:0,y:0}),K(d),ke(d,(f,g)=>as?.(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,p,w)=>{t.onnodedrag?.({event:f,targetNode:null,nodes:w})},onDragStart:(f,g,p,w)=>{t.onnodedragstart?.({event:f,targetNode:null,nodes:w})},onDragStop:(f,g,p,w)=>{t.onnodedragstop?.({event:f,targetNode:null,nodes:w})}})),sn(d,f=>D(n,f),()=>l(n)),ue(f=>{lt(d,1,pt(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-16qgzgd"),oe(d,"role",t.store.disableKeyboardA11y?void 0:"button"),oe(d,"tabindex",t.store.disableKeyboardA11y?void 0:-1),c=Ye(d,"",c,f)},[()=>({width:Fe(l(o).width),height:Fe(l(o).height),transform:`translate(${l(o).x??""}px, ${l(o).y??""}px)`})]),V(u,d)};le(i,u=>{t.store.selectionRectMode==="nodes"&&l(o)&&Qe(l(o).x)&&Qe(l(o).y)&&u(a)})}V(e,s),ie()}Ot(["contextmenu","click","keydown"]);function eh(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Oe(e,t){let{enabled:n=!0,trigger:o,type:r="keydown"}=t;function s(a){const u=Array.isArray(o)?o:[o],d=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((c,h,f)=>h?c|1<<f:c,0);for(const c of u){const h={preventDefault:!1,enabled:!0,...c},{modifier:f,key:g,callback:p,preventDefault:w,enabled:k}=h;if(k){if(a.key!==g)continue;if(f===null||f===!1){if(d!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const z=Array.isArray(f)?f:[f];let N=!1;for(const S of z)if((Array.isArray(S)?S:[S]).reduce((E,P)=>E|eh(P),0)===d){N=!0;break}if(!N)continue}w&&a.preventDefault();const m={node:e,trigger:h,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:m})),p?.(m)}}}let i;return n&&(i=_o(e,r,s)),{update:a=>{const{enabled:u=!0,type:d="keydown"}=a;n&&(!u||r!==d)?i?.():!n&&u&&(i=_o(e,d,s)),n=u,r=d,o=a.trigger},destroy:()=>{i?.()}}}function th(){const e=_(_t),t=s=>{const i=Br(s)?s:l(e).nodeLookup.get(s.id),a=i.parentId?hd(i.position,i.measured,i.parentId,l(e).nodeLookup,l(e).nodeOrigin):i.position,u={...i,position:a,width:i.measured?.width??i.width,height:i.measured?.height??i.height};return Dt(u)};function n(s,i,a={replace:!1}){l(e).nodes=Ge(()=>l(e).nodes).map(u=>{if(u.id===s){const d=typeof i=="function"?i(u):i;return a?.replace&&Br(d)?d:{...u,...d}}return u})}function o(s,i,a={replace:!1}){l(e).edges=Ge(()=>l(e).edges).map(u=>{if(u.id===s){const d=typeof i=="function"?i(u):i;return a.replace&&lf(d)?d:{...u,...d}}return u})}const r=s=>l(e).nodeLookup.get(s);return{zoomIn:l(e).zoomIn,zoomOut:l(e).zoomOut,getInternalNode:r,getNode:s=>r(s)?.internals.userNode,getNodes:s=>s===void 0?l(e).nodes:Zr(l(e).nodeLookup,s),getEdge:s=>l(e).edgeLookup.get(s),getEdges:s=>s===void 0?l(e).edges:Zr(l(e).edgeLookup,s),setZoom:(s,i)=>{const a=l(e).panZoom;return a?a.scaleTo(s,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>l(e).viewport.zoom,setViewport:async(s,i)=>{const a=l(e).viewport;return l(e).panZoom?(await l(e).panZoom.setViewport({x:s.x??a.x,y:s.y??a.y,zoom:s.zoom??a.zoom},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Vo(l(e).viewport),setCenter:async(s,i,a)=>l(e).setCenter(s,i,a),fitView:s=>l(e).fitView(s),fitBounds:async(s,i)=>{if(!l(e).panZoom)return Promise.resolve(!1);const a=Qo(s,l(e).width,l(e).height,l(e).minZoom,l(e).maxZoom,i?.padding??.1);return await l(e).panZoom.setViewport(a,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(s,i=!0,a)=>{const u=Pr(s),d=u?s:t(s);return d?(a||l(e).nodes).filter(c=>{const h=l(e).nodeLookup.get(c.id);if(!h||!u&&c.id===s.id)return!1;const f=Dt(h),g=nn(f,d);return i&&g>0||g>=f.width*f.height||g>=d.width*d.height}):[]},isNodeIntersecting:(s,i,a=!0)=>{const d=Pr(s)?s:t(s);if(!d)return!1;const c=nn(d,i);return a&&c>0||c>=d.width*d.height},deleteElements:async({nodes:s=[],edges:i=[]})=>{const{nodes:a,edges:u}=await ad({nodesToRemove:s,edgesToRemove:i,nodes:l(e).nodes,edges:l(e).edges,onBeforeDelete:l(e).onbeforedelete});return a&&(l(e).nodes=Ge(()=>l(e).nodes).filter(d=>!a.some(({id:c})=>c===d.id))),u&&(l(e).edges=Ge(()=>l(e).edges).filter(d=>!u.some(({id:c})=>c===d.id))),{deletedNodes:a,deletedEdges:u}},screenToFlowPosition:(s,i={snapToGrid:!0})=>{if(!l(e).domNode)return s;const a=i.snapToGrid?l(e).snapGrid:!1,{x:u,y:d,zoom:c}=l(e).viewport,{x:h,y:f}=l(e).domNode.getBoundingClientRect(),g={x:s.x-h,y:s.y-f};return un(g,[u,d,c],a!==null,a||[1,1])},flowToScreenPosition:s=>{if(!l(e).domNode)return s;const{x:i,y:a,zoom:u}=l(e).viewport,{x:d,y:c}=l(e).domNode.getBoundingClientRect(),h=Ln(s,[i,a,u]);return{x:h.x+d,y:h.y+c}},toObject:()=>structuredClone({nodes:[...l(e).nodes],edges:[...l(e).edges],viewport:{...l(e).viewport}}),updateNode:n,updateNodeData:(s,i,a)=>{const u=l(e).nodeLookup.get(s)?.internals.userNode;if(!u)return;const d=typeof i=="function"?i(u):i;n(s,c=>({...c,data:a?.replace?d:{...c.data,...d}}))},updateEdge:o,getNodesBounds:s=>od(s,{nodeLookup:l(e).nodeLookup,nodeOrigin:l(e).nodeOrigin}),getHandleConnections:({type:s,id:i,nodeId:a})=>Array.from(l(e).connectionLookup.get(`${a}-${s}-${i??null}`)?.values()??[])}}function Zr(e,t){const n=[];for(const o of t){const r=e.get(o);if(r){const s="internals"in r?r.internals?.userNode:r;n.push(s)}}return n}function nh(e,t){re(t,!0);let n=Y(t,"store",15),o=Y(t,"selectionKey",3,"Shift"),r=Y(t,"multiSelectionKey",19,()=>Vn()?"Meta":"Control"),s=Y(t,"deleteKey",3,"Backspace"),i=Y(t,"panActivationKey",3," "),a=Y(t,"zoomActivationKey",19,()=>Vn()?"Meta":"Control"),{deleteElements:u}=th();function d(w){return w!==null&&typeof w=="object"}function c(w){return d(w)?w.modifier||[]:[]}function h(w){return w==null?"":d(w)?w.key:w}function f(w,k){return(Array.isArray(w)?w:[w]).map(z=>{const N=h(z);return{key:N,modifier:c(z),enabled:N!==null,callback:k}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}async function p(){const w=n().nodes.filter(N=>N.selected),k=n().edges.filter(N=>N.selected),{deletedNodes:m,deletedEdges:z}=await u({nodes:w,edges:k});(m.length>0||z.length>0)&&n().ondelete?.({nodes:m,edges:z})}Re("blur",Pe,g),Re("contextmenu",Pe,g),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(o(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(r(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(r(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(s(),w=>{!(w.originalEvent.ctrlKey||w.originalEvent.metaKey||w.originalEvent.shiftKey)&&!Xi(w.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),p())}),type:"keydown"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(s(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(i(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(i(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),ke(Pe,(w,k)=>Oe?.(w,k),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),ie()}var oh=pe('<path fill="none" class="svelte-flow__connection-path"></path>'),rh=pe('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function ih(e,t){re(t,!0);let n=_(()=>{if(!t.store.connection.inProgress)return"";const i={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case rt.Bezier:{const[a]=Wi(i);return a}case rt.Straight:{const[a]=Gi(i);return a}case rt.Step:case rt.SmoothStep:{const[a]=eo({...i,borderRadius:t.type===rt.Step?0:void 0});return a}}});var o=ye(),r=ae(o);{var s=i=>{var a=rh(),u=F(a),d=F(u);{var c=f=>{var g=ye(),p=ae(g);Lo(p,()=>t.LineComponent,(w,k)=>{k(w,{})}),V(f,g)},h=f=>{var g=oh();ue(()=>{oe(g,"d",l(n)),Ye(g,t.style)}),V(f,g)};le(d,f=>{t.LineComponent?f(c):f(h,!1)})}K(u),K(a),ue(f=>{oe(a,"width",t.store.width),oe(a,"height",t.store.height),Ye(a,t.containerStyle),lt(u,0,f)},[()=>pt(["svelte-flow__connection",td(t.store.connection.isValid)])]),V(i,a)};le(r,i=>{t.store.connection.inProgress&&i(s)})}V(e,o),ie()}var sh=ee("<div><!></div>");function ds(e,t){re(t,!0);let n=Y(t,"position",3,"top-right"),o=mt(t,["$$slots","$$events","$$legacy","position","style","class","children"]),r=_(()=>`${n()}`.split("-"));var s=sh();ct(s,a=>({class:a,style:t.style,...o}),[()=>["svelte-flow__panel",t.class,...l(r)]]);var i=F(s);Me(i,()=>t.children??It),K(s),V(e,s),ie()}var ah=ee('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function lh(e,t){re(t,!0);let n=Y(t,"position",3,"bottom-right");var o=ye(),r=ae(o);{var s=i=>{ds(i,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,u)=>{var d=ah();V(a,d)},$$slots:{default:!0}})};le(r,i=>{t.proOptions?.hideAttribution||i(s)})}V(e,o),ie()}var ch=ee("<div><!></div>");function uh(e,t){re(t,!0);let n=Y(t,"domNode",15),o=Y(t,"clientWidth",15),r=Y(t,"clientHeight",15),s=_(()=>t.rest.class),i=_(()=>Xs(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","style","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig"]));function a(c){c.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(c)}var u=ch();ct(u,c=>({class:["svelte-flow","svelte-flow__container",l(s),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...l(i),[qe]:c}),[()=>({width:Fe(t.width),height:Fe(t.height)})],void 0,"svelte-12wlba6");var d=F(u);Me(d,()=>t.children??It),K(u),sn(u,c=>n(c),()=>n()),ar(u,"clientHeight",r),ar(u,"clientWidth",o),V(e,u),ie()}var dh=ee('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),fh=ee("<!> <!>",1),hh=ee("<!> <!> <!> <!> <!>",1);function gh(e,t){re(t,!0);let n=Y(t,"paneClickDistance",3,1),o=Y(t,"nodeClickDistance",3,1),r=Y(t,"panOnScrollMode",19,()=>st.Free),s=Y(t,"preventScrolling",3,!0),i=Y(t,"zoomOnScroll",3,!0),a=Y(t,"zoomOnDoubleClick",3,!0),u=Y(t,"zoomOnPinch",3,!0),d=Y(t,"panOnScroll",3,!1),c=Y(t,"panOnDrag",3,!0),h=Y(t,"selectionOnDrag",3,!0),f=Y(t,"connectionLineType",19,()=>rt.Bezier),g=Y(t,"nodes",31,()=>Ut([])),p=Y(t,"edges",31,()=>Ut([])),w=Y(t,"viewport",15,void 0),k=mt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),m=kf({props:k,width:t.width,height:t.height,get nodes(){return g()},set nodes(N){g(N)},get edges(){return p()},set edges(N){p(N)},get viewport(){return w()},set viewport(N){w(N)}});const z=Qt(zo);z&&z.setStore&&z.setStore(m),En(zo,{provider:!1,getStore(){return m}}),ht(()=>{const N={nodes:m.selectedNodes,edges:m.selectedEdges};Ge(()=>t.onselectionchange)?.(N);for(const S of m.selectionChangeHandlers.values())S(N)}),Ro(()=>{m.reset()}),uh(e,{get colorMode(){return m.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return k},get domNode(){return m.domNode},set domNode(N){m.domNode=N},get clientWidth(){return m.width},set clientWidth(N){m.width=N},get clientHeight(){return m.height},set clientHeight(N){m.height=N},children:(N,S)=>{var M=hh(),E=ae(M);nh(E,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return m},set store(L){m=L}});var P=B(E,2);Cf(P,{get panOnScrollMode(){return r()},get preventScrolling(){return s()},get zoomOnScroll(){return i()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return u()},get panOnScroll(){return d()},get panOnDrag(){return c()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return m},set store(L){m=L},children:(L,x)=>{Pf(L,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return c()},get selectionOnDrag(){return h()},get store(){return m},set store(C){m=C},children:(C,v)=>{var b=fh(),y=ae(b);Mf(y,{get store(){return m},set store(I){m=I},children:(I,T)=>{var O=dh(),R=B(ae(O),2);Gf(R,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return m},set store(G){m=G}});var U=B(R,4);ih(U,{get type(){return f()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return m},set store(G){m=G}});var q=B(U,2);Lf(q,{get nodeClickDistance(){return o()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return m},set store(G){m=G}});var W=B(q,2);$f(W,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return m},set store(G){m=G}}),Xn(2),V(I,O)},$$slots:{default:!0}});var A=B(y,2);{let I=_(()=>!!(m.selectionRect&&m.selectionRectMode==="user")),T=_(()=>m.selectionRect?.width),O=_(()=>m.selectionRect?.height),R=_(()=>m.selectionRect?.x),U=_(()=>m.selectionRect?.y);us(A,{get isVisible(){return l(I)},get width(){return l(T)},get height(){return l(O)},get x(){return l(R)},get y(){return l(U)}})}V(C,b)},$$slots:{default:!0}})},$$slots:{default:!0}});var H=B(P,2);lh(H,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var X=B(H,2);If(X,{get store(){return m}});var J=B(X,2);Me(J,()=>t.children??It),V(N,M)},$$slots:{default:!0}}),ie()}var vh=ee("<button><!></button>");function pn(e,t){let n=mt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var o=vh();ct(o,s=>({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[qe]:s}),[()=>({"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor})]);var r=F(o);Me(r,()=>t.children??It),K(o),V(e,o)}var yh=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function mh(e){var t=yh();V(e,t)}var ph=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function wh(e){var t=ph();V(e,t)}var _h=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function xh(e){var t=_h();V(e,t)}var bh=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function kh(e){var t=bh();V(e,t)}var Sh=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function Eh(e){var t=Sh();V(e,t)}var Ch=ee("<!> <!>",1),Nh=ee("<!> <!> <!> <!> <!> <!>",1);function Ph(e,t){re(t,!0);let n=Y(t,"position",3,"bottom-left"),o=Y(t,"orientation",3,"vertical"),r=Y(t,"showZoom",3,!0),s=Y(t,"showFitView",3,!0),i=Y(t,"showLock",3,!0),a=mt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),u=_(_t);const d={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let c=_(()=>l(u).nodesDraggable||l(u).nodesConnectable||l(u).elementsSelectable),h=_(()=>l(u).viewport.zoom<=l(u).minZoom),f=_(()=>l(u).viewport.zoom>=l(u).maxZoom),g=_(()=>l(u).ariaLabelConfig),p=_(()=>o()==="horizontal"?"horizontal":"vertical");const w=()=>{l(u).zoomIn()},k=()=>{l(u).zoomOut()},m=()=>{l(u).fitView(t.fitViewOptions)},z=()=>{let N=!l(c);l(u).nodesDraggable=N,l(u).nodesConnectable=N,l(u).elementsSelectable=N};{let N=_(()=>["svelte-flow__controls",l(p),t.class]);ds(e,kt({get class(){return l(N)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return l(g)["controls.ariaLabel"]},get style(){return t.style}},()=>a,{children:(S,M)=>{var E=Nh(),P=ae(E);{var H=T=>{var O=ye(),R=ae(O);Me(R,()=>t.before),V(T,O)};le(P,T=>{t.before&&T(H)})}var X=B(P,2);{var J=T=>{var O=Ch(),R=ae(O);pn(R,kt({onclick:w,class:"svelte-flow__controls-zoomin",get title(){return l(g)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomIn.ariaLabel"]},get disabled(){return l(f)}},()=>d,{children:(q,W)=>{mh(q)},$$slots:{default:!0}}));var U=B(R,2);pn(U,kt({onclick:k,class:"svelte-flow__controls-zoomout",get title(){return l(g)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return l(g)["controls.zoomOut.ariaLabel"]},get disabled(){return l(h)}},()=>d,{children:(q,W)=>{wh(q)},$$slots:{default:!0}})),V(T,O)};le(X,T=>{r()&&T(J)})}var L=B(X,2);{var x=T=>{pn(T,kt({class:"svelte-flow__controls-fitview",onclick:m,get title(){return l(g)["controls.fitView.ariaLabel"]},get"aria-label"(){return l(g)["controls.fitView.ariaLabel"]}},()=>d,{children:(O,R)=>{xh(O)},$$slots:{default:!0}}))};le(L,T=>{s()&&T(x)})}var C=B(L,2);{var v=T=>{pn(T,kt({class:"svelte-flow__controls-interactive",onclick:z,get title(){return l(g)["controls.interactive.ariaLabel"]},get"aria-label"(){return l(g)["controls.interactive.ariaLabel"]}},()=>d,{children:(O,R)=>{var U=ye(),q=ae(U);{var W=Q=>{Eh(Q)},G=Q=>{kh(Q)};le(q,Q=>{l(c)?Q(W):Q(G,!1)})}V(O,U)},$$slots:{default:!0}}))};le(C,T=>{i()&&T(v)})}var b=B(C,2);{var y=T=>{var O=ye(),R=ae(O);Me(R,()=>t.children),V(T,O)};le(b,T=>{t.children&&T(y)})}var A=B(b,2);{var I=T=>{var O=ye(),R=ae(O);Me(R,()=>t.after),V(T,O)};le(A,T=>{t.after&&T(I)})}V(S,E)},$$slots:{default:!0}}))}ie()}var at;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(at||(at={}));var Ah=pe("<circle></circle>");function Mh(e,t){var n=Ah();ue(()=>{oe(n,"cx",t.radius),oe(n,"cy",t.radius),oe(n,"r",t.radius),lt(n,0,pt(["svelte-flow__background-pattern","dots",t.class]))}),V(e,n)}var Dh=pe("<path></path>");function Th(e,t){re(t,!0);var n=Dh();ue(()=>{oe(n,"stroke-width",t.lineWidth),oe(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),lt(n,0,pt(["svelte-flow__background-pattern",t.variant,t.class]))}),V(e,n),ie()}const Ih={[at.Dots]:1,[at.Lines]:1,[at.Cross]:6};var zh=pe('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Oh(e,t){re(t,!0);let n=Y(t,"variant",19,()=>at.Dots),o=Y(t,"gap",3,20),r=Y(t,"lineWidth",3,1),s=_(_t),i=_(()=>n()===at.Dots),a=_(()=>n()===at.Cross),u=_(()=>Array.isArray(o())?o():[o(),o()]),d=_(()=>`background-pattern-${l(s).flowId}-${t.id??""}`),c=_(()=>[l(u)[0]*l(s).viewport.zoom||1,l(u)[1]*l(s).viewport.zoom||1]),h=_(()=>(t.size??Ih[n()])*l(s).viewport.zoom),f=_(()=>l(a)?[l(h),l(h)]:l(c)),g=_(()=>l(i)?[l(h)/2,l(h)/2]:[l(f)[0]/2,l(f)[1]/2]);var p=zh();let w;var k=F(p),m=F(k);{var z=M=>{{let E=_(()=>l(h)/2);Mh(M,{get radius(){return l(E)},get class(){return t.patternClass}})}},N=M=>{Th(M,{get dimensions(){return l(f)},get variant(){return n()},get lineWidth(){return r()},get class(){return t.patternClass}})};le(m,M=>{l(i)?M(z):M(N,!1)})}K(k);var S=B(k);K(p),ue(M=>{lt(p,0,pt(["svelte-flow__background","svelte-flow__container",t.class])),w=Ye(p,"",w,M),oe(k,"id",l(d)),oe(k,"x",l(s).viewport.x%l(c)[0]),oe(k,"y",l(s).viewport.y%l(c)[1]),oe(k,"width",l(c)[0]),oe(k,"height",l(c)[1]),oe(k,"patternTransform",`translate(-${l(g)[0]},-${l(g)[1]})`),oe(S,"fill",`url(#${l(d)})`)},[()=>({"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor})]),V(e,p),ie()}var Hh=(e,t)=>{t({event:e})},Rh=ee("<option> </option>"),Lh=(e,t)=>{t({event:e})},Vh=ee("<option> </option>"),Bh=ee('<div class="flex flex-row space-x-4"><div>Enter Label:</div> <div><input type="text"/></div></div>'),Kh=ee('<div class="flex flex-row space-x-4"><div>Enter Variable Name:</div> <div><input type="text"/></div></div> <div class="flex flex-row space-x-4"><div>Enter Label Text:</div> <div><input type="text"/></div></div>',1),Yh=ee('<div class="flex flex-row space-x-4"><div>name:</div> <div><input type="text"/></div></div>'),Fh=ee('<div class="text-xl border-3 rounded-lg flex flex-col space-y-5"><div class="flex flex-row space-x-4"><div class="rounded-md bg-red-400 shrink px-2"><button>SAVE</button></div></div> <div class="flex flex-row space-x-4"><div>Type:</div> <select></select></div> <!> <!> <!></div>'),Xh=ee('<div class="border-3 m-3 rounded-lg flex-row space-x-4"><button><div class="rounded-md text-center px-1 py-0.5 bg-red-400 shrink">EDIT</div></button> <div class="text-xl p-1 text-center"> </div></div> <div class="text-5xl text-center"><button class="text-blue-800 hover:text-red-600">+</button></div>',1),Zh=ee('<div class="absolute z-10 opacity-95 mt-5 w-[30%] ml-[70%] h-[100%]"><div class="p-5 bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg h-[95%] overflow-y-scroll m-3"><button class="text-white bg-red-500 hover:bg-red-600 rounded-full w-8 h-8 flex items-center justify-center transition absolute translate-x-[-2vw] translate-y-[-3.5vh]">-</button> <div class="font-bold text-4xl text-center bg-gradient-to-b from-red-500 to-gray-400 text-white rounded-lg"><input type="text" class="font-bold text-4xl text-center"/></div> <div class="font-bold text-2xl text-center rounded-lg bg-gray-400 text-white mt-3"><label>Agent:</label> <select class="text-center"></select></div> <div class="pt-5 flex flex-col"><div class="text-5xl text-center"><button class="text-blue-800 hover:text-red-600">+</button></div> <!></div></div></div>');function Wh(e,t){re(t,!0);let n=["output-text","input-text","input-document","input-image"],o=_(()=>Ce.at(De.currentStepID)?.formItems);const r=({event:h,idx:f})=>{h.preventDefault(),l(o).splice(f+1,0,{type:"output",name:"Set Name",label:"Set Text",isBeingEdited:!0})},s=({event:h,idx:f})=>{h.preventDefault(),l(o)[f].isBeingEdited=!0},i=({event:h,idx:f})=>{h.preventDefault(),l(o)[f].isBeingEdited=!1},a=({event:h})=>{h.preventDefault(),De.active=!1};var u=ye(),d=ae(u);{var c=h=>{var f=Zh(),g=F(f),p=F(g);p.__click=[Hh,a];var w=B(p,2),k=F(w);nt(k),K(w);var m=B(w,2),z=B(F(m),2);it(z,21,()=>ut,Xt,(P,H)=>{var X=ye(),J=ae(X);{var L=x=>{var C=Rh(),v=F(C,!0);K(C);var b={};ue(()=>{me(v,l(H).role),b!==(b=l(H).role)&&(C.value=(C.__value=l(H).role)??"")}),V(x,C)};le(J,x=>{l(H).status!="deleted"&&x(L)})}V(P,X)}),K(z),K(m);var N=B(m,2),S=F(N),M=F(S);M.__click=[Lh,r],K(S);var E=B(S,2);it(E,17,()=>l(o),Xt,(P,H,X)=>{var J=ye(),L=ae(J);{var x=v=>{var b=Fh(),y=F(b),A=F(y),I=F(A);I.__click=()=>i({event,idx:X}),K(A),K(y);var T=B(y,2),O=B(F(T),2);it(O,21,()=>n,Xt,(Z,$)=>{var te=Vh(),fe=F(te,!0);K(te);var ne={};ue(()=>{me(fe,l($)),ne!==(ne=l($))&&(te.value=(te.__value=l($))??"")}),V(Z,te)}),K(O),K(T);var R=B(T,2);{var U=Z=>{var $=Bh(),te=B(F($),2),fe=F(te);nt(fe),K(te),K($),ot(fe,()=>l(H).label,ne=>l(H).label=ne),V(Z,$)};le(R,Z=>{l(H).type==="output-text"&&Z(U)})}var q=B(R,2);{var W=Z=>{var $=Kh(),te=ae($),fe=B(F(te),2),ne=F(fe);nt(ne),K(fe),K(te);var se=B(te,2),de=B(F(se),2),he=F(de);nt(he),K(de),K(se),ot(ne,()=>l(H).name,xe=>l(H).name=xe),ot(he,()=>l(H).label,xe=>l(H).label=xe),V(Z,$)};le(q,Z=>{l(H).type==="input-text"&&Z(W)})}var G=B(q,2);{var Q=Z=>{var $=Yh(),te=B(F($),2),fe=F(te);nt(fe),K(te),K($),ot(fe,()=>l(H).name,ne=>l(H).name=ne),V(Z,$)};le(G,Z=>{(l(H).type=="input-image"||l(H).type==="input-document")&&Z(Q)})}K(b),Nn(O,()=>l(H).type,Z=>l(H).type=Z),V(v,b)},C=v=>{var b=Xh(),y=ae(b),A=F(y);A.__click=()=>s({event,idx:X});var I=B(A,2),T=F(I,!0);K(I),K(y);var O=B(y,2),R=F(O);R.__click=U=>{r({event:U,idx:X})},K(O),ue(()=>me(T,l(H).label)),V(v,b)};le(L,v=>{l(H).isBeingEdited?v(x):v(C,!1)})}V(P,J)}),K(N),K(g),K(f),ot(k,()=>Ce[De.currentStepID].label,P=>Ce[De.currentStepID].label=P),Nn(z,()=>Ce[De.currentStepID].agent,P=>Ce[De.currentStepID].agent=P),V(h,f)};le(d,h=>{De.active&&h(c)})}V(e,u),ie()}Ot(["click"]);var qh=ee('<!> <div class="maxw-[5vw] px-3 text-center"><div> </div> <div> </div> <button class="nodrag"><svg width="15px" height="15px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="Complete"><g id="edit"><g><path d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><polygon fill="none" points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon></g></g></g></svg></button></div> <!>',1);function Gh(e,t){re(t,!0);const n=({event:f})=>{De.currentStepID=t.data.id,De.active=!0};var o=qh(),r=ae(o);Je(r,{type:"target",get position(){return j.Left}});var s=B(r,2),i=F(s),a=F(i,!0);K(i);var u=B(i,2),d=F(u,!0);K(u);var c=B(u,2);K(s);var h=B(s,2);Je(h,{type:"source",get position(){return j.Right}}),ue(()=>{me(a,t.data.agent),me(d,t.data.label)}),Re("click",c,n),V(e,o),ie()}var Uh=ee('<!> <div class="maxw-[5vw] px-3 text-center"><div> </div> <div> </div> <div> </div> <button class="nodrag"><svg width="15px" height="15px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="Complete"><g id="edit"><g><path d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><polygon fill="none" points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon></g></g></g></svg></button></div> <!> <!>',1);function Qh(e,t){re(t,!0);const n=({event:w})=>{De.currentStepID=t.data.id,De.active=!0};var o=Uh(),r=ae(o);Je(r,{type:"target",get position(){return j.Left}});var s=B(r,2),i=F(s),a=F(i,!0);K(i);var u=B(i,2),d=F(u,!0);K(u);var c=B(u,2),h=F(c,!0);K(c);var f=B(c,2);f.__click=n,K(s);var g=B(s,2);Je(g,{id:"pos",type:"source",class:"!bg-green-500",get position(){return j.Right}});var p=B(g,2);Je(p,{id:"neg",type:"source",class:"!bg-red-500",get position(){return j.Bottom}}),ue(()=>{me(a,t.data.agent),me(d,t.data.label),me(h,t.data.condition)}),V(e,o),ie()}Ot(["click"]);function Jh(e,t){re(t,!0);let n=Y(t,"style",7),o=_(()=>eo({sourceX:t.sourceX,sourceY:t.sourceY,sourcePosition:t.sourcePosition,targetX:t.targetX,targetY:t.targetY,targetPosition:t.targetPosition})),r=_(()=>zt(l(o),1)),s=_(()=>l(r)[0]);n(t.sourceHandleId==="pos"?"stroke: green;":t.sourceHandleId==="neg"?"stroke: red;":"stroke: black;"),dn(e,{get id(){return t.id},get style(){return n()},get path(){return l(s)}}),ie()}var jh=ee("<!> <!>",1),$h=ee('<li class="px-4 py-2 hover:bg-red-500 hover:text-white cursor-pointer">Delete Node</li>'),eg=ee('<ul class="context-menu absolute bg-white border rounded shadow-md w-40 py-1 svelte-tu7f7e"><li class="px-4 py-2 hover:bg-gray-200 cursor-pointer">Add Activity</li> <li class="px-4 py-2 hover:bg-gray-200 cursor-pointer">Add Control</li> <!></ul> <div class="fixed inset-0"></div>',1),tg=ee("<option> </option>"),ng=ee('<div class="mb-4"><label class="block font-medium mb-1">Condition:</label> <input type="text" class="w-full border rounded px-2 py-1"/></div>'),og=ee('<div class="fixed inset-0 flex items-center justify-center modal-bg p-4 svelte-tu7f7e"><div class="bg-white rounded shadow-lg p-6 w-96 max-w-full"><h2 class="text-xl font-semibold mb-4">Create New Node</h2> <div class="mb-4"><label class="block font-medium mb-1">Node Type:</label> <select class="w-full border rounded px-2 py-1"><option>Activity Node</option><option>Control Node</option></select></div> <div class="mb-4"><label class="block font-medium mb-1">Name:</label> <input type="text" class="w-full border rounded px-2 py-1"/></div> <div class="mb-4"><label class="block font-medium mb-1">Agent:</label> <select class="w-full border rounded px-2 py-1"></select></div> <!> <div class="flex justify-end space-x-3"><button class="px-4 py-2 rounded bg-gray-300 hover:bg-gray-400">Cancel</button> <button class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Create</button></div></div></div>'),rg=ee('<div class="relative w-full h-screen"><!> <!> <!></div>');function ig(e,t){re(t,!1);const n={processStep:Gh,controllStep:Qh},o={coloredEdge:Jh},r={id:"start",type:"input",data:Ce[0],position:{x:50,y:200},sourcePosition:j.Right},s={id:"end",type:"output",data:Ce[1],position:{x:650,y:200},targetPosition:j.Left};let i=Ae([r,s,{id:"1",data:Ce[2],type:"processStep",position:{x:400,y:200}}]),a=Ae([]),u=Ae(0),d=Ae(0),c=Ae(null),h=Ae(!1),f=Ae(!1),g=Ae("input"),p=Ae(""),w=Ae(""),k=Ae("");function m(){return"node_"+Math.random().toString(36).substr(2,9)}const z=({event:y})=>{y.preventDefault(),D(h,!0),D(c,null),D(u,y.clientX),D(d,y.clientY),console.log("click graph")},N=({event:y,node:A})=>{y.preventDefault(),D(h,!0),D(c,A.id),D(u,y.clientX),D(d,y.clientY),console.log("click node")};function S(){D(f,!0),D(h,!1),D(p,""),D(w,""),D(k,""),D(g,"input")}function M(){D(f,!0),D(h,!1),D(p,""),D(w,""),D(k,""),D(g,"control")}function E(){if(l(c)){if(l(c)==="start"||l(c)==="end"){alert("Cannot delete start or end nodes."),D(h,!1);return}D(i,l(i).filter(y=>y.id!==l(c))),D(a,l(a).filter(y=>y.source!==l(c)&&y.target!==l(c))),D(h,!1)}}function P(){if(!l(p).trim()||!l(w).trim()){alert("Name and Agent are required.");return}const y=m();let A="";l(g)==="input"?(A="processStep",Ce.push({id:Ce.length,label:l(p).trim(),agent:l(w).trim(),type:"input",formItems:[]})):(A="controllStep",Ce.push({id:Ce.length,label:l(p).trim(),agent:l(w).trim(),condition:l(k).trim(),type:"control",formItems:[]}));const I={x:l(u)-400,y:l(d)-300};if(D(i,[...l(i),{id:y,type:A,data:Ce.at(-1),position:I,sourcePosition:j.Right,targetPosition:j.Left}]),l(c)){const T=l(i).find(O=>O.id===l(c));T&&T.data.type==="input"&&D(a,l(a).filter(O=>O.source!==T.id)),l(c)!=="end"&&D(a,[...l(a),{id:`e_${l(c)}_${y}`,source:l(c),target:y}])}D(f,!1)}function H(){D(h,!1)}function X(){D(f,!1)}Wr();var J=rg(),L=F(J);gh(L,{get nodeTypes(){return n},get edgeTypes(){return o},fitView:!0,onnodecontextmenu:N,onpanecontextmenu:z,class:"bg-gray-100",defaultEdgeOptions:{animated:!0,type:"coloredEdge"},get nodes(){return l(i)},set nodes(y){D(i,y)},get edges(){return l(a)},set edges(y){D(a,y)},children:(y,A)=>{var I=jh(),T=ae(I);Oh(T,{});var O=B(T,2);Ph(O,{}),V(y,I)},$$slots:{default:!0},$$legacy:!0});var x=B(L,2);{var C=y=>{var A=eg(),I=ae(A),T=F(I),O=B(T,2),R=B(O,2);{var U=W=>{var G=$h();Re("click",G,E),V(W,G)};le(R,W=>{l(c)&&l(c)!=="start"&&l(c)!=="end"&&W(U)})}K(I);var q=B(I,2);ue(()=>Ye(I,`top: ${l(d)??""}px; left: ${l(u)??""}px;`)),Re("click",T,S),Re("click",O,M),Re("click",I,ca(function(W){ua.call(this,t,W)})),Re("click",q,H),V(y,A)};le(x,y=>{l(h)&&y(C)})}var v=B(x,2);{var b=y=>{var A=og(),I=F(A),T=B(F(I),2),O=B(F(T),2);ue(()=>{l(g),or(()=>{})});var R=F(O);R.value=R.__value="input";var U=B(R);U.value=U.__value="control",K(O),K(T);var q=B(T,2),W=B(F(q),2);nt(W),K(q);var G=B(q,2),Q=B(F(G),2);ue(()=>{l(w),or(()=>{})}),it(Q,5,()=>ut,Xt,(se,de)=>{var he=ye(),xe=ae(he);{var Ht=$e=>{var ce=tg(),ve=F(ce,!0);K(ce);var Ze={};ue(()=>{me(ve,l(de).role),Ze!==(Ze=l(de).role)&&(ce.value=(ce.__value=l(de).role)??"")}),V($e,ce)};le(xe,$e=>{l(de).status!="deleted"&&$e(Ht)})}V(se,he)}),K(Q),K(G);var Z=B(G,2);{var $=se=>{var de=ng(),he=B(F(de),2);nt(he),K(de),ot(he,()=>l(k),xe=>D(k,xe)),V(se,de)};le(Z,se=>{l(g)==="control"&&se($)})}var te=B(Z,2),fe=F(te),ne=B(fe,2);K(te),K(I),K(A),Nn(O,()=>l(g),se=>D(g,se)),ot(W,()=>l(p),se=>D(p,se)),Nn(Q,()=>l(w),se=>D(w,se)),Re("click",fe,X),Re("click",ne,P),V(y,A)};le(v,y=>{l(f)&&y(b)})}K(J),V(e,J),ie()}var sg=ee('<div class="absolute z-10 opacity-95 mt-5"><!></div> <!> <!>',1);function fg(e,t){re(t,!1);const n=!0;var o=sg(),r=ae(o),s=F(r);ma(s,{}),K(r);var i=B(r,2);Wh(i,{});var a=B(i,2);return ig(a,{}),V(e,o),aa(t,"prerender",n),ie({prerender:n})}export{fg as component};
